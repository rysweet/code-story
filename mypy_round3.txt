src/codestory/llm/metrics.py:164: error: Returning Any from function declared
to return "None"  [no-any-return]
                    return result
                    ^~~~~~~~~~~~~
src/codestory/llm/metrics.py:202: error: Returning Any from function declared
to return "None"  [no-any-return]
                    return result
                    ^~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:33: error: No return value expected 
[return-value]
            return Counter(name, description, counter_labels)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:38: error: No return value expected 
[return-value]
                    return collector
                    ^~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:47: error: No return value expected 
[return-value]
            return NoOpCounter()
            ^~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:55: error: No return value expected 
[return-value]
            return Histogram(name, description, hist_labels, buckets=bucke...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:60: error: No return value expected 
[return-value]
                    return collector
                    ^~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:69: error: No return value expected 
[return-value]
            return NoOpHistogram()
            ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:75: error: No return value expected 
[return-value]
            return Gauge(name, description, gauge_labels)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:80: error: No return value expected 
[return-value]
                    return collector
                    ^~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:95: error: No return value expected 
[return-value]
            return NoOpGauge()
            ^~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:96: error: "_get_or_create_counter"
does not return a value (it only ever returns None)  [func-returns-value]
    INGESTION_JOB_COUNT = _get_or_create_counter('codestory_ingestion_jobs...
                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/utils.py:97: error: "_get_or_create_counter"
does not return a value (it only ever returns None)  [func-returns-value]
    INGESTION_STEP_COUNT = _get_or_create_counter('codestory_ingestion_ste...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/utils.py:98: error: "_get_or_create_histogram"
does not return a value (it only ever returns None)  [func-returns-value]
    INGESTION_STEP_DURATION = _get_or_create_histogram('codestory_ingestio...
                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/utils.py:99: error: "_get_or_create_gauge"
does not return a value (it only ever returns None)  [func-returns-value]
    INGESTION_ACTIVE_JOBS = _get_or_create_gauge('codestory_ingestion_acti...
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/utils.py:179: error: Library stubs not
installed for "pkg_resources"  [import-untyped]
                    import pkg_resources
    ^
src/codestory/ingestion_pipeline/utils.py:179: note: Hint: "python3 -m pip install types-setuptools"
src/codestory/ingestion_pipeline/utils.py:179: note: (or run "mypy --install-types" to install all missing stub packages)
src/codestory/graphdb/metrics.py:50: error: Returning Any from function
declared to return "DummyHistogram"  [no-any-return]
            return self
            ^~~~~~~~~~~
src/codestory/graphdb/metrics.py:60: error: Argument 1 to "contextmanager" has
incompatible type "Callable[[Any], None]"; expected
"Callable[[Any], Iterator[Never]]"  [arg-type]
        @contextmanager
         ^
src/codestory/graphdb/metrics.py:61: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
        def time(self: Any) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/metrics.py:126: error: Returning Any from function
declared to return "None"  [no-any-return]
                    return func(*args, **kwargs)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/metrics.py:132: error: Returning Any from function
declared to return "None"  [no-any-return]
                    return result
                    ^~~~~~~~~~~~~
src/codestory_summarizer/models.py:140: error: Returning Any from function
declared to return "float"  [no-any-return]
            return processed / self.total_count * 100.0
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/domain/ingestion.py:123: error: Returning Any from
function declared to return "IngestionRequest"  [no-any-return]
            return self
            ^~~~~~~~~~~
src/codestory_service/domain/ingestion.py:208: error: Returning Any from
function declared to return "IngestionJob"  [no-any-return]
            return self
            ^~~~~~~~~~~
src/codestory_service/domain/config.py:65: error: Returning Any from function
declared to return "bool"  [no-any-return]
            return self.metadata.type == ConfigValueType.SECRET or self.me...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/domain/config.py:70: error: Returning Any from function
declared to return "ConfigItem"  [no-any-return]
                return self
                ^~~~~~~~~~~
src/codestory_service/domain/config.py:169: error: Returning Any from function
declared to return "ConfigSchema"  [no-any-return]
            return cls(json_schema=json_schema, ui_schema=ui_schema)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/models.py:132: error: Returning Any from function
declared to return "float"  [no-any-return]
            return self.processed_files / self.total_files * 100.0
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/models.py:180: error: Returning Any from function declared to
return "LLMConfiguration"  [no-any-return]
            return cls(mode=mode, provider=provider, allow_fallback=allow_...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/graphdb/models.py:47: error: Returning Any from function declared
to return "dict[str, Any]"  [no-any-return]
            return result
            ^~~~~~~~~~~~~
src/codestory/graphdb/models.py:66: error: Returning Any from function declared
to return "dict[str, Any]"  [no-any-return]
            return result
            ^~~~~~~~~~~~~
src/codestory_summarizer/utils/progress_tracker.py:50: error: Returning Any
from function declared to return "float"  [no-any-return]
            return self.graph.get_progress()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/utils/progress_tracker.py:58: error: Returning Any
from function declared to return "float"  [no-any-return]
            return time.time() - self.start_time
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/utils/progress_tracker.py:72: error: Returning Any
from function declared to return "float | None"  [no-any-return]
            return max(0, remaining)
            ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/progress_tracker.py:62: error: Returning Any
from function declared to return "float"  [no-any-return]
            return min(self.processed_documents / self.total_documents * 1...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_docgrapher/utils/progress_tracker.py:70: error: Returning Any
from function declared to return "float"  [no-any-return]
            return time.time() - self.start_time
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/progress_tracker.py:84: error: Returning Any
from function declared to return "float | None"  [no-any-return]
            return max(0, remaining)
            ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/parsers/parser_factory.py:64: error: Returning Any
from function declared to return "Parser | None"  [no-any-return]
            return parser_class()
            ^~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/backoff.py:26: error: Item "None" of "Future | None" has no
attribute "exception"  [union-attr]
        exception = retry_state.outcome.exception()
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/backoff.py:37: error: Item "None" of "Future | None" has no
attribute "exception"  [union-attr]
        exception = retry_state.outcome.exception()
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/backoff.py:41: error: Item "None" of "RetryAction | None" has
no attribute "sleep"  [union-attr]
        wait_time = retry_state.next_action.sleep
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/backoff.py:67: error: Returning Any from function declared to
return "None"  [no-any-return]
                    return func(*args, **kwargs)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/backoff.py:118: error: Returning Any from function declared
to return "None"  [no-any-return]
                    return await func(*args, **kwargs)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/parsers/docstring_parser.py:56: error: Name
"docstrings" already defined on line 50  [no-redef]
                docstrings: list[Any] = [][no - redef]
                ^
src/codestory_docgrapher/parsers/docstring_parser.py:56: error: Name "no" is
not defined  [name-defined]
                docstrings: list[Any] = [][no - redef]
                                           ^
src/codestory_docgrapher/parsers/docstring_parser.py:56: error: Name "redef" is
not defined  [name-defined]
                docstrings: list[Any] = [][no - redef]
                                                ^
src/codestory_docgrapher/parsers/docstring_parser.py:266: error: Name
"param_section" already defined on line 260  [no-redef]
                        param_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:266: error: Name "no" is
not defined  [name-defined]
                        param_section: list[Any] = [][no - redef]
                                                      ^
src/codestory_docgrapher/parsers/docstring_parser.py:266: error: Name "redef"
is not defined  [name-defined]
                        param_section: list[Any] = [][no - redef]
                                                           ^
src/codestory_docgrapher/parsers/docstring_parser.py:275: error: Name
"param_section" already defined on line 260  [no-redef]
                        param_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:275: error: Name "no" is
not defined  [name-defined]
                        param_section: list[Any] = [][no - redef]
                                                      ^
src/codestory_docgrapher/parsers/docstring_parser.py:275: error: Name "redef"
is not defined  [name-defined]
                        param_section: list[Any] = [][no - redef]
                                                           ^
src/codestory_docgrapher/parsers/docstring_parser.py:301: error: Name
"return_section" already defined on line 295  [no-redef]
                        return_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:301: error: Name "no" is
not defined  [name-defined]
                        return_section: list[Any] = [][no - redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:301: error: Name "redef"
is not defined  [name-defined]
                        return_section: list[Any] = [][no - redef]
                                                            ^
src/codestory_docgrapher/parsers/docstring_parser.py:310: error: Name
"return_section" already defined on line 295  [no-redef]
                        return_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:310: error: Name "no" is
not defined  [name-defined]
                        return_section: list[Any] = [][no - redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:310: error: Name "redef"
is not defined  [name-defined]
                        return_section: list[Any] = [][no - redef]
                                                            ^
src/codestory_docgrapher/parsers/docstring_parser.py:336: error: Name
"raises_section" already defined on line 330  [no-redef]
                        raises_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:336: error: Name "no" is
not defined  [name-defined]
                        raises_section: list[Any] = [][no - redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:336: error: Name "redef"
is not defined  [name-defined]
                        raises_section: list[Any] = [][no - redef]
                                                            ^
src/codestory_docgrapher/parsers/docstring_parser.py:345: error: Name
"raises_section" already defined on line 330  [no-redef]
                        raises_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:345: error: Name "no" is
not defined  [name-defined]
                        raises_section: list[Any] = [][no - redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:345: error: Name "redef"
is not defined  [name-defined]
                        raises_section: list[Any] = [][no - redef]
                                                            ^
src/codestory_docgrapher/parsers/docstring_parser.py:371: error: Name
"example_section" already defined on line 365  [no-redef]
                        example_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:371: error: Name "no" is
not defined  [name-defined]
                        example_section: list[Any] = [][no - redef]
                                                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:371: error: Name "redef"
is not defined  [name-defined]
                        example_section: list[Any] = [][no - redef]
                                                             ^
src/codestory_docgrapher/parsers/docstring_parser.py:380: error: Name
"example_section" already defined on line 365  [no-redef]
                        example_section: list[Any] = [][no - redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:380: error: Name "no" is
not defined  [name-defined]
                        example_section: list[Any] = [][no - redef]
                                                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:380: error: Name "redef"
is not defined  [name-defined]
                        example_section: list[Any] = [][no - redef]
                                                             ^
src/codestory_mcp/utils/config.py:80: error: Missing named argument "port" for
"MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument "host" for
"MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument "workers"
for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"azure_tenant_id" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"azure_client_id" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"auth_enabled" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"code_story_service_url" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"api_token_issuer" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"api_audience" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"required_scopes" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"cors_origins" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"enable_grpc" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"prometheus_metrics_path" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"enable_opentelemetry" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument
"openapi_url" for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument "docs_url"
for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument "redoc_url"
for "MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:80: error: Missing named argument "debug" for
"MCPSettings"  [call-arg]
        return MCPSettings()
               ^~~~~~~~~~~~~
src/codestory/config/settings.py:87: error: Returning Any from function
declared to return "IngestionSettings"  [no-any-return]
            return self
            ^~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument "title" for
"ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument "summary"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument "version"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"api_prefix" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument "docs_url"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"openapi_url" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument "redoc_url"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"cors_origins" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"cors_allow_credentials" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"cors_allow_methods" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"cors_allow_headers" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"auth_enabled" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"jwt_secret" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"jwt_algorithm" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"jwt_expiration" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"websocket_heartbeat" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"rate_limit_enabled" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"rate_limit_requests" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"rate_limit_window" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"metrics_enabled" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"metrics_route" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument "dev_mode"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"max_request_size" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:82: error: Missing named argument
"response_timeout" for "ServiceSettings"  [call-arg]
        return ServiceSettings()
               ^~~~~~~~~~~~~~~~~
src/codestory_mcp/auth/scope_manager.py:22: error: Returning Any from function
declared to return "list[str]"  [no-any-return]
            return self.settings.required_scopes
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/auth/scope_manager.py:49: error: Returning Any from function
declared to return "bool"  [no-any-return]
            return self.has_required_scope(scopes)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "str"  [arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"Callable[[], str] | None"  [arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"float | Timeout | NotGiven | None"  [arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "int"  [arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"Mapping[str, str] | None"  [arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"Mapping[str, object] | None"  [arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "Client | None" 
[arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:197: error: Argument 1 to "AzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "bool"  [arg-type]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                                  ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "str"  [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"Callable[[], str | Awaitable[str]] | None"  [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"float | Timeout | NotGiven | None"  [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "int"  [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"Mapping[str, str] | None"  [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected
"Mapping[str, object] | None"  [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "AsyncClient | None"
 [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:199: error: Argument 1 to "AsyncAzureOpenAI" has
incompatible type "**dict[str, Any | str | None]"; expected "bool"  [arg-type]
    ...          self._async_client = AsyncAzureOpenAI(**azure_openai_kwargs)
                                                         ^~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:227: error: No return value expected 
[return-value]
            return (model_name, request_data)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:20: error: Name "get_settings" already
defined (possibly by an import)  [no-redef]
        get_settings: Union[Callable[[], Any], None] = None
        ^
src/codestory/graphdb/neo4j_connector.py:82: error: Returning Any from function
declared to return "None"  [no-any-return]
                        return func(*args, **kwargs)
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:191: error: Returning Any from
function declared to return "Neo4jConnector"  [no-any-return]
            return self
            ^~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:432: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                return result
                ^~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:521: error: Returning Any from
function declared to return "None"  [no-any-return]
                    return func(self, **kwargs)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:529: error: Returning Any from
function declared to return "None"  [no-any-return]
                    return result
                    ^~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:556: error: Returning Any from
function declared to return "None"  [no-any-return]
                    return self.driver.session.return_value
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:557: error: Returning Any from
function declared to return "None"  [no-any-return]
                return self.driver.session(database=self.database)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/utils/content_extractor.py:38: error: Returning Any
from function declared to return "dict[str, str | list[str]]"  [no-any-return]
                return self._extract_repository_content(node)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/utils/content_extractor.py:40: error: Returning Any
from function declared to return "dict[str, str | list[str]]"  [no-any-return]
                return self._extract_directory_content(node)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/utils/content_extractor.py:42: error: Returning Any
from function declared to return "dict[str, str | list[str]]"  [no-any-return]
                return self._extract_file_content(node)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/utils/content_extractor.py:44: error: Returning Any
from function declared to return "dict[str, str | list[str]]"  [no-any-return]
                return self._extract_class_content(node)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/utils/content_extractor.py:46: error: Returning Any
from function declared to return "dict[str, str | list[str]]"  [no-any-return]
                return self._extract_function_content(node)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/openai_adapter.py:175: error: Argument
"role" to "ChatMessage" has incompatible type "str"; expected "ChatRole" 
[arg-type]
                messages = [ChatMessage(role='system', content='You are a ...
                                             ^~~~~~~~
src/codestory_service/infrastructure/msal_validator.py:56: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                    return claims
                    ^~~~~~~~~~~~~
src/codestory_service/infrastructure/msal_validator.py:62: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                    return claims
                    ^~~~~~~~~~~~~
src/codestory_service/application/config_service.py:50: error: Missing return
statement  [return]
        async def _init_redis(self: Any) -> None:
        ^
src/codestory_service/application/config_service.py:56: error: Incompatible
types in assignment (expression has type "Redis", variable has type "None") 
[assignment]
                self.redis = redis.Redis(host=redis_host, port=redis_port,...
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/config_service.py:57: error: "None" has no
attribute "ping"  [attr-defined]
                await self.redis.ping()[attr - defined]
                      ^~~~~~~~~~~~~~~
src/codestory_service/application/config_service.py:57: error: Name "attr" is
not defined  [name-defined]
                await self.redis.ping()[attr - defined]
                                        ^
src/codestory_service/application/config_service.py:57: error: Name "defined"
is not defined  [name-defined]
                await self.redis.ping()[attr - defined]
                                               ^
src/codestory_service/application/config_service.py:180: error: Returning Any
from function declared to return "ConfigDump"  [no-any-return]
                return self.get_config_dump()
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/auth/entra_validator.py:71: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return claims
                ^~~~~~~~~~~~~
src/codestory_mcp/auth/entra_validator.py:94: error: Name "scopes" already
defined on line 90  [no-redef]
                scopes: list[Any] = []
                ^
src/codestory_filesystem/step.py:12: error: Cannot find implementation or
library stub for module named "pathspec"  [import-not-found]
    import pathspec
    ^
src/codestory_filesystem/step.py:206: error: Dict entry 1 has incompatible type
"str": "str"; expected "str": "StepStatus | None"  [dict-item]
    ...tus_info.update({'status': StepStatus.COMPLETED, 'message': status_msg...
                                                        ^~~~~~~~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:206: error: Dict entry 2 has incompatible type
"str": "float"; expected "str": "StepStatus | None"  [dict-item]
    ...s': StepStatus.COMPLETED, 'message': status_msg, 'progress': 100.0, 'r...
                                                        ^~~~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:210: error: Dict entry 1 has incompatible type
"str": "str"; expected "str": "StepStatus | None"  [dict-item]
    ...status_info.update({'status': StepStatus.FAILED, 'error': f'Error retr...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:214: error: Dict entry 1 has incompatible type
"str": "str"; expected "str": "StepStatus | None"  [dict-item]
    ...status_info.update({'status': StepStatus.FAILED, 'error': str(result.r...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:225: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
                return job_info
                ^~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:230: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
                return job_info
                ^~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:258: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
                return job_info
                ^~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:263: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
                return job_info
                ^~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:283: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
                return result
                ^~~~~~~~~~~~~
src/codestory_filesystem/step.py:289: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
                    return job_info
                    ^~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:307: error: Returning Any from function
declared to return "str"  [no-any-return]
            return job_id
            ^~~~~~~~~~~~~
src/codestory_filesystem/step.py:309: error: Untyped decorator makes function
"process_filesystem" untyped  [misc]
    @shared_task(name='codestory_filesystem.step.process_filesystem', bind...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:376: error: Argument 1 to "Neo4jConnector" has
incompatible type "**dict[str, str]"; expected "bool"  [arg-type]
                neo4j = Neo4jConnector(**params)
                                         ^~~~~~
src/codestory_filesystem/step.py:594: error: Value of type "object" is not
indexable  [index]
    ...ctory Operations ({dir_count} dirs):\n  - Total: {overall_timing_stats...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:599: error: Value of type "object" is not
indexable  [index]
    ...nt': dir_count, 'performance': {'avg_file_time': overall_timing_stats[...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:604: error: Value of type "object" is not
indexable  [index]
    ...on:.2f} seconds\n- Average Neo4j operation time: {overall_timing_stats...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_docgrapher/utils/path_matcher.py:54: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                return self.path_cache[path_reference]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:65: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                return matching_paths[0]
                ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:82: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                        return filtered_paths[0]
                        ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:86: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                        return shortest
                        ^~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:89: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                return shortest
                ^~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:95: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                    return matching_paths[0]
                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:43: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                return self._analyze_heading(content)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:45: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                return self._analyze_code_block(content, entity.metadata.g...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_docgrapher/utils/content_analyzer.py:47: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                return self._analyze_function_desc(content)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:49: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                return self._analyze_class_desc(content)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:51: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                return self._analyze_module_desc(content)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:53: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                return self._analyze_generic(content)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:234: error: Returning Any
from function declared to return "str"  [no-any-return]
                return response.choices[0].message.content.strip()
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:252: error: Returning Any
from function declared to return "str"  [no-any-return]
                return response.choices[0].message.content.strip()
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:270: error: Returning Any
from function declared to return "str"  [no-any-return]
                return response.choices[0].message.content.strip()
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_blarify/step.py:234: error: Returning Any from function declared
to return "dict[str, Any]"  [no-any-return]
            return result
            ^~~~~~~~~~~~~
src/codestory_blarify/step.py:254: error: Returning Any from function declared
to return "str"  [no-any-return]
            return self.run(repository_path, **config)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_blarify/step.py:256: error: Untyped decorator makes function
"run_blarify" untyped  [misc]
    @shared_task(bind=True, name='codestory_blarify.step.run_blarify')
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_blarify/step.py:301: error: Unpacking a string is disallowed 
[misc]
                    for host_path, container_path in os.environ.get('CODES...
                    ^
src/codestory_blarify/step.py:302: error: Cannot determine type of "host_path" 
[has-type]
                        if host_path and container_path and repository_pat...
                           ^~~~~~~~~
src/codestory_blarify/step.py:302: error: Cannot determine type of
"container_path"  [has-type]
                        if host_path and container_path and repository_pat...
                                         ^~~~~~~~~~~~~~
src/codestory_blarify/step.py:303: error: Cannot determine type of "host_path" 
[has-type]
    ...tainer_repository_path = repository_path.replace(host_path, container_...
                                                        ^~~~~~~~~
src/codestory_blarify/step.py:303: error: Cannot determine type of
"container_path"  [has-type]
    ...epository_path = repository_path.replace(host_path, container_path, 1)
                                                           ^~~~~~~~~~~~~~
src/codestory_blarify/step.py:404: error: Returning Any from function declared
to return "dict[str, Any]"  [no-any-return]
            return result
            ^~~~~~~~~~~~~
src/codestory/mcp/main.py:37: error: "Settings" has no attribute "project_name"
 [attr-defined]
            "name": f"{settings.project_name}-mcp",
                      ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/tasks.py:14: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        psutil = None
                 ^~~~
src/codestory/ingestion_pipeline/tasks.py:27: error: Untyped decorator makes
function "run_step" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.run_step", bind=Tru...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/tasks.py:388: error: Untyped decorator makes
function "orchestrate_pipeline" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.orchestrate_pipelin...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/tasks.py:607: error: Untyped decorator makes
function "get_job_status" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.get_job_status", bi...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/tasks.py:647: error: Untyped decorator makes
function "stop_job" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.stop_job", bind=Tru...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:103: error: Argument 1
to "int" has incompatible type "int | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                            eta = datetime.fromtimestamp(int(request.eta))
                                                             ^~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:107: error: Argument 1
to "int" has incompatible type "int | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                    countdown = int(request.countdown)
                                    ^~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:134: error:
"type[StepStatus]" has no attribute "UNKNOWN"  [attr-defined]
    ...(name=name, status=StepStatus(step.get('status', StepStatus.UNKNOWN)),...
                                                        ^~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:137: error:
"type[StepStatus]" has no attribute "UNKNOWN"  [attr-defined]
    ...ame=name, status=StepStatus(result.get('status', StepStatus.UNKNOWN)),...
                                                        ^~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:137: error: Argument 1
to "fromtimestamp" of "datetime" has incompatible type "Any | None"; expected
"float"  [arg-type]
    ....get('error'), started_at=datetime.fromtimestamp(result.get('start_tim...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:149: error: Unexpected
keyword argument "cpu_percent" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.RU...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:149: error: Unexpected
keyword argument "memory_mb" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.RU...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:155: error: Unexpected
keyword argument "cpu_percent" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CO...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:155: error: Unexpected
keyword argument "memory_mb" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CO...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:159: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.FA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:159: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.FA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:159: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.FA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:159: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.FA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:159: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.FA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:159: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.FA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:161: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:161: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:161: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:161: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:161: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:161: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:161: error: Missing
named argument "steps" for "IngestionJob"  [call-arg]
                    return IngestionJob(job_id=job_id, status=JobStatus.CA...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:162: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.UNKNOW...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:162: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.UNKNOW...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:162: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.UNKNOW...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:162: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.UNKNOW...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:162: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.UNKNOW...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:162: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.UNKNOW...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:162: error: Missing
named argument "steps" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.UNKNOW...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:185: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.CANCEL...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:185: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.CANCEL...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:185: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.CANCEL...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:185: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.CANCEL...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:185: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.CANCEL...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:185: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.CANCEL...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:185: error: Missing
named argument "steps" for "IngestionJob"  [call-arg]
                return IngestionJob(job_id=job_id, status=JobStatus.CANCEL...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:208: error: Item
"list[JobStatus]" of "list[JobStatus] | None" has no attribute
"HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                raise HTTPException(status_code=status.HTTP_500_INTERNAL_S...
                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/infrastructure/celery_adapter.py:208: error: Item "None"
of "list[JobStatus] | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                raise HTTPException(status_code=status.HTTP_500_INTERNAL_S...
                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/graph_service.py:49: error: Returning Any
from function declared to return "QueryResult"  [no-any-return]
                return result
                ^~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:76: error: Returning Any
from function declared to return "VectorResult"  [no-any-return]
                return result
                ^~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:99: error: Returning Any
from function declared to return "PathResult"  [no-any-return]
                return result
                ^~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:128: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
    ...d(n) = $id RETURN n', parameters={'id': result.id}, query_type='read')
                                                                      ^~~~~~
src/codestory_service/application/graph_service.py:137: error: Returning Any
from function declared to return "AskAnswer"  [no-any-return]
                return answer
                ^~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:161: error: Returning Any
from function declared to return "str"  [no-any-return]
                return html_content
                ^~~~~~~~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:181: error: Incompatible
types in assignment (expression has type "str", target has type "int") 
[assignment]
                params['focus_node_id'] = request.focus_node_id
                                          ^~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:186: error: Incompatible
types in assignment (expression has type "list[str]", target has type "int") 
[assignment]
                params['node_types'] = node_types
                                       ^~~~~~~~~~
src/codestory_service/application/graph_service.py:190: error: Incompatible
types in assignment (expression has type "str", target has type "int") 
[assignment]
                params['search_query'] = search_query
                                         ^~~~~~~~~~~~
src/codestory_service/application/graph_service.py:193: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
    ... CypherQuery(query=cypher_query, parameters=params, query_type='read')
                                                                      ^~~~~~
src/codestory_service/application/graph_service.py:270: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
    ...y = CypherQuery(query='MATCH (n) DETACH DELETE n', query_type='write')
                                                                     ^~~~~~~
src/codestory_service/application/graph_service.py:274: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
    ...pherQuery(query='CALL apoc.schema.assert({}, {})', query_type='write')
                                                                     ^~~~~~~
src/codestory_mcp/adapters/openai_service.py:44: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                messages = [ChatMessage(role='system', content='You are a ...
                                             ^~~~~~~~
src/codestory_mcp/adapters/openai_service.py:46: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                    messages.append(ChatMessage(role='user', content=f'I n...
                                                     ^~~~~~
src/codestory_mcp/adapters/openai_service.py:48: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                    messages.append(ChatMessage(role='user', content='Plea...
                                                     ^~~~~~
src/codestory_mcp/adapters/openai_service.py:49: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                messages.append(ChatMessage(role='user', content=f'```\n{c...
                                                 ^~~~~~
src/codestory_mcp/adapters/openai_service.py:55: error: Returning Any from
function declared to return "str"  [no-any-return]
                return summary
                ^~~~~~~~~~~~~~
src/codestory_mcp/adapters/openai_service.py:85: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                messages = [ChatMessage(role='system', content='You are a ...
                                             ^~~~~~~~
src/codestory_mcp/adapters/openai_service.py:91: error: Returning Any from
function declared to return "str"  [no-any-return]
                return explanation
                ^~~~~~~~~~~~~~~~~~
src/codestory_mcp/adapters/graph_service.py:97: error: Incompatible return
value type (got "MockNode", expected "Node")  [return-value]
                return node
                       ^~~~
src/codestory_mcp/adapters/graph_service.py:167: error: Incompatible types in
assignment (expression has type "dict[str, Any]", target has type "str") 
[assignment]
                    payload['parameters'] = parameters
                                            ^~~~~~~~~~
src/codestory_mcp/adapters/graph_service.py:175: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/adapters/graph_service.py:234: error: Returning Any from
function declared to return "None"  [no-any-return]
                return self.properties[key]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/adapters/graph_service.py:289: error: Returning Any from
function declared to return "None"  [no-any-return]
                return self.properties[key]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:145: error: Returning Any from
function declared to return "list[str]"  [no-any-return]
                return self.entity_cache[cache_key]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/manager.py:54: error: Returning Any from
function declared to return "type[PipelineStep] | None"  [no-any-return]
                return self.steps[step_name]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/manager.py:137: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
            return job_info
            ^~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/manager.py:159: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
            return job_info
            ^~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/manager.py:185: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
            return job_info
            ^~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:91: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return health_data
                    ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:100: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return health_data
                    ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:206: error: Incompatible types in
assignment (expression has type "list[str]", target has type "str") 
[assignment]
                data['dependencies'] = list(dependencies)
                                       ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:215: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return self._handle_error_package(data)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:252: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return self._handle_error_package(data)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:270: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return self._handle_error_package(data)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:289: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                        return data['items']
                        ^~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:291: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                        return data['jobs']
                        ^~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:322: error: Incompatible types in
assignment (expression has type "dict[str, Any]", target has type "str") 
[assignment]
                data['parameters'] = parameters
                                     ^~~~~~~~~~
src/codestory/cli/client/service_client.py:336: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:354: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:374: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:391: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:405: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:419: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:444: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return health_data
                ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:495: error: Returning Any from
function declared to return "str"  [no-any-return]
                        return response.text
                        ^~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:538: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return response.json()
                    ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:542: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return response.json()
                    ^~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/step.py:153: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
            return result
            ^~~~~~~~~~~~~
src/codestory_summarizer/step.py:173: error: Returning Any from function
declared to return "str"  [no-any-return]
            return self.run(repository_path, **config)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/step.py:175: error: Untyped decorator makes function
"run_summarizer" untyped  [misc]
    @shared_task(bind=True, name='codestory_summarizer.step.run_summarizer...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/use_real_adapters.py:110: error: Incompatible types in
assignment (expression has type
"Callable[[], Coroutine[Any, Any, OpenAIAdapter]]", variable has type
"Callable[[], OpenAIAdapter]")  [assignment]
        openai_adapter.get_openai_adapter = get_real_openai_adapter  # TOD...
                                            ^~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:34: error: Missing
return statement  [return]
        async def _init_redis(self: Any) -> None:
        ^
src/codestory_service/application/ingestion_service.py:40: error: Incompatible
types in assignment (expression has type "Redis", variable has type "None") 
[assignment]
                self.redis = redis.Redis(host=redis_host, port=redis_port,...
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/ingestion_service.py:41: error: "None" has no
attribute "ping"  [attr-defined]
                await self.redis.ping()[attr - defined]
                      ^~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:41: error: Name "attr"
is not defined  [name-defined]
                await self.redis.ping()[attr - defined]
                                        ^
src/codestory_service/application/ingestion_service.py:41: error: Name
"defined" is not defined  [name-defined]
                await self.redis.ping()[attr - defined]
                                               ^
src/codestory_service/application/ingestion_service.py:140: error: Argument
"timestamp" to "JobProgressEvent" has incompatible type "Any | None"; expected
"float"  [arg-type]
    ...on', cpu_percent=None, memory_mb=None, timestamp=ingestion_started.eta...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/ingestion_service.py:142: error: Returning
Any from function declared to return "IngestionStarted"  [no-any-return]
                    return ingestion_started
                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:166: error: Returning
Any from function declared to return "IngestionJob"  [no-any-return]
                return job
                ^~~~~~~~~~
src/codestory_service/application/ingestion_service.py:189: error: Argument
"timestamp" to "JobProgressEvent" has incompatible type "Any | None"; expected
"float"  [arg-type]
    ...er', cpu_percent=None, memory_mb=None, timestamp=job.updated_at if job...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/ingestion_service.py:191: error: Returning
Any from function declared to return "IngestionJob"  [no-any-return]
                return job
                ^~~~~~~~~~
src/codestory_service/application/ingestion_service.py:223: error: Item
"list[JobStatus]" of "list[JobStatus] | None" has no attribute
"HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                raise HTTPException(status_code=status.HTTP_500_INTERNAL_S...
                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/ingestion_service.py:223: error: Item "None"
of "list[JobStatus] | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                raise HTTPException(status_code=status.HTTP_500_INTERNAL_S...
                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/ingestion_service.py:259: error: Function is
missing a return type annotation  [no-untyped-def]
            def summary_stats(values: Any):
            ^
src/codestory_service/api/health.py:63: error: Incompatible types in assignment
(expression has type "list[str]", variable has type "dict[str, Any] | None") 
[assignment]
                health_report.error_package = error_package
                                              ^~~~~~~~~~~~~
src/codestory_service/api/health.py:89: error: Missing named argument
"error_package" for "HealthReport"  [call-arg]
            return HealthReport(status='degraded', timestamp=time.strftime...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:92: error: Missing named argument
"error_package" for "HealthReport"  [call-arg]
            return HealthReport(status='unhealthy', timestamp=time.strftim...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:180: error: Incompatible types in
assignment (expression has type "dict[str, object]", target has type "str") 
[assignment]
            response['auth_details'] = {'tenant_id': tenant_id, 'scope': '...
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:191: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
                    response['token_injection'] = {'status': 'failed', 'me...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:216: error: Incompatible types in
assignment (expression has type "dict[str, str | None]", target has type "str") 
[assignment]
    ...                   response['token_injection'] = {'status': 'success',...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:218: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
    ...                   response['token_injection'] = {'status': 'failed', ...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:224: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
    ...                   response['token_injection'] = {'status': 'timeout',...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:227: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
    ...                   response['token_injection'] = {'status': 'error', '...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:230: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
                response['token_injection'] = {'status': 'error', 'message...
                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:247: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        async def check_component_health(component_name, check_func, timeo...
        ^
src/codestory_service/api/health.py:250: error: Returning Any from function
declared to return "None"  [no-any-return]
                return result
                ^~~~~~~~~~~~~
src/codestory_service/api/health.py:253: error: No return value expected 
[return-value]
                return {'status': 'unhealthy', 'details': {'error': f'Heal...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:256: error: No return value expected 
[return-value]
                return {'status': 'unhealthy', 'details': {'error': str(e)...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:271: error: No return value expected 
[return-value]
                return {'status': 'healthy', 'details': {'connection': f'r...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:276: error: No return value expected 
[return-value]
                return {'status': 'unhealthy', 'details': {'error': str(e)...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:278: error: Function does not return a
value (it only ever returns None)  [func-returns-value]
            redis_health = await asyncio.wait_for(check_redis_health(), ti...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:286: error: Argument after ** must be a
mapping, not "None"  [arg-type]
        components = {'neo4j': ComponentHealth(**neo4j_health), 'celery': ...
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/api/health.py:286: error: Argument after ** must be a
mapping, not "dict[str, Collection[str]] | None"  [arg-type]
    ...nai': ComponentHealth(**openai_health), 'redis': ComponentHealth(**red...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/health.py:298: error: Missing named argument
"error_package" for "HealthReport"  [call-arg]
        return HealthReport(status=overall_status_literal, timestamp=time....
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/auth.py:92: error: Returning Any from function
declared to return "UserInfo"  [no-any-return]
            return UserInfo(id="anonymous", name="Anonymous User", roles=[...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/auth.py:92: error: Missing named argument "email" for
"UserInfo"  [call-arg]
            return UserInfo(id="anonymous", name="Anonymous User", roles=[...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/auth.py:92: error: Value of type "UserInfo" is not
indexable  [index]
            return UserInfo(id="anonymous", name="Anonymous User", roles=[...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/auth.py:92: error: Name "call" is not defined 
[name-defined]
    ...s", name="Anonymous User", roles=[], is_authenticated=False)[call-arg]
                                                                    ^
src/codestory_service/api/auth.py:92: error: Name "arg" is not defined 
[name-defined]
    ...s", name="Anonymous User", roles=[], is_authenticated=False)[call-arg]
                                                                         ^
src/codestory_mcp/tools/search_graph.py:47: error: Incompatible types in
assignment (expression has type "dict[str, Any]", target has type
"list[dict[str, Any]]")  [assignment]
                response['metadata'] = {'query': query, 'node_types': node...
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_mcp/tools/path_to.py:62: error: Incompatible types in assignment
(expression has type "dict[str, Any]", target has type "list[dict[str, Any]]") 
[assignment]
                response['metadata'] = {'from_id': from_id, 'to_id': to_id...
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_mcp/server.py:48: error: Argument 1 to "EntraValidator" has
incompatible type "str | None"; expected "str"  [arg-type]
            validator = EntraValidator(settings.azure_tenant_id, settings....
                                       ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/server.py:48: error: Argument 2 to "EntraValidator" has
incompatible type "str | None"; expected "str"  [arg-type]
    ...dator = EntraValidator(settings.azure_tenant_id, settings.api_audience...
                                                        ^~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/server.py:96: error: Argument 1 to "asynccontextmanager" has
incompatible type "Callable[[FastAPI], None]"; expected
"Callable[[FastAPI], AsyncIterator[Never]]"  [arg-type]
    @asynccontextmanager
     ^
src/codestory_mcp/server.py:97: error: The return type of an async generator
function should be "AsyncGenerator" or one of its supertypes  [misc]
    async def lifespan(app: FastAPI) -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/server.py:123: error: Missing return statement  [empty-body]
        async def execute_tool(tool_name: str, params: dict[str, Any], use...
        ^
src/codestory_mcp/main.py:53: error: Argument "foreign_pre_chain" to
"ProcessorFormatter" has incompatible type "list[object]"; expected
"Sequence[Callable[[Any, str, MutableMapping[str, Any]], Mapping[str, Any] | str | bytes | bytearray | tuple[Any, ...]]] | None"
 [arg-type]
            foreign_pre_chain=pre_chain,
                              ^~~~~~~~~
src/codestory_docgrapher/step.py:147: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
            return result
            ^~~~~~~~~~~~~
src/codestory_docgrapher/step.py:164: error: Returning Any from function
declared to return "str"  [no-any-return]
            return self.run(repository_path, **config)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/step.py:166: error: Untyped decorator makes function
"run_docgrapher" untyped  [misc]
    @shared_task(bind=True, name='codestory_docgrapher.step.run_docgrapher...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/service.py:16: error: Name "click" already defined
(by an import)  [no-redef]
        import click
        ^
src/codestory/cli/commands/service.py:627: error: Incompatible types in
assignment (expression has type "CompletedProcess[str]", variable has type
"CompletedProcess[bytes]")  [assignment]
                    process = subprocess.run(  # TODO: Fix type compatibil...
                              ^
src/codestory/cli/commands/service.py:642: error: Argument 1 to "split" of
"bytes" has incompatible type "str"; expected "Buffer | None"  [arg-type]
    ...         c for c in process.stdout.strip().split("\n") if c and c in c...
                                                        ^~~~
src/codestory/cli/commands/service.py:835: error: Incompatible types in
assignment (expression has type "CompletedProcess[str]", variable has type
"CompletedProcess[bytes]")  [assignment]
                    process = subprocess.run(  # TODO: Fix type compatibil...
                              ^
src/codestory/cli/commands/service.py:853: error: Argument 1 to "split" of
"bytes" has incompatible type "str"; expected "Buffer | None"  [arg-type]
    ...                 error_lines = process.stderr.strip().split("\n")[-5:]
                                                                   ^~~~
src/codestory/cli/commands/service.py:856: error: If x = b'abc' then f"{x}" or
"{}".format(x) produces "b'abc'", not "abc". If this is desired behavior, use
f"{x!r}" or "{!r}".format(x). Otherwise, decode the bytes  [str-bytes-safe]
                                console.print(f"  {line}")
                                                  ^~~~~~
src/codestory/cli/commands/service.py:993: error: Incompatible types in
assignment (expression has type "CompletedProcess[str]", variable has type
"CompletedProcess[bytes]")  [assignment]
                    process = subprocess.run(  # TODO: Fix type compatibil...
                              ^
src/codestory/cli/commands/service.py:1010: error: Argument 1 to "split" of
"bytes" has incompatible type "str"; expected "Buffer | None"  [arg-type]
    ...                 error_lines = process.stderr.strip().split("\n")[-5:]
                                                                   ^~~~
src/codestory/cli/commands/service.py:1013: error: If x = b'abc' then f"{x}" or
"{}".format(x) produces "b'abc'", not "abc". If this is desired behavior, use
f"{x!r}" or "{!r}".format(x). Otherwise, decode the bytes  [str-bytes-safe]
                                console.print(f"  {line}")
                                                  ^~~~~~
src/codestory/cli/commands/ingest.py:26: error: No return value expected 
[return-value]
            return result.stdout if capture_output else None
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:38: error: No return value expected 
[return-value]
            return 'codestory-service' in result.stdout
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:40: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:69: error: No return value expected 
[return-value]
                            return True
                            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:73: error: No return value expected 
[return-value]
                    return True
                    ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:88: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:92: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:106: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:110: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:122: error: No return value expected 
[return-value]
        return True
        ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:137: error: No return value expected 
[return-value]
                    return True
                    ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:147: error: No return value expected 
[return-value]
        return False
        ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:155: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:158: error: "is_docker_running" does not
return a value (it only ever returns None)  [func-returns-value]
        if not is_docker_running():
               ^~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:164: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:165: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
        if not force_remount and is_repo_mounted(repo_path, console):
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:168: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:177: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
        verification = is_repo_mounted(repo_path, console)
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:185: error: No return value expected 
[return-value]
        return True
        ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:239: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
            is_mounted = is_repo_mounted(local_path)
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:256: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
            elif not is_repo_mounted(local_path, console):
                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:302: error: Statement is unreachable 
[unreachable]
                    console.print(f"[yellow]Warning: --eta value '{eta}' i...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/cli/commands/ingest.py:430: error: "is_docker_running" does not
return a value (it only ever returns None)  [func-returns-value]
            is_docker = is_docker_running()
                        ^~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:438: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
        if not force_remount and is_repo_mounted(local_path, console):
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:441: error: "setup_repository_mount" does
not return a value (it only ever returns None)  [func-returns-value]
        if setup_repository_mount(local_path, console, force_remount):
           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:486: error: No return value expected 
[return-value]
                return False
                ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:487: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
src/codestory/cli/main.py:6: error: Skipping analyzing "click_didyoumean":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from click_didyoumean import DYMGroup
    ^
src/codestory/cli/main.py:6: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
src/codestory/cli/main.py:35: error: Returning Any from function declared to
return "None"  [no-any-return]
                return super().__call__(*args, **kwargs)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:116: error: Returning Any from function declared to
return "None"  [no-any-return]
                return original_main(*args, **kwargs)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:175: error: Cannot assign to a method 
[method-assign]
            click.exceptions.UsageError.show = custom_error_callback
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:185: error: Cannot assign to a method 
[method-assign]
            click.exceptions.UsageError.show = original_error_callback
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Found 383 errors in 51 files (checked 127 source files)
