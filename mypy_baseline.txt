tests/unit/test_llm/test_llm_models.py:3: error: Skipping analyzing
"codestory.llm.models": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.models import (
    ^
tests/unit/test_llm/test_llm_models.py:21: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_chat_role_enum():
    ^
tests/unit/test_llm/test_llm_models.py:21: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:30: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_chat_message():
    ^
tests/unit/test_llm/test_llm_models.py:30: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:51: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_chat_function_call():
    ^
tests/unit/test_llm/test_llm_models.py:51: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:60: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_chat_response_message():
    ^
tests/unit/test_llm/test_llm_models.py:60: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:76: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_chat_response_choice():
    ^
tests/unit/test_llm/test_llm_models.py:76: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:85: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_completion_choice():
    ^
tests/unit/test_llm/test_llm_models.py:85: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:94: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_embedding_data():
    ^
tests/unit/test_llm/test_llm_models.py:94: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:102: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_usage_info():
    ^
tests/unit/test_llm/test_llm_models.py:102: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:110: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_completion_request():
    ^
tests/unit/test_llm/test_llm_models.py:110: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:136: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_chat_completion_request():
    ^
tests/unit/test_llm/test_llm_models.py:136: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:165: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_embedding_request():
    ^
tests/unit/test_llm/test_llm_models.py:165: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:185: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_completion_response():
    ^
tests/unit/test_llm/test_llm_models.py:185: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:206: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_chat_completion_response():
    ^
tests/unit/test_llm/test_llm_models.py:206: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_models.py:228: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_llm_embedding_response():
    ^
tests/unit/test_llm/test_llm_models.py:228: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_exceptions.py:3: error: Skipping analyzing
"codestory.llm.exceptions": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.exceptions import (
    ^
tests/unit/test_llm/test_llm_exceptions.py:14: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_llm_openai_error_base():
    ^
tests/unit/test_llm/test_llm_exceptions.py:14: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_exceptions.py:36: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_llm_authentication_error():
    ^
tests/unit/test_llm/test_llm_exceptions.py:36: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_exceptions.py:43: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_llm_rate_limit_error():
    ^
tests/unit/test_llm/test_llm_exceptions.py:43: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_exceptions.py:55: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_llm_invalid_request_error():
    ^
tests/unit/test_llm/test_llm_exceptions.py:55: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_exceptions.py:62: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_llm_service_unavailable_error():
    ^
tests/unit/test_llm/test_llm_exceptions.py:62: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_exceptions.py:69: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_llm_timeout_error():
    ^
tests/unit/test_llm/test_llm_exceptions.py:69: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_llm_exceptions.py:76: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_llm_context_length_error():
    ^
tests/unit/test_llm/test_llm_exceptions.py:76: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_exceptions.py:3: error: Skipping analyzing
"codestory.graphdb.exceptions": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.graphdb.exceptions import (
    ^
tests/unit/test_graphdb/test_exceptions.py:12: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_neo4j_error():
    ^
tests/unit/test_graphdb/test_exceptions.py:12: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_exceptions.py:27: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_connection_error():
    ^
tests/unit/test_graphdb/test_exceptions.py:27: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_exceptions.py:52: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_query_error():
    ^
tests/unit/test_graphdb/test_exceptions.py:52: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_exceptions.py:88: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_schema_error():
    ^
tests/unit/test_graphdb/test_exceptions.py:88: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_exceptions.py:112: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_transaction_error():
    ^
tests/unit/test_graphdb/test_exceptions.py:112: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_output_formatting.py:6: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_cli_version_command_no_debug_output():
    ^
tests/unit/test_cli/test_output_formatting.py:6: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_output_formatting.py:27: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_cli_help_command_no_debug_output():
    ^
tests/unit/test_cli/test_output_formatting.py:27: note: Use "-> None" if function does not return a value
tests/integration/test_config.py:9: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import (
    ^
tests/fixtures/test_config_init.py:57: error: Function is missing a return type
annotation  [no-untyped-def]
    def create_test_config_file():
    ^
src/codestory_mcp/auth/scope_manager.py:6: error: Skipping analyzing
"codestory_mcp.utils.config": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.config import get_mcp_settings
    ^
src/codestory/ingestion_pipeline/worker.py:3: error: Skipping analyzing
"celery": module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from celery import Celery
    ^
src/codestory/ingestion_pipeline/worker.py:5: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
src/codestory/cli/run.py:13: error: Skipping analyzing "codestory.cli.main":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from codestory.cli.main import main
    ^
tests/unit/test_graphdb/test_models.py:5: error: Skipping analyzing
"codestory.graphdb.models": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.graphdb.models import (
    ^
tests/unit/test_graphdb/test_models.py:27: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_node_type_enum():
    ^
tests/unit/test_graphdb/test_models.py:27: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:39: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_relationship_type_enum():
    ^
tests/unit/test_graphdb/test_models.py:39: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:49: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_base_node():
    ^
tests/unit/test_graphdb/test_models.py:49: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:82: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_base_relationship():
    ^
tests/unit/test_graphdb/test_models.py:82: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:121: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_file_node():
    ^
tests/unit/test_graphdb/test_models.py:121: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:154: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_directory_node():
    ^
tests/unit/test_graphdb/test_models.py:154: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:166: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_class_node():
    ^
tests/unit/test_graphdb/test_models.py:166: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:197: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_function_node():
    ^
tests/unit/test_graphdb/test_models.py:197: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:225: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_method_node():
    ^
tests/unit/test_graphdb/test_models.py:225: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:238: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_module_node():
    ^
tests/unit/test_graphdb/test_models.py:238: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:256: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_summary_node():
    ^
tests/unit/test_graphdb/test_models.py:256: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:277: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_documentation_node():
    ^
tests/unit/test_graphdb/test_models.py:277: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:298: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_contains_relationship():
    ^
tests/unit/test_graphdb/test_models.py:298: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:310: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_imports_relationship():
    ^
tests/unit/test_graphdb/test_models.py:310: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:320: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_calls_relationship():
    ^
tests/unit/test_graphdb/test_models.py:320: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:339: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_inherits_from_relationship():
    ^
tests/unit/test_graphdb/test_models.py:339: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:349: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_documented_by_relationship():
    ^
tests/unit/test_graphdb/test_models.py:349: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_models.py:359: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_summarized_by_relationship():
    ^
tests/unit/test_graphdb/test_models.py:359: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:6: error:
Skipping analyzing "codestory.graphdb.neo4j_connector": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:7: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import PipelineStep, StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:16: error:
Need type annotation for "steps_status" (hint:
"steps_status: dict[<type>, <type>] = ...")  [var-annotated]
            self.steps_status = {}
            ^~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:17: error:
Need type annotation for "steps_results" (hint:
"steps_results: dict[<type>, <type>] = ...")  [var-annotated]
            self.steps_results = {}
            ^~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:18: error:
Need type annotation for "steps_errors" (hint:
"steps_errors: dict[<type>, <type>] = ...")  [var-annotated]
            self.steps_errors = {}
            ^~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:19: error:
Need type annotation for "dependency_graph" (hint:
"dependency_graph: dict[<type>, <type>] = ...")  [var-annotated]
            self.dependency_graph = {}
            ^~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:20: error:
Need type annotation for "_step_instances" (hint:
"_step_instances: dict[<type>, <type>] = ...")  [var-annotated]
            self._step_instances = {}
            ^~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:53: error:
Right operand of "and" is never evaluated  [unreachable]
                if self._thread and self._thread.is_alive():
                                    ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:63: error:
Incompatible types in assignment (expression has type "Thread", variable has
type "None")  [assignment]
                self._thread = threading.Thread(target=self._run_pipeline)
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:64: error:
"None" has no attribute "daemon"  [attr-defined]
                self._thread.daemon = True
                ^~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:65: error:
"None" has no attribute "start"  [attr-defined]
                self._thread.start()
                ^~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:176: error:
Returning Any from function declared to return "str"  [no-any-return]
            return step.__class__.__name__
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:258: error:
Right operand of "and" is never evaluated  [unreachable]
            if self._thread and self._thread.is_alive():
                                ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:259: error:
Statement is unreachable  [unreachable]
                self._thread.join(timeout=5.0)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:13: error: Skipping analyzing "celery": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
    from celery import shared_task
    ^
src/codestory_filesystem/step.py:15: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
src/codestory_filesystem/step.py:16: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_filesystem/step.py:17: error: Skipping analyzing
"codestory.ingestion_pipeline.step": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import PipelineStep, StepStatus...
    ^
src/codestory_filesystem/step.py:146: error: Skipping analyzing
"codestory.ingestion_pipeline.celery_app": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
                from codestory.ingestion_pipeline.celery_app import app as...
    ^
src/codestory_filesystem/step.py:178: error: Skipping analyzing
"celery.result": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
                from celery.result import AsyncResult
    ^
src/codestory_docgrapher/utils/path_matcher.py:12: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/unit/test_cli/test_main.py:9: error: Skipping analyzing
"codestory.cli.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.cli.client import ServiceError
    ^
tests/unit/test_cli/test_main.py:10: error: Skipping analyzing
"codestory.cli.main": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.cli.main import app, main
    ^
tests/unit/test_cli/test_main.py:14: error: Function is missing a return type
annotation  [no-untyped-def]
    def custom_error_handler():
    ^
tests/unit/test_cli/test_main.py:21: error: Cannot assign to a method 
[method-assign]
            click.Context.fail = MagicMock()
            ^~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_main.py:26: error: Cannot assign to a method 
[method-assign]
            click.Context.fail = original_error_callback
            ^~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_main.py:181: error: Statement is unreachable 
[unreachable]
                click.Context.fail.assert_called_once_with(mock_ctx, "Some...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_cli/test_main.py:184: error: Statement is unreachable 
[unreachable]
            assert click.Context.fail == original_fail
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_commands/test_visualize.py:9: error: Skipping
analyzing "codestory.cli.main": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/unit/test_cli/test_commands/test_visualize.py:202: error: Function is
missing a type annotation  [no-untyped-def]
            def side_effect(*args, **kwargs):
            ^
tests/unit/test_cli/test_commands/test_query.py:10: error: Skipping analyzing
"codestory.cli.main": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/unit/test_cli/test_commands/test_query.py:284: error: Function is missing
a type annotation  [no-untyped-def]
            def mock_execute_query(query, params=None):
            ^
tests/unit/test_cli/test_commands/test_ingest.py:9: error: Skipping analyzing
"codestory.cli.commands": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.cli.commands import ingest
    ^
tests/unit/test_cli/test_commands/test_ingest.py:10: error: Skipping analyzing
"codestory.cli.main": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/integration/test_cli/test_visualize_integration.py:9: error: Skipping
analyzing "codestory.cli.main": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.main import app
    ^
src/codestory_blarify/step.py:14: error: Skipping analyzing "celery": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from celery import current_app, shared_task
    ^
src/codestory_blarify/step.py:15: error: Skipping analyzing
"celery.app.control": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from celery.app.control import Control
    ^
src/codestory_blarify/step.py:16: error: Skipping analyzing "celery.result":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from celery.result import AsyncResult
    ^
src/codestory_blarify/step.py:19: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
src/codestory_blarify/step.py:20: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_blarify/step.py:21: error: Skipping analyzing
"codestory.ingestion_pipeline.step": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import PipelineStep, StepStatus
    ^
tests/unit/test_codestory_service/test_settings.py:9: error: Skipping analyzing
"codestory_service.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_service.settings import ServiceSettings, get_service_se...
    ^
tests/unit/test_codestory_service/test_settings.py:12: error: Function is
missing a return type annotation  [no-untyped-def]
    def test_service_settings_default_values():
    ^
tests/unit/test_codestory_service/test_settings.py:12: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_settings.py:26: error: Function is
missing a return type annotation  [no-untyped-def]
    def test_service_settings_from_env():
    ^
tests/unit/test_codestory_service/test_settings.py:26: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_settings.py:49: error: Function is
missing a return type annotation  [no-untyped-def]
    def test_service_settings_cors_origins_parsing():
    ^
tests/unit/test_codestory_service/test_settings.py:49: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_settings.py:80: error: Function is
missing a return type annotation  [no-untyped-def]
    def test_service_settings_cors_origins_validation():
    ^
tests/unit/test_codestory_service/test_settings.py:80: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_settings.py:102: error: Function is
missing a return type annotation  [no-untyped-def]
    def test_get_service_settings():
    ^
tests/unit/test_codestory_service/test_settings.py:102: note: Use "-> None" if function does not return a value
src/codestory_mcp/main.py:11: error: Skipping analyzing "codestory_mcp.server":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from codestory_mcp.server import run_server
    ^
src/codestory_mcp/main.py:14: error: Skipping analyzing
"codestory_mcp.utils.config": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.config import get_mcp_settings
    ^
tests/unit/test_config_writer.py:11: error: Skipping analyzing
"codestory.config": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.config import (
    ^
tests/unit/test_config_writer.py:16: error: Skipping analyzing
"codestory.config.exceptions": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.exceptions import SettingNotFoundError
    ^
tests/unit/test_config_writer.py:20: error: Function is missing a return type
annotation  [no-untyped-def]
    def temp_env_file():
    ^
tests/unit/test_config_writer.py:37: error: Function is missing a return type
annotation  [no-untyped-def]
    def temp_toml_file():
    ^
tests/unit/test_config_writer.py:55: error: Function is missing a type
annotation  [no-untyped-def]
    def test_update_env(temp_env_file):
    ^
tests/unit/test_config_writer.py:77: error: Function is missing a type
annotation  [no-untyped-def]
    def test_update_toml(temp_toml_file):
    ^
tests/unit/test_config_writer.py:121: error: Function is missing a return type
annotation  [no-untyped-def]
    def test_update_config_invalid_path():
    ^
tests/unit/test_config_writer.py:141: error: Function is missing a type
annotation  [no-untyped-def]
        def mock_hasattr(obj, name):
        ^
tests/unit/test_config_writer.py:180: error: Function is missing a return type
annotation  [no-untyped-def]
    def test_update_config_persist_env():
    ^
tests/unit/test_config_writer.py:180: note: Use "-> None" if function does not return a value
tests/unit/test_config_writer.py:215: error: Function is missing a return type
annotation  [no-untyped-def]
    def test_update_config_persist_toml():
    ^
tests/unit/test_config_writer.py:215: note: Use "-> None" if function does not return a value
tests/unit/test_config_writer.py:250: error: Function is missing a return type
annotation  [no-untyped-def]
    def test_update_config_refresh():
    ^
tests/unit/test_config_writer.py:250: note: Use "-> None" if function does not return a value
tests/unit/test_config_writer.py:258: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
        from codestory.config.settings import get_settings
    ^
tests/unit/test_llm/test_metrics.py:8: error: Skipping analyzing
"codestory.llm.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.metrics import OperationType
    ^
tests/unit/test_llm/test_metrics.py:13: error: Function is missing a return
type annotation  [no-untyped-def]
    def mock_all_metrics_objects():
    ^
tests/unit/test_llm/test_metrics.py:63: error: Function is missing a type
annotation  [no-untyped-def]
        def test_record_request(self, mock_all_metrics_objects):
        ^
tests/unit/test_llm/test_metrics.py:94: error: Function is missing a type
annotation  [no-untyped-def]
        def test_record_request_with_tokens(self, mock_all_metrics_objects...
        ^
tests/unit/test_llm/test_metrics.py:147: error: Function is missing a type
annotation  [no-untyped-def]
        def test_record_error(self, mock_all_metrics_objects):
        ^
tests/unit/test_llm/test_metrics.py:171: error: Function is missing a type
annotation  [no-untyped-def]
        def test_record_retry(self, mock_all_metrics_objects):
        ^
tests/unit/test_llm/test_metrics.py:191: error: Function is missing a type
annotation  [no-untyped-def]
        def test_instrument_request_success(self, mock_all_metrics_objects...
        ^
tests/unit/test_llm/test_metrics.py:236: error: Function is missing a type
annotation  [no-untyped-def]
        def test_instrument_request_error(self, mock_all_metrics_objects):
        ^
tests/unit/test_llm/test_metrics.py:290: error: Function is missing a type
annotation  [no-untyped-def]
        async def test_instrument_async_request_success(self, mock_all_met...
        ^
tests/unit/test_llm/test_metrics.py:299: error: Function is missing a type
annotation  [no-untyped-def]
            async def mock_coro(*args, **kwargs):
            ^
tests/unit/test_llm/test_metrics.py:341: error: Function is missing a type
annotation  [no-untyped-def]
        async def test_instrument_async_request_error(self, mock_all_metri...
        ^
tests/unit/test_llm/test_metrics.py:350: error: Function is missing a type
annotation  [no-untyped-def]
            async def mock_coro(*args, **kwargs):
            ^
tests/unit/test_ingestion_pipeline/test_manager.py:12: error: Skipping
analyzing "codestory.ingestion_pipeline.manager": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.manager import PipelineManager
    ^
tests/unit/test_ingestion_pipeline/test_manager.py:13: error: Skipping
analyzing "codestory.ingestion_pipeline.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import PipelineStep, StepStatus
    ^
tests/unit/test_ingestion_pipeline/test_manager.py:25: error: Function is
missing a return type annotation  [no-untyped-def]
    def mock_prometheus_metrics():
    ^
tests/unit/test_ingestion_pipeline/test_manager.py:45: error: Function is
missing a return type annotation  [no-untyped-def]
        def config_file(self):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:68: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_step_class(self):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:78: error: Function is
missing a type annotation  [no-untyped-def]
        def test_init(self, config_file):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:91: error: Function is
missing a type annotation  [no-untyped-def]
        def test_get_step_class_found(self, config_file, mock_step_class):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:112: error: Function is
missing a type annotation  [no-untyped-def]
        def test_get_step_class_not_found(self, config_file):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:126: error: Function is
missing a type annotation  [no-untyped-def]
        def test_prepare_step_configs(self, config_file):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:138: error: Function is
missing a type annotation  [no-untyped-def]
        def test_validate_steps_all_found(self, config_file, mock_step_cla...
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:151: error: Function is
missing a type annotation  [no-untyped-def]
        def test_validate_steps_missing(self, config_file, mock_step_class...
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:175: error: Function is
missing a type annotation  [no-untyped-def]
        def test_start_job(self, config_file, mock_step_class):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:213: error: Function is
missing a type annotation  [no-untyped-def]
        def test_status(self, config_file, mock_step_class):
        ^
tests/unit/test_ingestion_pipeline/test_manager.py:253: error: Function is
missing a type annotation  [no-untyped-def]
        def test_stop(self, config_file, mock_step_class):
        ^
tests/unit/test_graphdb/test_schema.py:7: error: Skipping analyzing
"codestory.graphdb.exceptions": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.graphdb.exceptions import SchemaError
    ^
tests/unit/test_graphdb/test_schema.py:8: error: Skipping analyzing
"codestory.graphdb.schema": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.graphdb.schema import (
    ^
tests/unit/test_graphdb/test_schema.py:20: error: Function is missing a return
type annotation  [no-untyped-def]
    def mock_prometheus_metrics():
    ^
tests/unit/test_graphdb/test_schema.py:39: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_get_vector_index_query():
    ^
tests/unit/test_graphdb/test_schema.py:39: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_schema.py:58: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_get_all_schema_elements():
    ^
tests/unit/test_graphdb/test_schema.py:58: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_schema.py:90: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_get_schema_initialization_queries():
    ^
tests/unit/test_graphdb/test_schema.py:90: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_schema.py:104: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_create_custom_vector_index():
    ^
tests/unit/test_graphdb/test_schema.py:104: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_schema.py:134: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_initialize_schema():
    ^
tests/unit/test_graphdb/test_schema.py:134: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_schema.py:167: error: Function is missing a return
type annotation  [no-untyped-def]
    def test_verify_schema():
    ^
tests/unit/test_graphdb/test_schema.py:167: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_export.py:11: error: Skipping analyzing
"codestory.graphdb.exceptions": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.graphdb.exceptions import ExportError
    ^
tests/unit/test_graphdb/test_export.py:12: error: Skipping analyzing
"codestory.graphdb.export": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.graphdb.export import (
    ^
tests/unit/test_graphdb/test_export.py:18: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/unit/test_graphdb/test_export.py:22: error: Function is missing a return
type annotation  [no-untyped-def]
    def mock_connector():
    ^
tests/unit/test_graphdb/test_export.py:35: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_to_json(mock_connector):
    ^
tests/unit/test_graphdb/test_export.py:66: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_to_csv(mock_connector):
    ^
tests/unit/test_graphdb/test_export.py:99: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_to_csv_no_headers(mock_connector):
    ^
tests/unit/test_graphdb/test_export.py:121: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_to_json_error(mock_connector):
    ^
tests/unit/test_graphdb/test_export.py:141: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_graph_data(mock_connector):
    ^
tests/unit/test_graphdb/test_export.py:153: error: Function is missing a type
annotation  [no-untyped-def]
            def mock_execute(*args, **kwargs):
            ^
tests/unit/test_graphdb/test_export.py:188: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_cypher_script(mock_connector):
    ^
tests/unit/test_graphdb/test_export.py:215: error: Function is missing a type
annotation  [no-untyped-def]
        def mock_execute(query, *args, **kwargs):
        ^
tests/unit/test_config/test_settings_imports.py:6: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_settings_import():
    ^
tests/unit/test_config/test_settings_imports.py:6: note: Use "-> None" if function does not return a value
tests/unit/test_config/test_settings_imports.py:10: error: Skipping analyzing
"codestory.ingestion_pipeline.celery_app": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
            from codestory.ingestion_pipeline.celery_app import settings
    ^
tests/unit/test_config/test_settings_imports.py:18: error: Function is missing
a return type annotation  [no-untyped-def]
    def test_settings_instance():
    ^
tests/unit/test_config/test_settings_imports.py:18: note: Use "-> None" if function does not return a value
tests/unit/test_config/test_settings_imports.py:20: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
        from codestory.config.settings import Settings
    ^
tests/unit/test_config/test_settings_imports.py:40: error: Function is missing
a return type annotation  [no-untyped-def]
    def test_get_settings():
    ^
tests/unit/test_config/test_settings_imports.py:40: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_serializers.py:7: error: Skipping analyzing
"codestory_mcp.utils.serializers": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.utils.serializers import NodeSerializer, Relationsh...
    ^
tests/unit/test_codestory_mcp/test_serializers.py:14: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_node(self):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:28: error: Function is
missing a type annotation  [no-untyped-def]
            def getitem(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:35: error: Function is
missing a type annotation  [no-untyped-def]
            def contains(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:45: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_dict_basic(self, mock_node):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:58: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_dict_with_score(self, mock_node):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:64: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_dict_with_include_properties(self, mock_node):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:72: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_dict_with_exclude_properties(self, mock_node):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:81: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_mcp_result_with_nodes(self, mock_node):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:88: error: Function is
missing a type annotation  [no-untyped-def]
            def getitem(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:95: error: Function is
missing a type annotation  [no-untyped-def]
            def contains(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:110: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_mcp_result_with_scored_nodes(self, mock_node):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:117: error: Function is
missing a type annotation  [no-untyped-def]
            def getitem(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:124: error: Function is
missing a type annotation  [no-untyped-def]
            def contains(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:146: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_node(self):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:157: error: Function is
missing a type annotation  [no-untyped-def]
            def getitem(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:164: error: Function is
missing a type annotation  [no-untyped-def]
            def contains(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:175: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_relationship(self):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:193: error: Function is
missing a type annotation  [no-untyped-def]
            def getitem(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:200: error: Function is
missing a type annotation  [no-untyped-def]
            def contains(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:210: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_dict_basic(self, mock_relationship):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:222: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_dict_with_include_properties(self, mock_relationship):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:230: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_dict_with_exclude_properties(self, mock_relationship):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:239: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_node2(self):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:246: error: Function is
missing a type annotation  [no-untyped-def]
            def getitem(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:253: error: Function is
missing a type annotation  [no-untyped-def]
            def contains(key):
            ^
tests/unit/test_codestory_mcp/test_serializers.py:264: error: Function is
missing a type annotation  [no-untyped-def]
        def mock_path(self, mock_node, mock_relationship, mock_node2):
        ^
tests/unit/test_codestory_mcp/test_serializers.py:268: error: Function is
missing a type annotation  [no-untyped-def]
        def test_to_mcp_path_result(self, mock_path):
        ^
tests/unit/test_codestory_mcp/test_config.py:8: error: Skipping analyzing
"codestory_mcp.utils.config": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.config import MCPSettings, get_mcp_settings
    ^
tests/unit/test_codestory_mcp/test_config.py:11: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_mcp_settings_defaults():
    ^
tests/unit/test_codestory_mcp/test_config.py:11: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_config.py:32: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_audience_validator():
    ^
tests/unit/test_codestory_mcp/test_config.py:32: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_config.py:82: error: Function is missing a
type annotation  [no-untyped-def]
    def test_settings_from_env(env_vars, expected):
    ^
tests/unit/test_codestory_mcp/test_config.py:91: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_get_mcp_settings_singleton():
    ^
tests/unit/test_codestory_mcp/test_config.py:91: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_auth.py:7: error: Skipping analyzing
"codestory_mcp.auth.entra_validator": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.auth.entra_validator import (
    ^
tests/unit/test_codestory_mcp/test_auth.py:12: error: Skipping analyzing
"codestory_mcp.auth.scope_manager": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.auth.scope_manager import ScopeManager
    ^
tests/unit/test_codestory_mcp/test_auth.py:18: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_get_required_scopes(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:18: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_auth.py:27: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_has_required_scope_when_no_scopes_required(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:27: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_auth.py:37: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_has_required_scope_with_wildcard(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:37: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_auth.py:46: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_has_required_scope_with_matching_scope(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:46: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_auth.py:57: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_has_required_scope_with_no_matching_scope(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:57: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_auth.py:67: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_can_execute_tool(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:67: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_auth.py:86: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_jwks_client(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:92: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_jwt(self):
        ^
tests/unit/test_codestory_mcp/test_auth.py:98: error: Function is missing a
type annotation  [no-untyped-def]
        def validator(self, mock_jwks_client):
        ^
tests/unit/test_codestory_mcp/test_auth.py:102: error: Function is missing a
type annotation  [no-untyped-def]
        def test_init(self, mock_jwks_client):
        ^
tests/unit/test_codestory_mcp/test_auth.py:113: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_validate_token_success(self, validator, mock_jwt):
        ^
tests/unit/test_codestory_mcp/test_auth.py:149: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_validate_token_jwt_error(self, validator, mock_jwt)...
        ^
tests/unit/test_codestory_mcp/test_auth.py:163: error: Function is missing a
type annotation  [no-untyped-def]
        def test_verify_scopes_success(self, validator):
        ^
tests/unit/test_codestory_mcp/test_auth.py:177: error: Function is missing a
type annotation  [no-untyped-def]
        def test_verify_scopes_failure(self, validator):
        ^
tests/unit/test_cli/conftest.py:11: error: Skipping analyzing
"codestory.cli.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.cli.client import ServiceClient
    ^
tests/unit/test_cli/test_commands/test_service.py:10: error: Skipping analyzing
"codestory.cli.client.service_client": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.cli.client.service_client import ServiceClient
    ^
tests/unit/test_cli/test_commands/test_service.py:11: error: Skipping analyzing
"codestory.cli.commands.service": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.commands.service import renew_azure_auth, service
    ^
tests/unit/test_cli/test_commands/test_service.py:18: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_client(self):
        ^
tests/unit/test_cli/test_commands/test_service.py:34: error: Function is
missing a return type annotation  [no-untyped-def]
        def cli_runner(self):
        ^
tests/unit/test_cli/test_commands/test_service.py:39: error: Function is
missing a type annotation  [no-untyped-def]
        def ctx_obj(self, mock_client):
        ^
tests/unit/test_cli/test_commands/test_service.py:44: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_auth_renew_command_exists(self):
        ^
tests/unit/test_cli/test_commands/test_service.py:44: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_commands/test_service.py:52: error: Function is
missing a type annotation  [no-untyped-def]
        def test_auth_renew_help(self, cli_runner):
        ^
tests/unit/test_cli/test_commands/test_service.py:67: error: Function is
missing a type annotation  [no-untyped-def]
        def test_auth_renew_inside_container(
        ^
tests/unit/test_cli/test_commands/test_service.py:97: error: Function is
missing a type annotation  [no-untyped-def]
        def test_auth_renew_specific_tenant(
        ^
tests/unit/test_cli/test_commands/test_service.py:129: error: Function is
missing a type annotation  [no-untyped-def]
        def test_auth_renew_check_only(
        ^
tests/unit/test_cli/test_commands/test_service.py:159: error: Function is
missing a type annotation  [no-untyped-def]
        def test_auth_renew_error_handling(
        ^
tests/unit/test_cli/test_commands/test_service.py:185: error: Function is
missing a type annotation  [no-untyped-def]
        def test_auth_renew_outside_container(
        ^
tests/unit/test_cli/test_commands/test_service.py:221: error: Function is
missing a type annotation  [no-untyped-def]
        def test_auth_renew_no_containers(
        ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:11: error:
Skipping analyzing "codestory.cli.client.service_client": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory.cli.client.service_client import ServiceClient
    ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:12: error:
Skipping analyzing "codestory.cli.commands": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.cli.commands import ingest
    ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:16: error:
Function is missing a return type annotation  [no-untyped-def]
    def mock_client():
    ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:24: error:
Function is missing a return type annotation  [no-untyped-def]
    def cli_context():
    ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:40: error:
Function is missing a return type annotation  [no-untyped-def]
        def test_is_repo_mounted(self):
        ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:40: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_commands/test_repository_mounting.py:78: error:
Function is missing a return type annotation  [no-untyped-def]
        def test_setup_repository_mount(self):
        ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:78: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_commands/test_repository_mounting.py:146: error:
Function is missing a return type annotation  [no-untyped-def]
        def test_create_override_file(self):
        ^
tests/unit/test_cli/test_commands/test_repository_mounting.py:146: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_commands/test_database.py:8: error: Skipping analyzing
"codestory.cli.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.cli.client import ServiceError
    ^
tests/unit/test_cli/test_commands/test_database.py:9: error: Skipping analyzing
"codestory.cli.commands.database": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.cli.commands.database import clear_database, database
    ^
tests/unit/test_cli/test_commands/test_database.py:13: error: Function is
missing a return type annotation  [no-untyped-def]
    def mock_client():
    ^
tests/unit/test_cli/test_commands/test_database.py:25: error: Function is
missing a return type annotation  [no-untyped-def]
    def mock_console():
    ^
tests/unit/test_cli/test_commands/test_database.py:31: error: Function is
missing a type annotation  [no-untyped-def]
    def cli_context(mock_client, mock_console):
    ^
tests/unit/test_cli/test_commands/test_database.py:38: error: Function is
missing a return type annotation  [no-untyped-def]
    def test_database_group():
    ^
tests/unit/test_cli/test_commands/test_database.py:38: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_commands/test_database.py:46: error: Function is
missing a type annotation  [no-untyped-def]
    def test_clear_database_with_force(cli_context, mock_client, mock_cons...
    ^
tests/unit/test_cli/test_commands/test_database.py:56: error: Function is
missing a type annotation  [no-untyped-def]
    def test_clear_database_error(cli_context, mock_client, mock_console):
    ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:12: error: Skipping
analyzing "codestory.cli.client.service_client": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.cli.client.service_client import ServiceClient
    ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:13: error: Skipping
analyzing "codestory.cli.commands.ingest": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.cli.commands.ingest import ingest
    ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:17: error: Function
is missing a return type annotation  [no-untyped-def]
    def mock_client():
    ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:25: error: Function
is missing a return type annotation  [no-untyped-def]
    def cli_context():
    ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:41: error: Function
is missing a type annotation  [no-untyped-def]
        def test_container_detection(self, cli_runner, cli_context):
        ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:72: error: Function
is missing a type annotation  [no-untyped-def]
        def test_auto_mount_execution(self, cli_runner, cli_context):
        ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:132: error:
Function is missing a type annotation  [no-untyped-def]
        def test_no_auto_mount(self, cli_runner, cli_context):
        ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:161: error:
Function is missing a type annotation  [no-untyped-def]
        def test_non_docker_deployment(self, cli_runner, cli_context):
        ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:193: error:
Function is missing a type annotation  [no-untyped-def]
        def test_auto_mount_flag(self, cli_runner, cli_context):
        ^
tests/unit/test_cli/test_commands/backup/test_auto_mount.py:231: error:
Function is missing a type annotation  [no-untyped-def]
        def test_no_auto_mount_flag(self, cli_runner, cli_context):
        ^
tests/integration/test_docker_network.py:105: error: Function is missing a type
annotation  [no-untyped-def]
    def test_service_to_neo4j_connectivity(docker_compose_project):
    ^
tests/integration/test_docker_network.py:134: error: Function is missing a type
annotation  [no-untyped-def]
    def test_service_to_redis_connectivity(docker_compose_project):
    ^
tests/integration/test_docker_network.py:153: error: Function is missing a type
annotation  [no-untyped-def]
    def test_health_endpoint_in_container(docker_compose_project):
    ^
tests/integration/test_docker_network.py:175: error: Function is missing a type
annotation  [no-untyped-def]
    def test_external_health_endpoint(docker_compose_project):
    ^
tests/integration/test_docker_connectivity.py:21: error: Function is missing a
return type annotation  [no-untyped-def]
        def worker_container(self):
        ^
tests/integration/test_docker_connectivity.py:55: error: Function is missing a
type annotation  [no-untyped-def]
        def test_docker_socket_accessibility(self, worker_container):
        ^
tests/integration/test_docker_connectivity.py:64: error: Function is missing a
type annotation  [no-untyped-def]
        def test_docker_cli_installation(self, worker_container):
        ^
tests/integration/test_docker_connectivity.py:73: error: Function is missing a
type annotation  [no-untyped-def]
        def test_docker_python_module_availability(self, worker_container)...
        ^
tests/integration/test_docker_connectivity.py:83: error: Function is missing a
type annotation  [no-untyped-def]
        def test_docker_daemon_connectivity(self, worker_container):
        ^
tests/integration/test_docker_connectivity.py:95: error: Function is missing a
type annotation  [no-untyped-def]
        def test_docker_group_configuration(self, worker_container):
        ^
tests/integration/test_docker_connectivity.py:106: error: Function is missing a
type annotation  [no-untyped-def]
        def test_blarify_docker_integration(self, worker_container):
        ^
tests/integration/test_docker_connectivity.py:140: error: Function is missing a
type annotation  [no-untyped-def]
        def test_worker_health_with_docker_fix(self, worker_container):
        ^
tests/integration/test_docker_connectivity.py:157: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_original_issue_resolved(self):
        ^
tests/integration/test_docker_connectivity.py:157: note: Use "-> None" if function does not return a value
tests/integration/test_llm/test_client_integration.py:9: error: Skipping
analyzing "codestory.config.settings": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
tests/integration/test_llm/test_client_integration.py:10: error: Skipping
analyzing "codestory.llm.client": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.llm.client import create_client
    ^
tests/integration/test_llm/test_client_integration.py:11: error: Skipping
analyzing "codestory.llm.models": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.llm.models import ChatMessage, ChatRole
    ^
tests/integration/test_llm/test_client_integration.py:18: error: Function is
missing a type annotation  [no-untyped-def]
    def test_client_creation(openai_credentials):
    ^
tests/integration/test_llm/test_client_integration.py:39: error: Function is
missing a type annotation  [no-untyped-def]
    def test_client_configuration(client):
    ^
tests/integration/test_llm/test_client_integration.py:52: error: Function is
missing a type annotation  [no-untyped-def]
    def test_chat_completion(client):
    ^
tests/integration/test_llm/test_client_integration.py:85: error: Function is
missing a type annotation  [no-untyped-def]
    def test_reasoning_model_parameter_handling(client):
    ^
tests/integration/test_llm/test_client_integration.py:133: error: Function is
missing a type annotation  [no-untyped-def]
    async def test_reasoning_model_async_parameter_handling(client):
    ^
tests/integration/test_llm/test_client_integration.py:180: error: Function is
missing a type annotation  [no-untyped-def]
    def test_regular_model_vs_reasoning_model_parameters(client):
    ^
tests/integration/test_llm/test_client_integration.py:239: error: Function is
missing a type annotation  [no-untyped-def]
    def test_embedding(client):
    ^
tests/integration/test_llm/test_client_integration.py:263: error: Function is
missing a type annotation  [no-untyped-def]
    async def test_chat_async(client):
    ^
tests/integration/test_llm/conftest.py:9: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings, refresh_settings
    ^
tests/integration/test_llm/conftest.py:10: error: Skipping analyzing
"codestory.llm.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.client import OpenAIClient, create_client
    ^
tests/integration/test_llm/conftest.py:13: error: Function is missing a type
annotation  [no-untyped-def]
    def pytest_addoption(parser):
    ^
tests/integration/test_llm/conftest.py:30: error: Function is missing a type
annotation  [no-untyped-def]
    def pytest_configure(config):
    ^
tests/integration/test_llm/conftest.py:36: error: Function is missing a type
annotation  [no-untyped-def]
    def pytest_collection_modifyitems(config, items):
    ^
tests/integration/test_llm/conftest.py:102: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def azure_login(openai_credentials) -> None:
    ^
tests/integration/test_llm/conftest.py:139: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def client(openai_credentials, azure_login) -> OpenAIClient:
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:9: error:
Skipping analyzing "codestory.ingestion_pipeline.celery_app": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.celery_app import app as celery_app
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:10: error:
Skipping analyzing "codestory_filesystem.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_filesystem.step import FileSystemStep
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:15: error:
Function is missing a return type annotation  [no-untyped-def]
    def test_filesystem_task_registration():
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:15: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_task_registration.py:29: error:
Function is missing a return type annotation  [no-untyped-def]
    def test_filesystem_task_routing():
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:29: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_task_registration.py:50: error:
Function is missing a return type annotation  [no-untyped-def]
    def test_run_step_task_name_mapping():
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:50: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_task_registration.py:56: error:
Skipping analyzing "codestory.ingestion_pipeline.tasks": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
        from codestory.ingestion_pipeline.tasks import run_step
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:69: error:
Function is missing a return type annotation  [no-untyped-def]
    def test_step_class_task_delegation():
    ^
tests/integration/test_ingestion_pipeline/test_task_registration.py:69: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:20: error:
Skipping analyzing "codestory.graphdb.neo4j_connector": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:21: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:22: error:
Skipping analyzing "codestory.llm.models": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.llm.models import (
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:29: error:
Skipping analyzing "codestory_summarizer.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_summarizer.step import SummarizerStep
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:33: error:
Function is missing a type annotation  [no-untyped-def]
    def custom_process_filesystem(repository_path, job_id, neo4j_connector...
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:214: error:
Function is missing a return type annotation  [no-untyped-def]
    def mock_llm_client():
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:220: error:
Function is missing a type annotation  [no-untyped-def]
            def mock_chat(messages, **kwargs):
            ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:266: error:
Function is missing a return type annotation  [no-untyped-def]
    def sample_repo():
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:351: error:
Function is missing a return type annotation  [no-untyped-def]
    def neo4j_connector():
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:371: error:
Function is missing a type annotation  [no-untyped-def]
    def initialized_repo(sample_repo, neo4j_connector):
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:417: error:
Value of type "Any | None" is not indexable  [index]
            class_id = class_result["id"]
                       ^~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:465: error:
Function is missing a type annotation  [no-untyped-def]
    def test_summarizer_step_run(initialized_repo, neo4j_connector, mock_l...
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:475: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_run(self, repository_path, **config):
        ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:768: error:
Function is missing a type annotation  [no-untyped-def]
    def test_summarizer_step_ingestion_update(initialized_repo, neo4j_conn...
    ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:777: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_run(self, repository_path, **config):
        ^
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:845: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_ingestion_update(self, repository_path, **config):
        ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:13: error:
Skipping analyzing "codestory.ingestion_pipeline.manager": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.manager import PipelineManager
    ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:14: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:18: error:
Function is missing a type annotation  [no-untyped-def]
    def test_retry_and_failure_reporting(tmp_path):
    ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:27: error:
Function is missing a type annotation  [no-untyped-def]
        def flaky_run(self, repository_path, **kwargs):
        ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:33: error:
Function is missing a type annotation  [no-untyped-def]
        def flaky_status(self, job_id):
        ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:52: error:
Skipping analyzing "codestory_filesystem.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
        from codestory_filesystem.step import FileSystemStep
    ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:85: error:
Function is missing a type annotation  [no-untyped-def]
    def test_retry_exceeds_max(tmp_path):
    ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:93: error:
Function is missing a type annotation  [no-untyped-def]
        def always_fail_run(self, repository_path, **kwargs):
        ^
tests/integration/test_ingestion_pipeline/test_retry_and_failure.py:97: error:
Function is missing a type annotation  [no-untyped-def]
        def always_fail_status(self, job_id):
        ^
tests/integration/test_ingestion_pipeline/test_resource_throttling.py:10: error:
Function is missing a return type annotation  [no-untyped-def]
    def test_resource_status_endpoint():
    ^
tests/integration/test_ingestion_pipeline/test_resource_throttling.py:10: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_resource_throttling.py:39: error:
Function is missing a type annotation  [no-untyped-def]
    def test_resource_throttling_enforced(monkeypatch):
    ^
tests/integration/test_ingestion_pipeline/test_resource_throttling.py:45: error:
Function is missing a return type annotation  [no-untyped-def]
        def mock_start_job():
        ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:16: error:
Skipping analyzing "codestory.ingestion_pipeline.manager": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.manager import PipelineManager
    ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:17: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:18: error:
Skipping analyzing "codestory_blarify.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_blarify.step import BlarifyStep
    ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:19: error:
Skipping analyzing "codestory_filesystem.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_filesystem.step import FileSystemStep
    ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:20: error:
Skipping analyzing "codestory_summarizer.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_summarizer.step import SummarizerStep
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:20: error:
Skipping analyzing "codestory.graphdb.neo4j_connector": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:21: error:
Skipping analyzing "codestory.ingestion_pipeline.manager": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.manager import PipelineManager
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:22: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:26: error:
Function is missing a type annotation  [no-untyped-def]
    def custom_process_filesystem(
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:220: error:
Function is missing a return type annotation  [no-untyped-def]
    def sample_repo():
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:243: error:
Function is missing a return type annotation  [no-untyped-def]
    def neo4j_connector():
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:267: error:
Function is missing a return type annotation  [no-untyped-def]
    def test_config():
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:292: error:
Function is missing a type annotation  [no-untyped-def]
    def test_pipeline_manager_run(sample_repo, neo4j_connector, test_confi...
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:306: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_start_job(self, repository_path):
        ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:361: error:
Function is missing a type annotation  [no-untyped-def]
    def test_pipeline_manager_stop(sample_repo, neo4j_connector, test_conf...
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:373: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_start_job(self, repository_path):
        ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:384: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_stop(self, job_id):
        ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:390: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_status(self, job_id):
        ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:420: error:
Function is missing a type annotation  [no-untyped-def]
    def test_pipeline_manager_run_single_step(sample_repo, neo4j_connector...
    ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:432: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_run_single_step(self, repository_path, step_name, **confi...
        ^
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:459: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_status(self, job_id):
        ^
tests/integration/test_ingestion_pipeline/test_filesystem_simple.py:12: error:
Skipping analyzing "codestory.config.settings": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_simple.py:13: error:
Skipping analyzing "codestory.graphdb.neo4j_connector": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_simple.py:17: error:
Function is missing a type annotation  [no-untyped-def]
    def neo4j_connector(neo4j_env):
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_simple.py:41: error:
Function is missing a type annotation  [no-untyped-def]
    def test_direct_neo4j_filesystem(neo4j_connector):
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:19: error:
Skipping analyzing "codestory.graphdb.neo4j_connector": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:20: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus, generate_job...
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:21: error:
Skipping analyzing "codestory_filesystem.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_filesystem.step import FileSystemStep
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:25: error:
Function is missing a type annotation  [no-untyped-def]
    def custom_process_filesystem(
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:219: error:
Function is missing a return type annotation  [no-untyped-def]
    def sample_repo():
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:248: error:
Function is missing a return type annotation  [no-untyped-def]
    def neo4j_connector():
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:275: error:
Function is missing a type annotation  [no-untyped-def]
    def test_filesystem_step_run(sample_repo, neo4j_connector, celery_app)...
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:297: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_run(self, repository_path, **config):
        ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:378: error:
Function is missing a type annotation  [no-untyped-def]
    def test_filesystem_step_ingestion_update(sample_repo, neo4j_connector...
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:394: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_run(self, repository_path, **config):
        ^
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:449: error:
Function is missing a type annotation  [no-untyped-def]
        def mock_update(self, repository_path, **config):
        ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:17: error:
Skipping analyzing "codestory.config.settings": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.config.settings import Neo4jSettings
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:18: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus, generate_job...
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:43: error:
Function is missing a return type annotation  [no-untyped-def]
    def sample_repo():
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:74: error:
Function is missing a type annotation  [no-untyped-def]
    def custom_process_filesystem(
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:265: error:
Function is missing a type annotation  [no-untyped-def]
    def test_filesystem_direct(sample_repo, neo4j_connector):
    ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:334: error:
Function is missing a type annotation  [no-untyped-def]
    def test_filesystem_update_direct(sample_repo, neo4j_connector):
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:25: error:
Skipping analyzing "codestory.graphdb.neo4j_connector": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:26: error:
Skipping analyzing "codestory.llm.models": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.llm.models import (
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:33: error:
Skipping analyzing "codestory_docgrapher.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_docgrapher.step import DocumentationGrapherStep
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:34: error:
Skipping analyzing "codestory_filesystem.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_filesystem.step import FileSystemStep
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:41: error:
Function is missing a return type annotation  [no-untyped-def]
    def sample_repo():
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:134: error:
Function is missing a return type annotation  [no-untyped-def]
    def neo4j_connector():
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:153: error:
Function is missing a type annotation  [no-untyped-def]
    def initialized_repo(sample_repo, neo4j_connector):
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:325: error:
Function is missing a return type annotation  [no-untyped-def]
    def mock_llm_client():
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:368: error:
Function is missing a type annotation  [no-untyped-def]
    def test_docgrapher_step_run(initialized_repo, neo4j_connector, mock_l...
    ^
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:520: error:
Function is missing a type annotation  [no-untyped-def]
    def test_docgrapher_step_with_no_llm(initialized_repo, neo4j_connector...
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:32: error:
Skipping analyzing "codestory.graphdb.neo4j_connector": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:33: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:34: error:
Skipping analyzing "codestory_blarify.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_blarify.step import DEFAULT_CONTAINER_NAME_PREFIX, Blar...
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:41: error:
Function is missing a return type annotation  [no-untyped-def]
    def sample_repo():
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:104: error:
Function is missing a return type annotation  [no-untyped-def]
    def neo4j_connector():
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:148: error:
Function is missing a return type annotation  [no-untyped-def]
    def ensure_blarify_image():
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:318: error:
Function is missing a type annotation  [no-untyped-def]
    def blarify_celery_app(celery_app):
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:335: error:
Function is missing a type annotation  [no-untyped-def]
    def test_blarify_step_run(sample_repo, neo4j_connector, ensure_blarify...
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:568: error:
Function is missing a type annotation  [no-untyped-def]
    def test_blarify_step_stop(sample_repo, neo4j_connector, ensure_blarif...
    ^
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:593: error:
Statement is unreachable  [unreachable]
            return
            ^~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:697: error:
Value of type "Any | None" is not indexable  [index]
            assert final_status["status"] in [
                   ^~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:700: error:
Value of type "Any | None" is not indexable  [index]
    ...  ], f"Expected status STOPPED or COMPLETED, got {final_status['status...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:703: error:
Value of type "Any | None" is not indexable  [index]
            if final_status["status"] == StepStatus.COMPLETED:
               ^~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:24: error:
Function is missing a type annotation  [no-untyped-def]
        def setup_test_env(self, neo4j_connector, redis_client, celery_app...
        ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:39: error:
Skipping analyzing "codestory_blarify.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
                from codestory_blarify.step import run_blarify
    ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:40: error:
Skipping analyzing "codestory_docgrapher.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
                from codestory_docgrapher.step import run_docgrapher
    ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:41: error:
Skipping analyzing "codestory_filesystem.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
                from codestory_filesystem.step import process_filesystem
    ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:42: error:
Skipping analyzing "codestory_summarizer.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
                from codestory_summarizer.step import run_summarizer
    ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:77: error:
Function is missing a return type annotation  [no-untyped-def]
        def create_test_repository(self):
        ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:137: error:
Function is missing a type annotation  [no-untyped-def]
        def wait_for_node_in_db(self, query, params=None, timeout=15):
        ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:156: error:
Function is missing a return type annotation  [no-untyped-def]
        def create_filesystem_nodes(self):
        ^
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:156: note: Use "-> None" if function does not return a value
tests/integration/test_graphdb/test_neo4j_integration.py:8: error: Skipping
analyzing "codestory.graphdb.exceptions": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.exceptions import (
    ^
tests/integration/test_graphdb/test_neo4j_integration.py:11: error: Skipping
analyzing "codestory.graphdb.models": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.models import DirectoryNode, FileNode
    ^
tests/integration/test_graphdb/test_neo4j_integration.py:12: error: Skipping
analyzing "codestory.graphdb.neo4j_connector": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_graphdb/test_neo4j_connectivity.py:12: error: Skipping
analyzing "codestory.config": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config import get_settings
    ^
tests/integration/test_graphdb/test_neo4j_connectivity.py:16: error: Function
is missing a type annotation  [no-untyped-def]
    def test_neo4j_connection_env_vars(use_env_check, test_databases):
    ^
tests/integration/test_graphdb/test_neo4j_connectivity.py:45: error: Function
is missing a type annotation  [no-untyped-def]
    def test_neo4j_connection_works(neo4j_connector):
    ^
tests/integration/test_demos/test_mcp_demo.py:16: error: Function is missing a
return type annotation  [no-untyped-def]
    def setup_mcp():
    ^
tests/integration/test_demos/test_mcp_demo.py:79: error: Function is missing a
type annotation  [no-untyped-def]
    def test_mcp_ping(setup_mcp):
    ^
tests/integration/test_demos/test_mcp_demo.py:88: error: Function is missing a
type annotation  [no-untyped-def]
    def test_mcp_health(setup_mcp):
    ^
tests/integration/test_demos/test_mcp_demo.py:97: error: Function is missing a
type annotation  [no-untyped-def]
    def test_mcp_tools_list(setup_mcp):
    ^
tests/integration/test_demos/test_mcp_demo.py:114: error: Function is missing a
type annotation  [no-untyped-def]
    def test_mcp_search_graph(setup_mcp, neo4j_connector):
    ^
tests/integration/test_demos/test_mcp_demo.py:138: error: Function is missing a
type annotation  [no-untyped-def]
    def test_mcp_path_to(setup_mcp, neo4j_connector):
    ^
tests/integration/test_demos/test_mcp_demo.py:168: error: Function is missing a
type annotation  [no-untyped-def]
    def test_mcp_summarize_node(setup_mcp, neo4j_connector):
    ^
tests/integration/test_demos/test_cli_demo.py:14: error: Function is missing a
return type annotation  [no-untyped-def]
    def setup_test_env():
    ^
tests/integration/test_demos/test_cli_demo.py:46: error: Function is missing a
type annotation  [no-untyped-def]
    def test_cli_version(setup_test_env):
    ^
tests/integration/test_demos/test_cli_demo.py:64: error: Function is missing a
type annotation  [no-untyped-def]
    def test_cli_config_init(setup_test_env):
    ^
tests/integration/test_demos/test_cli_demo.py:89: error: Function is missing a
type annotation  [no-untyped-def]
    def test_cli_config_show(setup_test_env):
    ^
tests/integration/test_demos/test_cli_demo.py:116: error: Function is missing a
type annotation  [no-untyped-def]
    def test_cli_query_run(setup_test_env, neo4j_connector):
    ^
tests/integration/test_demos/test_cli_demo.py:143: error: Function is missing a
type annotation  [no-untyped-def]
    def test_cli_ask(setup_test_env, neo4j_connector):
    ^
tests/integration/test_demos/test_cli_demo.py:172: error: Function is missing a
type annotation  [no-untyped-def]
    def test_cli_visualize(setup_test_env, neo4j_connector):
    ^
tests/integration/test_cli/test_service_integration.py:11: error: Skipping
analyzing "codestory.cli.main": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/integration/test_cli/test_service_integration.py:56: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_service_start_stop_subprocess(self):
        ^
tests/integration/test_cli/test_service_integration.py:56: note: Use "-> None" if function does not return a value
tests/integration/test_cli/test_repository_mounting.py:20: error: Skipping
analyzing "codestory.cli.commands.ingest": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.cli.commands.ingest import ingest, start_ingestion
    ^
tests/integration/test_cli/test_repository_mounting.py:34: error: Function is
missing a return type annotation  [no-untyped-def]
    def temp_repository():
    ^
tests/integration/test_cli/test_repository_mounting.py:64: error: Function is
missing a return type annotation  [no-untyped-def]
    def stop_containers():
    ^
tests/integration/test_cli/test_repository_mounting.py:76: error: Function is
missing a return type annotation  [no-untyped-def]
    def cli_runner():
    ^
tests/integration/test_cli/test_repository_mounting.py:84: error: Function is
missing a type annotation  [no-untyped-def]
        def test_mount_verification(self, temp_repository):
        ^
tests/integration/test_cli/test_repository_mounting.py:249: error: Function is
missing a type annotation  [no-untyped-def]
        def test_cli_mount_verification_function(self, temp_repository):
        ^
tests/integration/test_cli/test_repository_mounting.py:329: error: "IO[str]"
has no attribute "getvalue"  [attr-defined]
                output = console.file.getvalue()
                         ^~~~~~~~~~~~~~~~~~~~~
tests/integration/test_cli/test_query_integration.py:9: error: Skipping
analyzing "codestory.cli.main": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/integration/test_cli/test_ingest_integration.py:11: error: Skipping
analyzing "codestory.cli.commands.ingest": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.cli.commands.ingest import is_docker_running, is_repo_m...
    ^
tests/integration/test_cli/test_ingest_integration.py:12: error: Skipping
analyzing "codestory.cli.main": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/integration/test_cli/test_config_integration.py:8: error: Skipping
analyzing "codestory.cli.main": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/integration/test_cli/test_config_integration.py:9: error: Skipping
analyzing "codestory.config": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config import get_settings
    ^
tests/integration/test_cli/test_command_suggestions.py:9: error: Skipping
analyzing "codestory.cli.main": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.cli.main import app
    ^
tests/integration/test_cli/test_command_suggestions.py:13: error: Function is
missing a return type annotation  [no-untyped-def]
    def cli_runner():
    ^
tests/integration/test_cli/test_command_suggestions.py:18: error: Function is
missing a type annotation  [no-untyped-def]
    def test_no_command_shows_help(cli_runner):
    ^
tests/integration/test_cli/test_command_suggestions.py:30: error: Function is
missing a type annotation  [no-untyped-def]
    def test_invalid_command_suggestion(cli_runner):
    ^
tests/integration/test_cli/test_command_suggestions.py:42: error: Function is
missing a type annotation  [no-untyped-def]
    def test_invalid_command_with_similar_options(cli_runner):
    ^
tests/integration/test_cli/test_command_suggestions.py:55: error: Function is
missing a type annotation  [no-untyped-def]
    def test_help_flag_shows_help(cli_runner):
    ^
tests/integration/test_cli/test_command_suggestions.py:68: error: Function is
missing a type annotation  [no-untyped-def]
    def test_command_help_shows_command_help(cli_runner):
    ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:15: error:
Skipping analyzing "codestory.ingestion_pipeline.manager": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.manager import PipelineManager
    ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:16: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:29: error:
Function is missing a return type annotation  [no-untyped-def]
        def setup_pipeline_manager(self):
        ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:47: error:
Function is missing a return type annotation  [no-untyped-def]
        def _create_pipeline_config_file(self):
        ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:70: error:
Function is missing a return type annotation  [no-untyped-def]
        def test_full_pipeline_execution(self):
        ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:70: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:90: error:
Function is missing a return type annotation  [no-untyped-def]
        def test_pipeline_with_empty_repo(self):
        ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:90: note: Use "-> None" if function does not return a value
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:128: error:
Function is missing a return type annotation  [no-untyped-def]
        def test_pipeline_error_handling(self):
        ^
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:128: note: Use "-> None" if function does not return a value
src/codestory_mcp/auth/entra_validator.py:12: error: Skipping analyzing
"codestory_mcp.auth.scope_manager": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.auth.scope_manager import ScopeManager
    ^
tests/integration/test_demos/test_gui_demo.py:16: error: Function is missing a
return type annotation  [no-untyped-def]
    def setup_gui():
    ^
tests/integration/test_demos/test_gui_demo.py:74: error: Function is missing a
type annotation  [no-untyped-def]
    def test_gui_homepage(setup_gui):
    ^
tests/integration/test_demos/test_gui_demo.py:98: error: Function is missing a
type annotation  [no-untyped-def]
    def test_gui_configuration(setup_gui):
    ^
tests/integration/test_demos/test_gui_demo.py:125: error: Function is missing a
type annotation  [no-untyped-def]
    def test_gui_ingestion(setup_gui):
    ^
tests/integration/test_demos/test_gui_demo.py:146: error: Function is missing a
type annotation  [no-untyped-def]
    def test_gui_graph(setup_gui):
    ^
tests/integration/test_demos/test_gui_demo.py:166: error: Function is missing a
type annotation  [no-untyped-def]
    def test_gui_ask(setup_gui):
    ^
tests/integration/test_demos/test_gui_demo.py:187: error: Function is missing a
type annotation  [no-untyped-def]
    def test_gui_mcp(setup_gui):
    ^
tests/conftest.py:119: error: Function is missing a type annotation 
[no-untyped-def]
    def neo4j_connector(test_databases):
    ^
tests/conftest.py:121: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
        from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/conftest.py:122: error: Skipping analyzing "codestory.graphdb.schema":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
        from codestory.graphdb.schema import initialize_schema
    ^
tests/conftest.py:151: error: Function is missing a type annotation 
[no-untyped-def]
    def redis_client(test_databases):
    ^
tests/conftest.py:171: error: Function is missing a type annotation 
[no-untyped-def]
    def pytest_configure(config):
    ^
tests/unit/test_graphdb/test_connector.py:8: error: Skipping analyzing
"codestory.graphdb.exceptions": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.graphdb.exceptions import QueryError, TransactionError
    ^
tests/unit/test_graphdb/test_connector.py:9: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/unit/test_graphdb/test_connector.py:13: error: Function is missing a
return type annotation  [no-untyped-def]
    def mock_driver():
    ^
tests/unit/test_graphdb/test_connector.py:32: error: Function is missing a
return type annotation  [no-untyped-def]
    def mock_async_driver():
    ^
tests/unit/test_graphdb/test_connector.py:51: error: Function is missing a type
annotation  [no-untyped-def]
    def connector(mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:66: error: Function is missing a type
annotation  [no-untyped-def]
    def async_connector(mock_async_driver):
    ^
tests/unit/test_graphdb/test_connector.py:81: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_init():
    ^
tests/unit/test_graphdb/test_connector.py:81: note: Use "-> None" if function does not return a value
tests/unit/test_graphdb/test_connector.py:102: error: Function is missing a
type annotation  [no-untyped-def]
    def test_execute_query(connector, mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:118: error: Function is missing a
type annotation  [no-untyped-def]
    def test_execute_query_with_retry(connector, mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:132: error: Function is missing a
type annotation  [no-untyped-def]
    def test_execute_query_max_retries_exceeded(connector, mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:145: error: Function is missing a
type annotation  [no-untyped-def]
    def test_execute_many(connector, mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:163: error: Function is missing a
type annotation  [no-untyped-def]
    def test_execute_many_transaction_error(connector, mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:170: error: Need type annotation for
"params_list"  [var-annotated]
        params_list = [{}, {}]
                      ^~~~~~~~
tests/unit/test_graphdb/test_connector.py:177: error: Function is missing a
type annotation  [no-untyped-def]
    def test_semantic_search(connector, mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:203: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_execute_query_async(async_connector, mock_async_driver)...
    ^
tests/unit/test_graphdb/test_connector.py:217: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_execute_many_async(async_connector, mock_async_driver):
    ^
tests/unit/test_graphdb/test_connector.py:237: error: Function is missing a
type annotation  [no-untyped-def]
    def test_close(connector, mock_driver):
    ^
tests/unit/test_graphdb/test_connector.py:243: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_context_manager():
    ^
tests/unit/test_graphdb/test_connector.py:243: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_progress_client.py:11: error: Skipping analyzing
"codestory.cli.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.cli.client import ProgressClient
    ^
tests/unit/test_cli/test_progress_client.py:155: error: Function is missing a
return type annotation  [no-untyped-def]
                def stop_after_messages():
                ^
tests/unit/test_cli/test_progress_client.py:155: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_progress_client.py:7: error: Skipping analyzing
"codestory.cli.client.progress_client": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.cli.client.progress_client import ProgressClient
    ^
tests/unit/test_cli/client/test_progress_client.py:13: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_init(self):
        ^
tests/unit/test_cli/client/test_progress_client.py:13: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_progress_client.py:33: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_redis_connection_success(self):
        ^
tests/unit/test_cli/client/test_progress_client.py:33: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_progress_client.py:60: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_docker_port_detection(self):
        ^
tests/unit/test_cli/client/test_progress_client.py:60: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_progress_client.py:113: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_use_explicit_redis_url(self):
        ^
tests/unit/test_cli/client/test_progress_client.py:113: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_progress_client.py:140: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_fallback_to_http_polling(self):
        ^
tests/unit/test_cli/client/test_progress_client.py:140: note: Use "-> None" if function does not return a value
tests/integration/conftest.py:16: error: Function is missing a return type
annotation  [no-untyped-def]
    def fix_neo4j_port_config():
    ^
tests/integration/conftest.py:16: note: Use "-> None" if function does not return a value
tests/integration/conftest.py:66: error: Function is missing a type annotation 
[no-untyped-def]
    def pytest_addoption(parser):
    ^
tests/integration/conftest.py:95: error: Function is missing a type annotation 
[no-untyped-def]
    def pytest_configure(config):
    ^
tests/integration/conftest.py:102: error: Function is missing a type annotation
 [no-untyped-def]
    def pytest_collection_modifyitems(config, items):
    ^
tests/integration/conftest.py:128: error: Function is missing a return type
annotation  [no-untyped-def]
    def mock_settings():
    ^
tests/integration/conftest.py:143: error: Function is missing a return type
annotation  [no-untyped-def]
    def neo4j_env():
    ^
tests/integration/conftest.py:143: note: Use "-> None" if function does not return a value
tests/integration/conftest.py:186: error: Function is missing a return type
annotation  [no-untyped-def]
    def load_env_vars():
    ^
tests/integration/conftest.py:186: note: Use "-> None" if function does not return a value
tests/integration/conftest.py:244: error: Function is missing a return type
annotation  [no-untyped-def]
    def neo4j_connector():
    ^
tests/integration/conftest.py:246: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
        from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/conftest.py:303: error: Function is missing a return type
annotation  [no-untyped-def]
    def redis_client():
    ^
tests/integration/conftest.py:336: error: Function is missing a type annotation
 [no-untyped-def]
    def celery_app(redis_client):
    ^
tests/integration/conftest.py:344: error: Skipping analyzing
"codestory.ingestion_pipeline.celery_app": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
        from codestory.ingestion_pipeline.celery_app import app
    ^
src/codestory/cli/client/progress_client.py:12: error: Skipping analyzing
"codestory.config": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.config import Settings, get_settings
    ^
src/codestory/cli/client/progress_client.py:234: error: Skipping analyzing
"codestory.cli.client.service_client": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
            from codestory.cli.client.service_client import ServiceClient,...
    ^
src/codestory/cli/client/progress_client.py:234: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
tests/unit/test_cli/client/test_service_client.py:10: error: Skipping analyzing
"codestory.cli.client.service_client": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.cli.client.service_client import ServiceClient, Service...
    ^
tests/unit/test_cli/client/test_service_client.py:16: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_init(self):
        ^
tests/unit/test_cli/client/test_service_client.py:16: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:26: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_console_methods(self):
        ^
tests/unit/test_cli/client/test_service_client.py:26: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:44: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_start_ingestion_logging(self):
        ^
tests/unit/test_cli/client/test_service_client.py:44: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:66: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_check_service_health_with_error(self):
        ^
tests/unit/test_cli/client/test_service_client.py:66: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:81: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_generate_visualization_logging(self):
        ^
tests/unit/test_cli/client/test_service_client.py:81: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:105: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_list_ingestion_jobs_with_items_field(self):
        ^
tests/unit/test_cli/client/test_service_client.py:105: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:135: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_list_ingestion_jobs_with_jobs_field(self):
        ^
tests/unit/test_cli/client/test_service_client.py:135: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:161: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_list_ingestion_jobs_with_invalid_format(self):
        ^
tests/unit/test_cli/client/test_service_client.py:161: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:185: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_list_ingestion_jobs_with_list_format(self):
        ^
tests/unit/test_cli/client/test_service_client.py:185: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:209: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_list_ingestion_jobs_with_single_job_format(self):
        ^
tests/unit/test_cli/client/test_service_client.py:209: note: Use "-> None" if function does not return a value
tests/unit/test_cli/client/test_service_client.py:233: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_list_ingestion_jobs_with_mock_format(self):
        ^
tests/unit/test_cli/client/test_service_client.py:233: note: Use "-> None" if function does not return a value
tests/integration/test_cli/conftest.py:14: error: Skipping analyzing
"codestory.config": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.config import get_settings
    ^
tests/integration/test_cli/conftest.py:28: error: Function is missing a type
annotation  [no-untyped-def]
    def pytest_configure(config):
    ^
tests/integration/test_cli/conftest.py:37: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def running_service(request) -> Generator[dict[str, Any], None, None]:
    ^
tests/integration/test_service.py:13: error: Skipping analyzing
"codestory_service.main": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_service.main import app
    ^
tests/integration/test_service.py:17: error: Function is missing a return type
annotation  [no-untyped-def]
    def test_client():
    ^
tests/integration/test_service.py:34: error: Function is missing a type
annotation  [no-untyped-def]
    def test_root_endpoint(test_client):
    ^
tests/integration/test_service.py:45: error: Function is missing a type
annotation  [no-untyped-def]
    def test_legacy_health_check(test_client):
    ^
tests/integration/test_service.py:103: error: Function is missing a type
annotation  [no-untyped-def]
    def test_v1_health_check(test_client):
    ^
tests/integration/test_service.py:183: error: Function is missing a type
annotation  [no-untyped-def]
    def test_health_check_degraded_service(test_client):
    ^
tests/integration/test_service.py:266: error: Function is missing a type
annotation  [no-untyped-def]
    def test_health_check_all_components_unhealthy(test_client):
    ^
tests/integration/test_service.py:332: error: Function is missing a type
annotation  [no-untyped-def]
    def test_openapi_docs(test_client):
    ^
tests/integration/test_service.py:346: error: Function is missing a type
annotation  [no-untyped-def]
    def test_query_api(test_client):
    ^
tests/integration/test_service.py:380: error: Function is missing a type
annotation  [no-untyped-def]
    def test_config_api_minimal(test_client):
    ^
tests/integration/test_mcp.py:9: error: Skipping analyzing
"codestory_mcp.server": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.server import create_app
    ^
tests/integration/test_mcp.py:10: error: Skipping analyzing
"codestory_mcp.tools": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools import register_tool
    ^
tests/integration/test_mcp.py:11: error: Skipping analyzing
"codestory_mcp.tools.path_to": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.path_to import PathToTool
    ^
tests/integration/test_mcp.py:12: error: Skipping analyzing
"codestory_mcp.tools.search_graph": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.tools.search_graph import SearchGraphTool
    ^
tests/integration/test_mcp.py:13: error: Skipping analyzing
"codestory_mcp.tools.similar_code": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.tools.similar_code import SimilarCodeTool
    ^
tests/integration/test_mcp.py:14: error: Skipping analyzing
"codestory_mcp.tools.summarize_node": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.tools.summarize_node import SummarizeNodeTool
    ^
tests/integration/test_mcp.py:18: error: Function is missing a return type
annotation  [no-untyped-def]
    def client():
    ^
tests/integration/test_mcp.py:57: error: Function is missing a type annotation 
[no-untyped-def]
    def test_health_check(client):
    ^
tests/integration/test_mcp.py:65: error: Function is missing a type annotation 
[no-untyped-def]
    def test_get_tools(client):
    ^
tests/integration/test_mcp.py:81: error: Function is missing a type annotation 
[no-untyped-def]
    def test_execute_search_graph_tool(client):
    ^
tests/integration/test_mcp.py:137: error: Function is missing a type annotation
 [no-untyped-def]
    def test_execute_summarize_node_tool(client):
    ^
tests/integration/test_mcp.py:189: error: Function is missing a type annotation
 [no-untyped-def]
    def test_execute_tool_with_invalid_parameters(client):
    ^
tests/integration/test_mcp.py:206: error: Function is missing a type annotation
 [no-untyped-def]
    def test_execute_nonexistent_tool(client):
    ^
tests/integration/test_config_api.py:15: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/integration/test_config_api.py:16: error: Skipping analyzing
"codestory.graphdb.schema": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.graphdb.schema import initialize_schema
    ^
tests/integration/test_config_api.py:17: error: Skipping analyzing
"codestory_service.infrastructure.msal_validator": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.infrastructure.msal_validator import get_curren...
    ^
tests/integration/test_config_api.py:18: error: Skipping analyzing
"codestory_service.main": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_service.main import app as global_app
    ^
tests/integration/test_config_api.py:23: error: Function is missing a return
type annotation  [no-untyped-def]
    def neo4j_connector():
    ^
tests/integration/test_config_api.py:51: error: Function is missing a type
annotation  [no-untyped-def]
    def test_client(neo4j_connector):
    ^
tests/integration/test_config_api.py:81: error: Function is missing a return
type annotation  [no-untyped-def]
        async def get_test_user():
        ^
tests/integration/test_config_api.py:92: error: Function is missing a type
annotation  [no-untyped-def]
        async def test_lifespan(app):
        ^
tests/integration/test_config_api.py:140: error: Function is missing a type
annotation  [no-untyped-def]
    def test_config_api_simple(test_client):
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:6: error:
Skipping analyzing "codestory_service.application.ingestion_service": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.application.ingestion_service import IngestionS...
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:7: error:
Skipping analyzing "codestory_service.domain.ingestion": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.ingestion import JobStatus
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:8: error:
Skipping analyzing "codestory_service.infrastructure.celery_adapter": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.infrastructure.celery_adapter import CeleryAdap...
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:9: error:
Skipping analyzing "codestory_service.main": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.main import app
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:14: error:
Function is missing a return type annotation  [no-untyped-def]
    def celery_adapter():
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:18: error:
Function is missing a type annotation  [no-untyped-def]
    def ingestion_service(celery_adapter):
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:21: error:
Function is missing a return type annotation  [no-untyped-def]
    def start_test_job():
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:33: error:
Function is missing a type annotation  [no-untyped-def]
    def test_cancel_running_job(ingestion_service):
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:47: error:
Function is missing a type annotation  [no-untyped-def]
    def test_cancel_pending_job(ingestion_service):
    ^
tests/integration/test_ingestion_pipeline/test_cancellation.py:60: error:
Function is missing a type annotation  [no-untyped-def]
    def test_cancel_completed_job(ingestion_service):
    ^
tests/unit/test_settings.py:12: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import (
    ^
tests/unit/test_settings.py:27: error: Function is missing a return type
annotation  [no-untyped-def]
    def create_test_settings():
    ^
tests/unit/test_settings.py:146: error: Function is missing a return type
annotation  [no-untyped-def]
    def setup_test_settings():
    ^
tests/unit/test_settings.py:163: error: Function is missing a return type
annotation  [no-untyped-def]
    def test_settings_creation():
    ^
tests/unit/test_settings.py:163: note: Use "-> None" if function does not return a value
tests/unit/test_config_export.py:11: error: Skipping analyzing
"codestory.config": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.config import (
    ^
tests/unit/test_config_export.py:17: error: Skipping analyzing
"codestory.config.export": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.export import _redact_secrets
    ^
tests/unit/test_config_export.py:21: error: Function is missing a return type
annotation  [no-untyped-def]
    def mock_settings():
    ^
tests/unit/test_config_export.py:138: error: Function is missing a return type
annotation  [no-untyped-def]
    def test_redact_secrets():
    ^
tests/unit/test_config_export.py:138: note: Use "-> None" if function does not return a value
tests/unit/test_config_export.py:170: error: Function is missing a type
annotation  [no-untyped-def]
    def test_settings_to_dict(mock_settings):
    ^
tests/unit/test_config_export.py:192: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_to_json(mock_settings):
    ^
tests/unit/test_config_export.py:282: error: Function is missing a type
annotation  [no-untyped-def]
    def test_export_to_toml(mock_settings):
    ^
tests/unit/test_config_export.py:288: error: Function is missing a type
annotation  [no-untyped-def]
    def test_create_env_template(mock_settings):
    ^
tests/unit/test_codestory_service/test_domain_models.py:12: error: Skipping
analyzing "codestory.ingestion_pipeline.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/unit/test_codestory_service/test_domain_models.py:13: error: Skipping
analyzing "codestory_service.domain.auth": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.auth import LoginRequest, TokenResponse,...
    ^
tests/unit/test_codestory_service/test_domain_models.py:14: error: Skipping
analyzing "codestory_service.domain.config": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.config import (
    ^
tests/unit/test_codestory_service/test_domain_models.py:22: error: Skipping
analyzing "codestory_service.domain.graph": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.graph import (
    ^
tests/unit/test_codestory_service/test_domain_models.py:27: error: Skipping
analyzing "codestory_service.domain.ingestion": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.ingestion import (
    ^
tests/unit/test_codestory_service/test_domain_models.py:39: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_login_request_validation(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:39: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:54: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_token_response(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:54: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:67: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_user_info(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:67: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:86: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_config_item_is_sensitive(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:86: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:112: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_config_item_redact_if_sensitive(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:112: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:143: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_config_patch_validation(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:143: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:164: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_cypher_query_validation(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:164: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:175: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_vector_query_validation(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:175: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:193: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_path_request_validation(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:193: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:209: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_ingestion_request_validation(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:209: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:235: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_ingestion_started(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:235: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_domain_models.py:250: error: Function is
missing a return type annotation  [no-untyped-def]
        def test_step_progress(self):
        ^
tests/unit/test_codestory_service/test_domain_models.py:250: note: Use "-> None" if function does not return a value
tests/unit/test_cli/test_service_client.py:9: error: Skipping analyzing
"codestory.cli.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.cli.client import ServiceClient, ServiceError
    ^
tests/unit/test_cli/test_service_client.py:10: error: Skipping analyzing
"codestory.config": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.config import Settings
    ^
src/codestory_service/domain/ingestion.py:20: error: Skipping analyzing
"codestory.ingestion_pipeline.step": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
src/codestory/cli/client/service_client.py:14: error: Skipping analyzing
"codestory.config": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from codestory.config import Settings, get_settings
    ^
src/codestory/cli/client/service_client.py:372: error: Incompatible types in
assignment (expression has type "list[str]", target has type "str") 
[assignment]
                data["dependencies"] = list(dependencies)
                                       ^~~~~~~~~~~~~~~~~~
tests/unit/conftest.py:11: error: Function is missing a return type annotation 
[no-untyped-def]
    def mock_settings():
    ^
tests/unit/conftest.py:20: error: Function is missing a type annotation 
[no-untyped-def]
        def getattr_mock(instance, name):
        ^
tests/unit/conftest.py:34: error: Skipping analyzing "codestory.config": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
        from codestory.config import settings as settings_module
    ^
tests/unit/conftest.py:49: error: Function is missing a return type annotation 
[no-untyped-def]
    def load_env_vars():
    ^
tests/unit/conftest.py:49: note: Use "-> None" if function does not return a value
tests/unit/conftest.py:115: error: Function is missing a return type annotation
 [no-untyped-def]
    def celery_config():
    ^
tests/unit/conftest.py:127: error: Function is missing a return type annotation
 [no-untyped-def]
    def celery_app():
    ^
tests/unit/conftest.py:129: error: Skipping analyzing
"codestory.ingestion_pipeline.celery_app": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
        from codestory.ingestion_pipeline.celery_app import app
    ^
tests/unit/test_llm/test_client.py:9: error: Skipping analyzing
"codestory.llm.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.client import OpenAIClient, create_client
    ^
tests/unit/test_llm/test_client.py:10: error: Skipping analyzing
"codestory.llm.exceptions": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.exceptions import (
    ^
tests/unit/test_llm/test_client.py:14: error: Skipping analyzing
"codestory.llm.models": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.models import (
    ^
tests/unit/test_llm/test_client.py:25: error: Function is missing a return type
annotation  [no-untyped-def]
    def patch_prometheus_metrics():
    ^
tests/unit/test_llm/test_client.py:36: error: Function is missing a return type
annotation  [no-untyped-def]
    def mock_settings():
    ^
tests/unit/test_llm/test_client.py:57: error: Function is missing a return type
annotation  [no-untyped-def]
    def client():
    ^
tests/unit/test_llm/test_client.py:91: error: Function is missing a type
annotation  [no-untyped-def]
        def test_is_reasoning_model(self, client):
        ^
tests/unit/test_llm/test_client.py:108: error: Function is missing a type
annotation  [no-untyped-def]
        def test_adjust_params_for_reasoning_model_o1(self, client):
        ^
tests/unit/test_llm/test_client.py:132: error: Function is missing a type
annotation  [no-untyped-def]
        def test_adjust_params_for_reasoning_model_o1_preview(self, client...
        ^
tests/unit/test_llm/test_client.py:147: error: Function is missing a type
annotation  [no-untyped-def]
        def test_adjust_params_for_reasoning_model_regular_model(self, cli...
        ^
tests/unit/test_llm/test_client.py:165: error: Function is missing a type
annotation  [no-untyped-def]
        def test_adjust_params_for_reasoning_model_no_max_tokens(self, cli...
        ^
tests/unit/test_llm/test_client.py:181: error: Function is missing a type
annotation  [no-untyped-def]
        def test_adjust_params_for_reasoning_model_none_max_tokens(self, c...
        ^
tests/unit/test_llm/test_client.py:195: error: Function is missing a type
annotation  [no-untyped-def]
        def test_chat_with_reasoning_model_parameter_adjustment(self, clie...
        ^
tests/unit/test_llm/test_client.py:256: error: Function is missing a type
annotation  [no-untyped-def]
        async def test_chat_async_with_reasoning_model_parameter_adjustmen...
        ^
tests/unit/test_llm/test_client.py:279: error: Need type annotation for
"future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:320: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_init(self):
        ^
tests/unit/test_llm/test_client.py:320: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_client.py:347: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_init_missing_credentials(self):
        ^
tests/unit/test_llm/test_client.py:347: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_client.py:362: error: Function is missing a type
annotation  [no-untyped-def]
        def test_complete(self, client):
        ^
tests/unit/test_llm/test_client.py:405: error: Function is missing a type
annotation  [no-untyped-def]
        def test_chat(self, client):
        ^
tests/unit/test_llm/test_client.py:458: error: Function is missing a type
annotation  [no-untyped-def]
        def test_embed(self, client):
        ^
tests/unit/test_llm/test_client.py:488: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_error_handling_complete(self):
        ^
tests/unit/test_llm/test_client.py:522: error: Function is missing a type
annotation  [no-untyped-def]
        async def test_complete_async(self, client):
        ^
tests/unit/test_llm/test_client.py:542: error: Need type annotation for
"future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:563: error: Function is missing a type
annotation  [no-untyped-def]
        def test_create_client(self, mock_settings):
        ^
tests/unit/test_llm/test_client.py:587: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_create_client_override(self):
        ^
tests/unit/test_llm/test_client.py:587: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:8: error: Skipping analyzing
"codestory.llm.backoff": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.backoff import (
    ^
tests/unit/test_llm/test_backoff.py:14: error: Skipping analyzing
"codestory.llm.exceptions": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.exceptions import (
    ^
tests/unit/test_llm/test_backoff.py:20: error: Skipping analyzing
"codestory.llm.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.metrics import OperationType
    ^
tests/unit/test_llm/test_backoff.py:25: error: Function is missing a return
type annotation  [no-untyped-def]
    def mock_all_prometheus():
    ^
tests/unit/test_llm/test_backoff.py:46: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_get_retry_after(self):
        ^
tests/unit/test_llm/test_backoff.py:46: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:69: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_before_retry_callback(self):
        ^
tests/unit/test_llm/test_backoff.py:69: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:94: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_retry_on_openai_errors(self):
        ^
tests/unit/test_llm/test_backoff.py:138: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_exception_conversion_rate_limit(self):
        ^
tests/unit/test_llm/test_backoff.py:144: error: Function is missing a return
type annotation  [no-untyped-def]
                def test_func():
                ^
tests/unit/test_llm/test_backoff.py:144: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:156: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_exception_conversion_api_connection(self):
        ^
tests/unit/test_llm/test_backoff.py:162: error: Function is missing a return
type annotation  [no-untyped-def]
                def test_func():
                ^
tests/unit/test_llm/test_backoff.py:162: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:172: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_exception_conversion_timeout(self):
        ^
tests/unit/test_llm/test_backoff.py:180: error: Function is missing a return
type annotation  [no-untyped-def]
                    def __init__(self):
                    ^
tests/unit/test_llm/test_backoff.py:180: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:185: error: Function is missing a return
type annotation  [no-untyped-def]
                def test_func():
                ^
tests/unit/test_llm/test_backoff.py:185: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:205: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_exception_conversion_context_length(self):
        ^
tests/unit/test_llm/test_backoff.py:211: error: Function is missing a return
type annotation  [no-untyped-def]
                def test_func():
                ^
tests/unit/test_llm/test_backoff.py:211: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:225: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_retry_on_openai_errors_retry_after(self):
        ^
tests/unit/test_llm/test_backoff.py:232: error: Function is missing a return
type annotation  [no-untyped-def]
                def test_retry_after():
                ^
tests/unit/test_llm/test_backoff.py:232: note: Use "-> None" if function does not return a value
tests/unit/test_llm/test_backoff.py:236: error: "RateLimitError" has no
attribute "headers"  [attr-defined]
                    e.headers = {"retry-after": "30"}
                    ^~~~~~~~~
tests/unit/test_llm/test_backoff.py:249: error: Function is missing a return
type annotation  [no-untyped-def]
        def test_retry_on_openai_errors_async_creation(self):
        ^
src/codestory_summarizer/dependency_analyzer.py:9: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_summarizer/utils/content_extractor.py:10: error: Skipping
analyzing "codestory.graphdb.neo4j_connector": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_docgrapher/entity_linker.py:12: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_docgrapher/document_finder.py:14: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_docgrapher/utils/content_analyzer.py:12: error: Skipping
analyzing "codestory.llm.client": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.llm.client import create_client
    ^
src/codestory_docgrapher/utils/content_analyzer.py:13: error: Skipping
analyzing "codestory.llm.models": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.llm.models import ChatMessage, ChatRole
    ^
src/codestory_docgrapher/knowledge_graph.py:12: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_summarizer/step.py:15: error: Skipping analyzing "celery": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
    from celery import shared_task
    ^
src/codestory_summarizer/step.py:17: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
src/codestory_summarizer/step.py:18: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_summarizer/step.py:19: error: Skipping analyzing
"codestory.ingestion_pipeline.step": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import PipelineStep, StepStatus
    ^
src/codestory_summarizer/step.py:20: error: Skipping analyzing
"codestory.llm.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.client import create_client
    ^
src/codestory_summarizer/step.py:21: error: Skipping analyzing
"codestory.llm.models": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.models import ChatMessage, ChatRole
    ^
src/codestory_summarizer/step.py:118: error: Skipping analyzing
"celery.result": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
                from celery.result import AsyncResult
    ^
src/codestory_summarizer/step.py:207: error: Skipping analyzing
"celery.task.control": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
            from celery.task.control import revoke
    ^
src/codestory/cli/commands/service.py:702: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
            from codestory.config.settings import get_project_root
    ^
src/codestory/cli/commands/ingest.py:717: error: Statement is unreachable 
[unreachable]
                    console.print(f"[yellow]Warning: --eta value '{eta}' i...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/cli/commands/ingest.py:999: error: Skipping analyzing
"codestory.ingestion_pipeline.step": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
                from codestory.ingestion_pipeline.step import StepStatus
    ^
src/codestory_service/settings.py:13: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
src/codestory_docgrapher/step.py:13: error: Skipping analyzing "celery": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
    from celery import shared_task
    ^
src/codestory_docgrapher/step.py:15: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
src/codestory_docgrapher/step.py:16: error: Skipping analyzing
"codestory.graphdb.neo4j_connector": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_docgrapher/step.py:17: error: Skipping analyzing
"codestory.ingestion_pipeline.step": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import PipelineStep, StepStatus
    ^
src/codestory_docgrapher/step.py:112: error: Skipping analyzing
"celery.result": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
                from celery.result import AsyncResult
    ^
src/codestory_docgrapher/step.py:201: error: Skipping analyzing
"celery.task.control": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
            from celery.task.control import revoke
    ^
src/codestory/cli/main.py:8: error: Skipping analyzing "click_didyoumean":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from click_didyoumean import DYMGroup
    ^
src/codestory/cli/main.py:29: error: Skipping analyzing "codestory.config":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from codestory.config import get_settings
    ^
src/codestory/ingestion_pipeline/celery_app.py:9: error: Skipping analyzing
"celery": module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from celery import Celery
    ^
src/codestory/ingestion_pipeline/celery_app.py:34: error: Skipping analyzing
"kombu": module is installed, but missing library stubs or py.typed marker 
[import-untyped]
        from kombu import Queue
    ^
tests/unit/test_codestory_service/test_infrastructure.py:11: error: Skipping
analyzing "codestory.graphdb.exceptions": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.exceptions import ConnectionError, QueryError
    ^
tests/unit/test_codestory_service/test_infrastructure.py:12: error: Skipping
analyzing "codestory.graphdb.neo4j_connector": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
tests/unit/test_codestory_service/test_infrastructure.py:13: error: Skipping
analyzing "codestory.llm.exceptions": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.llm.exceptions import AuthenticationError
    ^
tests/unit/test_codestory_service/test_infrastructure.py:14: error: Skipping
analyzing "codestory_service.domain.graph": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.graph import CypherQuery, QueryType
    ^
tests/unit/test_codestory_service/test_infrastructure.py:15: error: Skipping
analyzing "codestory_service.domain.ingestion": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.ingestion import IngestionRequest, Inges...
    ^
tests/unit/test_codestory_service/test_infrastructure.py:16: error: Skipping
analyzing "codestory_service.infrastructure.celery_adapter": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.infrastructure.celery_adapter import CeleryAdap...
    ^
tests/unit/test_codestory_service/test_infrastructure.py:17: error: Skipping
analyzing "codestory_service.infrastructure.msal_validator": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.infrastructure.msal_validator import MSALValida...
    ^
tests/unit/test_codestory_service/test_infrastructure.py:18: error: Skipping
analyzing "codestory_service.infrastructure.neo4j_adapter": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.infrastructure.neo4j_adapter import Neo4jAdapte...
    ^
tests/unit/test_codestory_service/test_infrastructure.py:19: error: Skipping
analyzing "codestory_service.infrastructure.openai_adapter": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.infrastructure.openai_adapter import OpenAIAdap...
    ^
tests/unit/test_codestory_service/test_infrastructure.py:26: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_connector(self):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:38: error: Function is
missing a type annotation  [no-untyped-def]
        def adapter(self, mock_connector):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:43: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_health_check_healthy(self, adapter, mock_connector)...
        ^
tests/unit/test_codestory_service/test_infrastructure.py:50: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_health_check_unhealthy(self, mock_connector):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:60: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_execute_cypher_query_success(self, adapter, mock_co...
        ^
tests/unit/test_codestory_service/test_infrastructure.py:76: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_execute_cypher_query_error(self, adapter, mock_conn...
        ^
tests/unit/test_codestory_service/test_infrastructure.py:93: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_client(self):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:104: error: Skipping
analyzing "codestory.llm.models": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
            from codestory.llm.models import EmbeddingData, EmbeddingRespo...
    ^
tests/unit/test_codestory_service/test_infrastructure.py:124: error: Function
is missing a return type annotation  [no-untyped-def]
            async def mock_list():
            ^
tests/unit/test_codestory_service/test_infrastructure.py:134: error: Function
is missing a type annotation  [no-untyped-def]
            async def mock_create(**kwargs):
            ^
tests/unit/test_codestory_service/test_infrastructure.py:150: error: Function
is missing a type annotation  [no-untyped-def]
            async def mock_chat_create(**kwargs):
            ^
tests/unit/test_codestory_service/test_infrastructure.py:167: error: Function
is missing a type annotation  [no-untyped-def]
        def adapter(self, mock_client):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:172: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_health_check_healthy(self, adapter, mock_client):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:179: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_health_check_unhealthy(self, mock_client):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:195: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_health_check_azure_auth_error(self, mock_client):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:205: error: Function
is missing a return type annotation  [no-untyped-def]
            async def mock_list_error():
            ^
tests/unit/test_codestory_service/test_infrastructure.py:205: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_infrastructure.py:241: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_health_check_azure_auth_error_with_tenant(self, moc...
        ^
tests/unit/test_codestory_service/test_infrastructure.py:252: error: Function
is missing a return type annotation  [no-untyped-def]
            async def mock_list_error():
            ^
tests/unit/test_codestory_service/test_infrastructure.py:252: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_infrastructure.py:283: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_health_check_nginx_404_error(self, mock_client):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:297: error: Function
is missing a return type annotation  [no-untyped-def]
            async def mock_list_error():
            ^
tests/unit/test_codestory_service/test_infrastructure.py:297: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_infrastructure.py:328: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_create_embeddings_success(self, adapter, mock_clien...
        ^
tests/unit/test_codestory_service/test_infrastructure.py:337: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_create_embeddings_error(self, adapter, mock_client)...
        ^
tests/unit/test_codestory_service/test_infrastructure.py:356: error: Function
is missing a return type annotation  [no-untyped-def]
        def mock_app(self):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:379: error: Function
is missing a type annotation  [no-untyped-def]
        def adapter(self, mock_app):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:390: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_health_check_healthy(self, adapter, mock_app):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:397: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_health_check_unhealthy(self, mock_app):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:410: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_get_job_status(self, adapter, mock_app):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:419: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_start_ingestion(self, adapter, mock_app):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:431: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_parameter_filtering(self, adapter, mock_app):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:509: error: Function
is missing a return type annotation  [no-untyped-def]
        def validator(self):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:528: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_validate_token_auth_disabled(self, validator):
        ^
tests/unit/test_codestory_service/test_infrastructure.py:537: error: Function
is missing a type annotation  [no-untyped-def]
        async def test_create_dev_token(self, validator):
        ^
tests/unit/test_codestory_service/test_clear_database.py:9: error: Skipping
analyzing "codestory_service.application.graph_service": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.application.graph_service import GraphService
    ^
tests/unit/test_codestory_service/test_clear_database.py:10: error: Skipping
analyzing "codestory_service.domain.graph": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.graph import DatabaseClearRequest
    ^
tests/unit/test_codestory_service/test_clear_database.py:11: error: Skipping
analyzing "codestory_service.main": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_service.main import app
    ^
tests/unit/test_codestory_service/test_clear_database.py:15: error: Function is
missing a return type annotation  [no-untyped-def]
    def mock_graph_service():
    ^
tests/unit/test_codestory_service/test_clear_database.py:30: error: Function is
missing a type annotation  [no-untyped-def]
    def test_client(mock_graph_service):
    ^
tests/unit/test_codestory_service/test_clear_database.py:36: error: Function is
missing a return type annotation  [no-untyped-def]
        async def mock_is_admin():
        ^
tests/unit/test_codestory_service/test_clear_database.py:40: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_get_graph_service():
        ^
tests/unit/test_codestory_service/test_clear_database.py:45: error: Skipping
analyzing "codestory_service.infrastructure.msal_validator": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
        from codestory_service.infrastructure.msal_validator import is_adm...
    ^
tests/unit/test_codestory_service/test_clear_database.py:58: error: Function is
missing a type annotation  [no-untyped-def]
    def test_clear_database_success(test_client, mock_graph_service):
    ^
tests/unit/test_codestory_service/test_clear_database.py:80: error: Function is
missing a type annotation  [no-untyped-def]
    def test_clear_database_without_confirmation(test_client, mock_graph_s...
    ^
tests/unit/test_codestory_service/test_clear_database.py:97: error: Function is
missing a type annotation  [no-untyped-def]
    def test_clear_database_error(test_client, mock_graph_service):
    ^
tests/unit/test_codestory_service/test_application.py:12: error: Skipping
analyzing "codestory_service.application.auth_service": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.application.auth_service import AuthService
    ^
tests/unit/test_codestory_service/test_application.py:13: error: Skipping
analyzing "codestory_service.application.config_service": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.application.config_service import ConfigService
    ^
tests/unit/test_codestory_service/test_application.py:14: error: Skipping
analyzing "codestory_service.application.graph_service": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.application.graph_service import GraphService
    ^
tests/unit/test_codestory_service/test_application.py:15: error: Skipping
analyzing "codestory_service.application.ingestion_service": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from codestory_service.application.ingestion_service import IngestionS...
    ^
tests/unit/test_codestory_service/test_application.py:16: error: Skipping
analyzing "codestory_service.domain.auth": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.auth import LoginRequest, TokenResponse
    ^
tests/unit/test_codestory_service/test_application.py:17: error: Skipping
analyzing "codestory_service.domain.config": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.config import ConfigPatch
    ^
tests/unit/test_codestory_service/test_application.py:18: error: Skipping
analyzing "codestory_service.domain.graph": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.graph import (
    ^
tests/unit/test_codestory_service/test_application.py:24: error: Skipping
analyzing "codestory_service.domain.ingestion": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.ingestion import (
    ^
tests/unit/test_codestory_service/test_application.py:35: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_validator(self):
        ^
tests/unit/test_codestory_service/test_application.py:42: error: Function is
missing a type annotation  [no-untyped-def]
        def service(self, mock_validator):
        ^
tests/unit/test_codestory_service/test_application.py:51: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_login_success(self, service, mock_validator):
        ^
tests/unit/test_codestory_service/test_application.py:63: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_login_invalid_credentials(self, service):
        ^
tests/unit/test_codestory_service/test_application.py:74: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_login_prod_mode(self, service, mock_validator):
        ^
tests/unit/test_codestory_service/test_application.py:86: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_get_user_info(self, service):
        ^
tests/unit/test_codestory_service/test_application.py:108: error: Function is
missing a return type annotation  [no-untyped-def]
        def service(self):
        ^
tests/unit/test_codestory_service/test_application.py:117: error: Function is
missing a type annotation  [no-untyped-def]
        def test_get_config_dump(self, service):
        ^
tests/unit/test_codestory_service/test_application.py:137: error: Function is
missing a type annotation  [no-untyped-def]
        def test_get_config_schema(self, service):
        ^
tests/unit/test_codestory_service/test_application.py:187: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_update_config(self, service):
        ^
tests/unit/test_codestory_service/test_application.py:261: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_neo4j(self):
        ^
tests/unit/test_codestory_service/test_application.py:270: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_openai(self):
        ^
tests/unit/test_codestory_service/test_application.py:277: error: Function is
missing a type annotation  [no-untyped-def]
        def service(self, mock_neo4j, mock_openai):
        ^
tests/unit/test_codestory_service/test_application.py:282: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_execute_cypher_query(self, service, mock_neo4j):
        ^
tests/unit/test_codestory_service/test_application.py:297: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_execute_vector_search(self, service, mock_neo4j, mo...
        ^
tests/unit/test_codestory_service/test_application.py:307: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_answer_question(self, service, mock_neo4j, mock_ope...
        ^
tests/unit/test_codestory_service/test_application.py:352: error: Function is
missing a return type annotation  [no-untyped-def]
        def mock_celery(self):
        ^
tests/unit/test_codestory_service/test_application.py:364: error: Function is
missing a type annotation  [no-untyped-def]
        def service(self, mock_celery):
        ^
tests/unit/test_codestory_service/test_application.py:372: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_start_ingestion(self, service, mock_celery):
        ^
tests/unit/test_codestory_service/test_application.py:395: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_get_job_status(self, service, mock_celery):
        ^
tests/unit/test_codestory_service/test_application.py:405: error: Function is
missing a type annotation  [no-untyped-def]
        async def test_subscribe_to_progress(self, service):
        ^
tests/unit/test_codestory_service/test_application.py:410: error: Function is
missing a type annotation  [no-untyped-def]
            async def test_subscribe(websocket, job_id):
            ^
tests/unit/test_codestory_service/test_api.py:12: error: Skipping analyzing
"codestory_service.api": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_service.api import auth, config, graph, health, ingest
    ^
tests/unit/test_codestory_service/test_api.py:13: error: Skipping analyzing
"codestory_service.domain.auth": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory_service.domain.auth import LoginRequest
    ^
tests/unit/test_codestory_service/test_api.py:14: error: Skipping analyzing
"codestory_service.domain.graph": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory_service.domain.graph import (
    ^
tests/unit/test_codestory_service/test_api.py:19: error: Skipping analyzing
"codestory_service.domain.ingestion": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_service.domain.ingestion import (
    ^
tests/unit/test_codestory_service/test_api.py:30: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_service(self):
        ^
tests/unit/test_codestory_service/test_api.py:45: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_start_ingestion(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:68: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_get_job_status(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:82: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_cancel_job(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:104: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_service(self):
        ^
tests/unit/test_codestory_service/test_api.py:116: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_execute_cypher_query(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:137: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_execute_cypher_query_write_permission(self, mock_se...
        ^
tests/unit/test_codestory_service/test_api.py:158: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_execute_vector_search(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:178: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_service(self):
        ^
tests/unit/test_codestory_service/test_api.py:180: error: Skipping analyzing
"codestory_service.domain.config": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
            from codestory_service.domain.config import (
    ^
tests/unit/test_codestory_service/test_api.py:222: error: Function is missing a
type annotation  [no-untyped-def]
        def test_get_config(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:240: error: Function is missing a
type annotation  [no-untyped-def]
        def test_get_config_sensitive(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:260: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_update_config(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:286: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_service(self):
        ^
tests/unit/test_codestory_service/test_api.py:301: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_login(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:318: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_get_user_info(self, mock_service):
        ^
tests/unit/test_codestory_service/test_api.py:346: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_graph_service(self):
        ^
tests/unit/test_codestory_service/test_api.py:353: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_request(self):
        ^
tests/unit/test_codestory_service/test_api.py:358: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_generate_visualization(self, mock_request, mock_gra...
        ^
tests/unit/test_codestory_service/test_api.py:387: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_generate_visualization_with_filters(self, mock_requ...
        ^
tests/unit/test_codestory_service/test_api.py:420: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_generate_visualization_error(self, mock_request, mo...
        ^
tests/unit/test_codestory_service/test_api.py:449: error: Function is missing a
return type annotation  [no-untyped-def]
        def mock_adapters(self):
        ^
tests/unit/test_codestory_service/test_api.py:472: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_health_check_all_healthy(self, mock_adapters, monke...
        ^
tests/unit/test_codestory_service/test_api.py:478: error: Function is missing a
return type annotation  [no-untyped-def]
                async def ping(self):
                ^
tests/unit/test_codestory_service/test_api.py:481: error: Function is missing a
type annotation  [no-untyped-def]
                async def info(self, section=None):
                ^
tests/unit/test_codestory_service/test_api.py:484: error: Function is missing a
return type annotation  [no-untyped-def]
                async def close(self):
                ^
tests/unit/test_codestory_service/test_api.py:484: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_api.py:491: error: Function is missing a
type annotation  [no-untyped-def]
            async def mock_wait_for(coro, timeout):
            ^
tests/unit/test_codestory_service/test_api.py:513: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_health_check_one_unhealthy(self, mock_adapters, mon...
        ^
tests/unit/test_codestory_service/test_api.py:519: error: Function is missing a
return type annotation  [no-untyped-def]
                async def ping(self):
                ^
tests/unit/test_codestory_service/test_api.py:522: error: Function is missing a
type annotation  [no-untyped-def]
                async def info(self, section=None):
                ^
tests/unit/test_codestory_service/test_api.py:525: error: Function is missing a
return type annotation  [no-untyped-def]
                async def close(self):
                ^
tests/unit/test_codestory_service/test_api.py:525: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_api.py:532: error: Function is missing a
type annotation  [no-untyped-def]
            async def mock_wait_for(coro, timeout):
            ^
tests/unit/test_codestory_service/test_api.py:554: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_health_check_one_degraded(self, mock_adapters, monk...
        ^
tests/unit/test_codestory_service/test_api.py:560: error: Function is missing a
return type annotation  [no-untyped-def]
                async def ping(self):
                ^
tests/unit/test_codestory_service/test_api.py:563: error: Function is missing a
type annotation  [no-untyped-def]
                async def info(self, section=None):
                ^
tests/unit/test_codestory_service/test_api.py:566: error: Function is missing a
return type annotation  [no-untyped-def]
                async def close(self):
                ^
tests/unit/test_codestory_service/test_api.py:566: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_api.py:573: error: Function is missing a
type annotation  [no-untyped-def]
            async def mock_wait_for(coro, timeout):
            ^
tests/unit/test_codestory_service/test_api.py:595: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_health_check_with_auto_fix(self, mock_adapters, mon...
        ^
tests/unit/test_codestory_service/test_api.py:601: error: Function is missing a
return type annotation  [no-untyped-def]
                async def ping(self):
                ^
tests/unit/test_codestory_service/test_api.py:604: error: Function is missing a
type annotation  [no-untyped-def]
                async def info(self, section=None):
                ^
tests/unit/test_codestory_service/test_api.py:607: error: Function is missing a
return type annotation  [no-untyped-def]
                async def close(self):
                ^
tests/unit/test_codestory_service/test_api.py:607: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_api.py:614: error: Function is missing a
type annotation  [no-untyped-def]
            async def mock_wait_for(coro, timeout):
            ^
tests/unit/test_codestory_service/test_api.py:651: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_health_check_with_auto_fix_failure(self, mock_adapt...
        ^
tests/unit/test_codestory_service/test_api.py:657: error: Function is missing a
return type annotation  [no-untyped-def]
                async def ping(self):
                ^
tests/unit/test_codestory_service/test_api.py:660: error: Function is missing a
type annotation  [no-untyped-def]
                async def info(self, section=None):
                ^
tests/unit/test_codestory_service/test_api.py:663: error: Function is missing a
return type annotation  [no-untyped-def]
                async def close(self):
                ^
tests/unit/test_codestory_service/test_api.py:663: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_api.py:670: error: Function is missing a
type annotation  [no-untyped-def]
            async def mock_wait_for(coro, timeout):
            ^
tests/unit/test_codestory_service/test_api.py:710: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_health_check_with_auto_fix_timeout(self, mock_adapt...
        ^
tests/unit/test_codestory_service/test_api.py:716: error: Function is missing a
return type annotation  [no-untyped-def]
                async def ping(self):
                ^
tests/unit/test_codestory_service/test_api.py:719: error: Function is missing a
type annotation  [no-untyped-def]
                async def info(self, section=None):
                ^
tests/unit/test_codestory_service/test_api.py:722: error: Function is missing a
return type annotation  [no-untyped-def]
                async def close(self):
                ^
tests/unit/test_codestory_service/test_api.py:722: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_service/test_api.py:732: error: Function is missing a
type annotation  [no-untyped-def]
            async def mock_wait_for_with_timeout(coro, timeout):
            ^
tests/unit/test_codestory_mcp/test_tools.py:9: error: Skipping analyzing
"codestory_mcp.tools": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools import get_all_tools, get_tool, register_tool
    ^
tests/unit/test_codestory_mcp/test_tools.py:10: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import BaseTool, ToolError
    ^
tests/unit/test_codestory_mcp/test_tools.py:11: error: Skipping analyzing
"codestory_mcp.tools.path_to": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.path_to import PathToTool
    ^
tests/unit/test_codestory_mcp/test_tools.py:12: error: Skipping analyzing
"codestory_mcp.tools.search_graph": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.tools.search_graph import SearchGraphTool
    ^
tests/unit/test_codestory_mcp/test_tools.py:13: error: Skipping analyzing
"codestory_mcp.tools.similar_code": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.tools.similar_code import SimilarCodeTool
    ^
tests/unit/test_codestory_mcp/test_tools.py:14: error: Skipping analyzing
"codestory_mcp.tools.summarize_node": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.tools.summarize_node import SummarizeNodeTool
    ^
tests/unit/test_codestory_mcp/test_tools.py:20: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_register_tool(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:29: error: Function is missing a
type annotation  [no-untyped-def]
                async def __call__(self, params):
                ^
tests/unit/test_codestory_mcp/test_tools.py:39: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_get_tool_not_found(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:39: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_tools.py:44: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_get_all_tools(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:53: error: Function is missing a
type annotation  [no-untyped-def]
                async def __call__(self, params):
                ^
tests/unit/test_codestory_mcp/test_tools.py:61: error: Function is missing a
type annotation  [no-untyped-def]
                async def __call__(self, params):
                ^
tests/unit/test_codestory_mcp/test_tools.py:80: error: Function is missing a
return type annotation  [no-untyped-def]
        def graph_service(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:88: error: Function is missing a
return type annotation  [no-untyped-def]
        def metrics(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:96: error: Function is missing a
type annotation  [no-untyped-def]
        def tool(self, graph_service, metrics):
        ^
tests/unit/test_codestory_mcp/test_tools.py:100: error: Function is missing a
type annotation  [no-untyped-def]
        def test_init(self, graph_service, metrics):
        ^
tests/unit/test_codestory_mcp/test_tools.py:108: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_empty_query(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:117: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_invalid_limit(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:126: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_success(self, tool, graph_service):
        ^
tests/unit/test_codestory_mcp/test_tools.py:134: error: Function is missing a
type annotation  [no-untyped-def]
            def getitem(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:137: error: Function is missing a
type annotation  [no-untyped-def]
            def contains(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:146: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:171: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_search_error(self, tool, graph_service):
        ^
tests/unit/test_codestory_mcp/test_tools.py:174: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:191: error: Function is missing a
return type annotation  [no-untyped-def]
        def graph_service(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:199: error: Function is missing a
return type annotation  [no-untyped-def]
        def openai_service(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:209: error: Function is missing a
return type annotation  [no-untyped-def]
        def metrics(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:217: error: Function is missing a
type annotation  [no-untyped-def]
        def tool(self, graph_service, openai_service, metrics):
        ^
tests/unit/test_codestory_mcp/test_tools.py:221: error: Function is missing a
type annotation  [no-untyped-def]
        def test_init(self, graph_service, openai_service, metrics):
        ^
tests/unit/test_codestory_mcp/test_tools.py:230: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_empty_node_id(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:239: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_node_without_content(self, tool, graph_se...
        ^
tests/unit/test_codestory_mcp/test_tools.py:248: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:261: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_success(self, tool, graph_service, openai_serv...
        ^
tests/unit/test_codestory_mcp/test_tools.py:276: error: Need type annotation
for "find_node_future"  [var-annotated]
            find_node_future = asyncio.Future()
                               ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:280: error: Need type annotation
for "summary_future"  [var-annotated]
            summary_future = asyncio.Future()
                             ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:304: error: Function is missing a
return type annotation  [no-untyped-def]
        def graph_service(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:312: error: Function is missing a
return type annotation  [no-untyped-def]
        def openai_service(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:320: error: Function is missing a
return type annotation  [no-untyped-def]
        def metrics(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:328: error: Function is missing a
type annotation  [no-untyped-def]
        def tool(self, graph_service, openai_service, metrics):
        ^
tests/unit/test_codestory_mcp/test_tools.py:333: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_empty_from_id(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:342: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_empty_to_id(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:351: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_invalid_max_paths(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:360: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_success(self, tool, graph_service, openai_serv...
        ^
tests/unit/test_codestory_mcp/test_tools.py:368: error: Function is missing a
type annotation  [no-untyped-def]
            def node1_getitem(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:371: error: Function is missing a
type annotation  [no-untyped-def]
            def node1_contains(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:387: error: Function is missing a
type annotation  [no-untyped-def]
            def rel_getitem(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:390: error: Function is missing a
type annotation  [no-untyped-def]
            def rel_contains(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:403: error: Function is missing a
type annotation  [no-untyped-def]
            def node2_getitem(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:406: error: Function is missing a
type annotation  [no-untyped-def]
            def node2_contains(key):
            ^
tests/unit/test_codestory_mcp/test_tools.py:415: error: Need type annotation
for "paths_future"  [var-annotated]
            paths_future = asyncio.Future()
                           ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:419: error: Need type annotation
for "explanation_future"  [var-annotated]
            explanation_future = asyncio.Future()
                                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:455: error: Function is missing a
return type annotation  [no-untyped-def]
        def openai_service(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:463: error: Function is missing a
return type annotation  [no-untyped-def]
        def metrics(self):
        ^
tests/unit/test_codestory_mcp/test_tools.py:471: error: Function is missing a
type annotation  [no-untyped-def]
        def tool(self, openai_service, metrics):
        ^
tests/unit/test_codestory_mcp/test_tools.py:476: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_empty_code(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:485: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_with_invalid_limit(self, tool):
        ^
tests/unit/test_codestory_mcp/test_tools.py:494: error: Function is missing a
type annotation  [no-untyped-def]
        async def test_call_success(self, tool, openai_service):
        ^
tests/unit/test_codestory_mcp/test_tools.py:517: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:9: error: Skipping analyzing
"codestory_mcp.server": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.server import create_app, get_current_user, tool_ex...
    ^
tests/unit/test_codestory_mcp/test_server.py:10: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import BaseTool, ToolError
    ^
tests/unit/test_codestory_mcp/test_server.py:14: error: Function is missing a
return type annotation  [no-untyped-def]
    def mock_settings():
    ^
tests/unit/test_codestory_mcp/test_server.py:31: error: Function is missing a
return type annotation  [no-untyped-def]
    def mock_metrics():
    ^
tests/unit/test_codestory_mcp/test_server.py:40: error: Function is missing a
return type annotation  [no-untyped-def]
    def mock_entra_validator():
    ^
tests/unit/test_codestory_mcp/test_server.py:49: error: Function is missing a
return type annotation  [no-untyped-def]
    def mock_tool():
    ^
tests/unit/test_codestory_mcp/test_server.py:60: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_get_current_user_with_auth_disabled(mock_settings, mock...
    ^
tests/unit/test_codestory_mcp/test_server.py:79: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_get_current_user_without_auth_header(mock_settings, moc...
    ^
tests/unit/test_codestory_mcp/test_server.py:99: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_get_current_user_with_valid_token(mock_settings, mock_m...
    ^
tests/unit/test_codestory_mcp/test_server.py:109: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:124: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_get_current_user_with_invalid_token(
    ^
tests/unit/test_codestory_mcp/test_server.py:136: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:151: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_tool_executor_success(mock_metrics, mock_tool):
    ^
tests/unit/test_codestory_mcp/test_server.py:157: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:176: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_tool_executor_tool_not_found(mock_metrics, mock_tool):
    ^
tests/unit/test_codestory_mcp/test_server.py:198: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_tool_executor_tool_error(mock_metrics, mock_tool):
    ^
tests/unit/test_codestory_mcp/test_server.py:204: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:225: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_tool_executor_validation_error(mock_metrics, mock_tool)...
    ^
tests/unit/test_codestory_mcp/test_server.py:250: error: Function is missing a
type annotation  [no-untyped-def]
    async def test_tool_executor_unexpected_error(mock_metrics, mock_tool)...
    ^
tests/unit/test_codestory_mcp/test_server.py:256: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:274: error: Function is missing a
type annotation  [no-untyped-def]
    def test_create_app(mock_settings):
    ^
tests/unit/test_codestory_mcp/test_server.py:292: error: "BaseRoute" has no
attribute "path"  [attr-defined]
            route_paths = [route.path for route in app.routes]
                           ^~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:10: error: Skipping analyzing
"codestory_mcp.adapters.graph_service": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.graph_service import (
    ^
tests/unit/test_codestory_mcp/test_adapters.py:16: error: Skipping analyzing
"codestory_mcp.adapters.openai_service": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.openai_service import (
    ^
tests/unit/test_codestory_mcp/test_adapters.py:20: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import ToolError
    ^
tests/unit/test_codestory_mcp/test_adapters.py:26: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_init(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:26: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:34: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_get(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:34: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:42: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_items(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:42: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:51: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_getitem(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:51: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:64: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_init(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:64: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:74: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_get(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:74: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:82: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_items(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:82: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:93: error: Function is missing a
return type annotation  [no-untyped-def]
        def test_getitem(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:93: note: Use "-> None" if function does not return a value
tests/unit/test_codestory_mcp/test_adapters.py:107: error: Function is missing
a return type annotation  [no-untyped-def]
        def mock_settings(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:118: error: Function is missing
a return type annotation  [no-untyped-def]
        def mock_metrics(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:126: error: Function is missing
a return type annotation  [no-untyped-def]
        def mock_client(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:136: error: Function is missing
a type annotation  [no-untyped-def]
        def adapter(self, mock_settings, mock_metrics, mock_client):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:140: error: Function is missing
a type annotation  [no-untyped-def]
        def test_init(self, mock_settings, mock_metrics, mock_client):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:148: error: Function is missing
a type annotation  [no-untyped-def]
        def test_init_with_custom_url(self, mock_settings, mock_metrics, m...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:160: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_search_success(self, adapter, mock_client):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:185: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:213: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_search_error(self, adapter, mock_client, mock_metri...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:221: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:239: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_search_network_error(self, adapter, mock_client, mo...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:242: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:261: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_find_node_success(self, adapter, mock_client):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:279: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:298: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_find_node_not_found(self, adapter, mock_client, moc...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:306: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:324: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_find_paths_success(self, adapter, mock_client):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:359: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:392: error: Function is missing
a type annotation  [no-untyped-def]
        def test_get_graph_service_singleton(self, mock_settings):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:404: error: Function is missing
a return type annotation  [no-untyped-def]
        def mock_client(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:412: error: Function is missing
a return type annotation  [no-untyped-def]
        def mock_metrics(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:420: error: Function is missing
a type annotation  [no-untyped-def]
        def adapter(self, mock_client, mock_metrics):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:424: error: Function is missing
a type annotation  [no-untyped-def]
        def test_init(self, mock_client, mock_metrics):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:431: error: Function is missing
a type annotation  [no-untyped-def]
        def test_init_with_custom_client(self, mock_metrics):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:440: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_generate_code_summary_success(self, adapter, mock_c...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:448: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:481: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_generate_code_summary_error(self, adapter, mock_cli...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:484: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:503: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_generate_path_explanation_success(self, adapter, mo...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:511: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:562: error: Function is missing
a type annotation  [no-untyped-def]
        async def test_find_similar_code_success(self, adapter, mock_clien...
        ^
tests/unit/test_codestory_mcp/test_adapters.py:565: error: Need type annotation
for "embed_future"  [var-annotated]
            embed_future = asyncio.Future()
                           ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:587: error: Function is missing
a return type annotation  [no-untyped-def]
        def test_get_openai_service_singleton(self):
        ^
tests/unit/test_codestory_mcp/test_adapters.py:587: note: Use "-> None" if function does not return a value
src/codestory_service/infrastructure/openai_adapter.py:15: error: Skipping
analyzing "codestory.llm.client": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
    from codestory.llm.client import OpenAIClient
    ^
src/codestory_service/infrastructure/openai_adapter.py:16: error: Skipping
analyzing "codestory.llm.exceptions": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.llm.exceptions import (
    ^
src/codestory_service/infrastructure/openai_adapter.py:260: error: Skipping
analyzing "codestory.llm.models": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
                from codestory.llm.models import ChatMessage
    ^
src/codestory_service/infrastructure/neo4j_adapter.py:14: error: Skipping
analyzing "codestory.graphdb.exceptions": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.exceptions import (
    ^
src/codestory_service/infrastructure/neo4j_adapter.py:18: error: Skipping
analyzing "codestory.graphdb.neo4j_connector": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.graphdb.neo4j_connector import Neo4jConnector
    ^
src/codestory_service/infrastructure/celery_adapter.py:14: error: Skipping
analyzing "codestory.ingestion_pipeline.celery_app": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.celery_app import app as celery_app
    ^
src/codestory_service/infrastructure/celery_adapter.py:15: error: Skipping
analyzing "codestory.ingestion_pipeline.tasks": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.tasks import (
    ^
src/codestory_service/infrastructure/celery_adapter.py:177: error: Argument 1
to "int" has incompatible type "int | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                            eta = datetime.fromtimestamp(int(request.eta))
                                                             ^~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:181: error: Argument 1
to "int" has incompatible type "int | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                    countdown = int(request.countdown)
                                    ^~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:254: error: Argument 1
to "fromtimestamp" of "datetime" has incompatible type "Any | None"; expected
"float"  [arg-type]
    ...               started_at=datetime.fromtimestamp(result.get("start_tim...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:255: error: Argument 1
to "fromtimestamp" of "datetime" has incompatible type "Any | None"; expected
"float"  [arg-type]
    ...             completed_at=datetime.fromtimestamp(result.get("end_time"...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/config_service.py:15: error: Skipping
analyzing "codestory.config.settings": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings as get_core_setting...
    ^
src/codestory_service/application/config_service.py:16: error: Skipping
analyzing "codestory.config.writer": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory.config.writer import (
    ^
src/codestory_mcp/server.py:21: error: Skipping analyzing
"codestory_mcp.auth.entra_validator": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.auth.entra_validator import EntraValidator
    ^
src/codestory_mcp/server.py:22: error: Skipping analyzing
"codestory_mcp.tools": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools import get_all_tools, get_tool
    ^
src/codestory_mcp/server.py:23: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import ToolError
    ^
src/codestory_mcp/server.py:24: error: Skipping analyzing
"codestory_mcp.utils.config": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.config import get_mcp_settings
    ^
src/codestory_mcp/server.py:25: error: Skipping analyzing
"codestory_mcp.utils.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.metrics import get_metrics
    ^
src/codestory_mcp/tools/summarize_node.py:11: error: Skipping analyzing
"codestory_mcp.adapters.graph_service": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.graph_service import get_graph_service
    ^
src/codestory_mcp/tools/summarize_node.py:12: error: Skipping analyzing
"codestory_mcp.adapters.openai_service": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.openai_service import get_openai_service
    ^
src/codestory_mcp/tools/summarize_node.py:13: error: Skipping analyzing
"codestory_mcp.tools": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools import register_tool
    ^
src/codestory_mcp/tools/summarize_node.py:14: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import BaseTool, ToolError
    ^
src/codestory_mcp/tools/summarize_node.py:15: error: Skipping analyzing
"codestory_mcp.utils.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.metrics import get_metrics
    ^
src/codestory_mcp/tools/similar_code.py:11: error: Skipping analyzing
"codestory_mcp.adapters.openai_service": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.openai_service import get_openai_service
    ^
src/codestory_mcp/tools/similar_code.py:12: error: Skipping analyzing
"codestory_mcp.tools": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools import register_tool
    ^
src/codestory_mcp/tools/similar_code.py:13: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import BaseTool, ToolError
    ^
src/codestory_mcp/tools/similar_code.py:14: error: Skipping analyzing
"codestory_mcp.utils.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.metrics import get_metrics
    ^
src/codestory_mcp/tools/search_graph.py:11: error: Skipping analyzing
"codestory_mcp.adapters.graph_service": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.graph_service import get_graph_service
    ^
src/codestory_mcp/tools/search_graph.py:12: error: Skipping analyzing
"codestory_mcp.tools": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools import register_tool
    ^
src/codestory_mcp/tools/search_graph.py:13: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import BaseTool, ToolError
    ^
src/codestory_mcp/tools/search_graph.py:14: error: Skipping analyzing
"codestory_mcp.utils.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.metrics import get_metrics
    ^
src/codestory_mcp/tools/search_graph.py:15: error: Skipping analyzing
"codestory_mcp.utils.serializers": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.utils.serializers import NodeSerializer
    ^
src/codestory_mcp/tools/path_to.py:11: error: Skipping analyzing
"codestory_mcp.adapters.graph_service": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.graph_service import get_graph_service
    ^
src/codestory_mcp/tools/path_to.py:12: error: Skipping analyzing
"codestory_mcp.adapters.openai_service": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_mcp.adapters.openai_service import get_openai_service
    ^
src/codestory_mcp/tools/path_to.py:13: error: Skipping analyzing
"codestory_mcp.tools": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools import register_tool
    ^
src/codestory_mcp/tools/path_to.py:14: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import BaseTool, ToolError
    ^
src/codestory_mcp/tools/path_to.py:15: error: Skipping analyzing
"codestory_mcp.utils.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.metrics import get_metrics
    ^
src/codestory_mcp/tools/path_to.py:16: error: Skipping analyzing
"codestory_mcp.utils.serializers": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
    from codestory_mcp.utils.serializers import RelationshipSerializer
    ^
src/codestory_mcp/adapters/openai_service.py:13: error: Skipping analyzing
"codestory.llm.client": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.client import OpenAIClient
    ^
src/codestory_mcp/adapters/openai_service.py:14: error: Skipping analyzing
"codestory.llm.models": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.llm.models import ChatCompletionRequest, ChatMessage
    ^
src/codestory_mcp/adapters/openai_service.py:15: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import ToolError
    ^
src/codestory_mcp/adapters/openai_service.py:16: error: Skipping analyzing
"codestory_mcp.utils.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.metrics import get_metrics
    ^
src/codestory_mcp/adapters/graph_service.py:15: error: Skipping analyzing
"codestory_mcp.tools.base": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.tools.base import ToolError
    ^
src/codestory_mcp/adapters/graph_service.py:16: error: Skipping analyzing
"codestory_mcp.utils.config": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.config import get_mcp_settings
    ^
src/codestory_mcp/adapters/graph_service.py:17: error: Skipping analyzing
"codestory_mcp.utils.metrics": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory_mcp.utils.metrics import get_metrics
    ^
src/codestory/mcp/main.py:8: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from codestory.config.settings import get_settings
    ^
src/codestory/ingestion_pipeline/tasks.py:14: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        psutil = None
                 ^~~~
src/codestory/ingestion_pipeline/tasks.py:16: error: Skipping analyzing
"celery": module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from celery import chain
    ^
src/codestory/ingestion_pipeline/tasks.py:17: error: Skipping analyzing
"celery.result": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from celery.result import AsyncResult
    ^
src/codestory/ingestion_pipeline/tasks.py:93: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
        from codestory.config.settings import get_settings
    ^
src/codestory/ingestion_pipeline/tasks.py:466: error: Skipping analyzing
"celery.exceptions": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
                from celery.exceptions import CeleryError
    ^
src/codestory_service/application/ingestion_service.py:194: error: "None" has
no attribute "set"  [attr-defined]
                    await self.redis.set(
                          ^~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:206: error: Skipping
analyzing "codestory.ingestion_pipeline.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
                    from codestory.ingestion_pipeline.step import StepStat...
    ^
src/codestory_service/application/ingestion_service.py:394: error: Skipping
analyzing "codestory.config.settings": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
            from codestory.config.settings import get_settings
    ^
src/codestory_service/application/ingestion_service.py:395: error: Skipping
analyzing "codestory.ingestion_pipeline.resource_manager": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
            from codestory.ingestion_pipeline.resource_manager import Reso...
    ^
src/codestory_service/application/ingestion_service.py:433: error: Function is
missing a type annotation  [no-untyped-def]
            def summary_stats(values):
            ^
src/codestory_service/application/ingestion_service.py:461: error: "None" has
no attribute "scan_iter"  [attr-defined]
            async for key in self.redis.scan_iter(match=pattern):
                             ^~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:462: error: "None" has
no attribute "get"  [attr-defined]
                data = await self.redis.get(key)
                             ^~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:473: error: "None" has
no attribute "get"  [attr-defined]
                            dep_event = await self.redis.get(status_key)
                                              ^~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:486: error: "None" has
no attribute "delete"  [attr-defined]
                            await self.redis.delete(key)
                                  ^~~~~~~~~~~~~~~~~
src/codestory_service/api/health.py:299: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
                            from codestory.config.settings import get_sett...
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:17: error:
Skipping analyzing "codestory.ingestion_pipeline.manager": module is installed,
but missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.manager import PipelineManager
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:18: error:
Skipping analyzing "codestory.ingestion_pipeline.step": module is installed, but
missing library stubs or py.typed marker  [import-untyped]
    from codestory.ingestion_pipeline.step import StepStatus
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:19: error:
Skipping analyzing "codestory_blarify.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_blarify.step import BlarifyStep
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:20: error:
Skipping analyzing "codestory_docgrapher.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_docgrapher.step import DocumentationGrapherStep
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:21: error:
Skipping analyzing "codestory_filesystem.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_filesystem.step import FileSystemStep
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:22: error:
Skipping analyzing "codestory_summarizer.step": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from codestory_summarizer.step import SummarizerStep
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:399: error:
Function is missing a return type annotation  [no-untyped-def]
    def test_error_handling_in_dependency_chain():
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:428: error:
Function is missing a type annotation  [no-untyped-def]
        def check_dependencies(step_name, repo_path):
        ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:490: error:
Function is missing a type annotation  [no-untyped-def]
    async def test_job_dependency_orchestration(sample_repo):
    ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:499: error:
Function is missing a type annotation  [no-untyped-def]
            async def start_ingestion(self, request):
            ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:505: error:
Argument "started_at" to "IngestionStarted" has incompatible type "None";
expected "datetime"  [arg-type]
                    started_at=None,
                               ^~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:510: error:
Function is missing a type annotation  [no-untyped-def]
            async def get_job_status(self, job_id):
            ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:530: error:
Function is missing a type annotation  [no-untyped-def]
            async def list_jobs(self, *args, **kwargs):
            ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:533: error:
Argument 1 to "IngestionService" has incompatible type "MockCeleryAdapter";
expected "CeleryAdapter"  [arg-type]
        service = IngestionService(MockCeleryAdapter())
                                   ^~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "branch" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "config" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "options" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "created_by" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "description" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "tags" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "priority" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "eta" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "countdown" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:537: error:
Argument "source_type" to "IngestionRequest" has incompatible type "str";
expected "IngestionSourceType"  [arg-type]
            source_type="local_path",
                        ^~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "branch" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "config" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "options" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "created_by" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "description" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "tags" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "priority" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "eta" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "countdown" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:547: error:
Argument "source_type" to "IngestionRequest" has incompatible type "str";
expected "IngestionSourceType"  [arg-type]
            source_type="local_path",
                        ^~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:570: error:
Statement is unreachable  [unreachable]
            waiting_key = f"codestory:ingestion:waiting:{job_b_id}"
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/main.py:159: error: Skipping analyzing
"codestory_service.domain.graph": module is installed, but missing library stubs
or py.typed marker  [import-untyped]
                from codestory_service.domain.graph import (
    ^
src/codestory_service/main.py:221: error: Skipping analyzing
"codestory.config.settings": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
        from codestory.config.settings import get_settings
    ^
Found 1029 errors in 122 files (checked 222 source files)
