src/codestory/graphdb/schema.py:124: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def create_custom_vector_index(
    ^
src/codestory/graphdb/schema.py:308: error: Returning Any from function
declared to return "dict[str, dict[str, bool]]"  [no-any-return]
            return verification_results
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/utils.py:19: error: Library stubs not
installed for "pkg_resources"  [import-untyped]
        import pkg_resources
    ^
src/codestory/ingestion_pipeline/utils.py:19: note: Hint: "python3 -m pip install types-setuptools"
src/codestory/ingestion_pipeline/utils.py:19: note: (or run "mypy --install-types" to install all missing stub packages)
src/codestory/ingestion_pipeline/utils.py:229: error: "EntryPoints" has no
attribute "get"  [attr-defined]
                    entry_points_list = eps.get(entry_point_group, [])
                                        ^~~~~~~
src/codestory/graphdb/metrics.py:54: error: "Collector" has no attribute "name"
 [attr-defined]
                if metric.name == f"{METRIC_PREFIX}_query_duration_seconds...
                   ^~~~~~~~~~~
src/codestory/graphdb/metrics.py:55: error: Incompatible types in assignment
(expression has type "Collector", variable has type "float | None") 
[assignment]
                    QUERY_DURATION = metric  # TODO: Fix type compatibilit...
                                     ^~~~~~
src/codestory/graphdb/metrics.py:60: error: Incompatible types in assignment
(expression has type "Histogram", variable has type "float | None") 
[assignment]
                QUERY_DURATION = Histogram(  # TODO: Fix type compatibilit...
                                 ^
src/codestory/graphdb/metrics.py:72: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
                    def observe(self, value: Any, **kwargs) -> Any:
                    ^
src/codestory/graphdb/metrics.py:80: error: No return value expected 
[return-value]
                                return self
                                ^~~~~~~~~~~
src/codestory/graphdb/metrics.py:87: error: Incompatible types in assignment
(expression has type "DummyHistogram", variable has type "float | None") 
[assignment]
                QUERY_DURATION = DummyHistogram()  # TODO: Fix type compat...
                                 ^~~~~~~~~~~~~~~~
src/codestory/graphdb/metrics.py:134: error: "Collector" has no attribute
"name"  [attr-defined]
                if metric.name == f"{METRIC_PREFIX}_vector_search_duration...
                   ^~~~~~~~~~~
src/codestory/graphdb/metrics.py:135: error: Incompatible types in assignment
(expression has type "Collector", variable has type "float | None") 
[assignment]
                    VECTOR_SEARCH_DURATION = metric  # TODO: Fix type comp...
                                             ^~~~~~
src/codestory/graphdb/metrics.py:140: error: Incompatible types in assignment
(expression has type "Histogram", variable has type "float | None") 
[assignment]
                VECTOR_SEARCH_DURATION = Histogram(  # TODO: Fix type comp...
                                         ^
src/codestory/graphdb/metrics.py:149: error: Incompatible types in assignment
(expression has type "DummyHistogram", variable has type "float | None") 
[assignment]
                VECTOR_SEARCH_DURATION = DummyHistogram()  # TODO: Fix typ...
                                         ^~~~~~~~~~~~~~~~
src/codestory/graphdb/metrics.py:181: error: Item "float" of "float | None" has
no attribute "labels"  [union-attr]
                    QUERY_DURATION.labels(query_type=query_type.value).obs...
                    ^~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/metrics.py:181: error: Item "None" of "float | None" has
no attribute "labels"  [union-attr]
                    QUERY_DURATION.labels(query_type=query_type.value).obs...
                    ^~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/metrics.py:239: error: Item "float" of "float | None" has
no attribute "labels"  [union-attr]
            VECTOR_SEARCH_DURATION.labels(node_label=node_label).observe(d...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/metrics.py:239: error: Item "None" of "float | None" has
no attribute "labels"  [union-attr]
            VECTOR_SEARCH_DURATION.labels(node_label=node_label).observe(d...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/utils/serializers.py:40: error: Value of type
"frozenset[str]" is not indexable  [index]
                "type": node.labels[0] if node.labels else "Unknown",
                        ^~~~~~~~~~~~~~
src/codestory_mcp/utils/serializers.py:139: error: Item "None" of "Node | None"
has no attribute "id"  [union-attr]
                "start_node_id": str(relationship.start_node.id),
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/utils/serializers.py:140: error: Item "None" of "Node | None"
has no attribute "id"  [union-attr]
                "end_node_id": str(relationship.end_node.id),
                                   ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/utils/serializers.py:155: error: Incompatible types in
assignment (expression has type "dict[Any, Any]", target has type "str") 
[assignment]
            result["properties"] = properties  # TODO: Fix type compatibil...
                                   ^~~~~~~~~~
src/codestory_mcp/utils/serializers.py:192: error: Argument 1 to "to_dict" of
"NodeSerializer" has incompatible type "Node | Relationship"; expected "Node" 
[arg-type]
                                    element,
                                    ^~~~~~~
src/codestory_mcp/utils/serializers.py:204: error: Argument 1 to "to_dict" of
"RelationshipSerializer" has incompatible type "Node | Relationship"; expected
"Relationship"  [arg-type]
                                    element, include_rel_properties, exclu...
                                    ^~~~~~~
tests/unit/test_llm/test_metrics.py:14: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def mock_all_metrics_objects() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_graphdb/test_schema.py:20: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def mock_prometheus_metrics() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_docker_connectivity.py:22: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def worker_container(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_demos/test_mcp_demo.py:17: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def setup_mcp() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_demos/test_cli_demo.py:15: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def setup_test_env() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_demos/test_gui_demo.py:17: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def setup_gui() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/models.py:90: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:103: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:127: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:141: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:153: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:165: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:179: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:193: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:206: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:216: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:228: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:238: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:248: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
src/codestory/graphdb/models.py:258: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, **data) -> None:
        ^
tests/unit/test_llm/test_llm_models.py:24: error: Statement is unreachable 
[unreachable]
        assert ChatRole.USER == "user"
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_llm_models.py:46: error: Argument 1 to "ChatMessage"
has incompatible type "**dict[str, str]"; expected "ChatRole"  [arg-type]
        message = ChatMessage(**message_dict)
                                ^~~~~~~~~~~~
tests/unit/test_llm/test_llm_models.py:73: error: Item "None" of
"ChatFunctionCall | None" has no attribute "name"  [union-attr]
        assert message.function_call.name == "get_weather"
               ^~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_llm_models.py:203: error: Item "None" of
"UsageInfo | None" has no attribute "total_tokens"  [union-attr]
        assert response.usage.total_tokens == 18
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_llm_models.py:225: error: Item "None" of
"UsageInfo | None" has no attribute "prompt_tokens"  [union-attr]
        assert response.usage.prompt_tokens == 15
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_graphdb/test_models.py:30: error: Statement is unreachable 
[unreachable]
        assert NodeType.DIRECTORY == "Directory"
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_graphdb/test_models.py:42: error: Statement is unreachable 
[unreachable]
        assert RelationshipType.IMPORTS == "IMPORTS"
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_domain_models.py:94: error: Argument
"source" to "ConfigMetadata" has incompatible type "str"; expected
"ConfigSource"  [arg-type]
                source="env",
                       ^~~~~
tests/unit/test_codestory_service/test_domain_models.py:106: error: Argument
"source" to "ConfigMetadata" has incompatible type "str"; expected
"ConfigSource"  [arg-type]
                source="config_file",
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_service/test_domain_models.py:120: error: Argument
"source" to "ConfigMetadata" has incompatible type "str"; expected
"ConfigSource"  [arg-type]
                source="env",
                       ^~~~~
tests/unit/test_codestory_service/test_domain_models.py:136: error: Argument
"source" to "ConfigMetadata" has incompatible type "str"; expected
"ConfigSource"  [arg-type]
                source="config_file",
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_service/test_domain_models.py:148: error: List item 0
has incompatible type "dict[str, object]"; expected "ConfigPatchItem" 
[list-item]
                    {"key": "general.debug", "value": True},
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_domain_models.py:149: error: List item 1
has incompatible type "dict[str, str]"; expected "ConfigPatchItem"  [list-item]
                    {"key": "service.title", "value": "New Title"},
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "branch" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "dependencies" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "config" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "created_by" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "description" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "tags" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "priority" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "eta" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:214: error: Missing
named argument "countdown" for "IngestionRequest"  [call-arg]
                valid_request = IngestionRequest(
                                ^
tests/unit/test_codestory_service/test_domain_models.py:222: error: Unsupported
right operand type for in ("dict[str, Any] | None")  [operator]
                assert "ignore_patterns" in valid_request.options
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_domain_models.py:223: error: Unsupported
right operand type for in ("list[str] | None")  [operator]
                assert "filesystem" in valid_request.steps
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "branch" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "steps" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "dependencies" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "config" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "options" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "created_by" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "description" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "tags" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "priority" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "eta" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:227: error: Missing
named argument "countdown" for "IngestionRequest"  [call-arg]
                    IngestionRequest(source_type=IngestionSourceType.LOCAL...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "branch" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "steps" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "dependencies" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "config" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "options" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "created_by" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "description" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "tags" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "priority" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "eta" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:231: error: Missing
named argument "countdown" for "IngestionRequest"  [call-arg]
                    IngestionRequest(
                    ^
tests/unit/test_codestory_service/test_domain_models.py:252: error: Missing
named argument "error" for "StepProgress"  [call-arg]
            progress = StepProgress(
                       ^
tests/unit/test_codestory_service/test_domain_models.py:252: error: Missing
named argument "completed_at" for "StepProgress"  [call-arg]
            progress = StepProgress(
                       ^
tests/unit/test_codestory_service/test_domain_models.py:252: error: Missing
named argument "duration" for "StepProgress"  [call-arg]
            progress = StepProgress(
                       ^
tests/unit/test_codestory_service/test_domain_models.py:252: error: Missing
named argument "cpu_percent" for "StepProgress"  [call-arg]
            progress = StepProgress(
                       ^
tests/unit/test_codestory_service/test_domain_models.py:252: error: Missing
named argument "memory_mb" for "StepProgress"  [call-arg]
            progress = StepProgress(
                       ^
tests/unit/test_codestory_service/test_domain_models.py:252: error: Missing
named argument "retry_count" for "StepProgress"  [call-arg]
            progress = StepProgress(
                       ^
tests/unit/test_codestory_service/test_domain_models.py:252: error: Missing
named argument "last_error" for "StepProgress"  [call-arg]
            progress = StepProgress(
                       ^
src/codestory/llm/backoff.py:45: error: Item "None" of "Future | None" has no
attribute "exception"  [union-attr]
        exception = retry_state.outcome.exception()
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/backoff.py:59: error: Item "None" of "Future | None" has no
attribute "exception"  [union-attr]
        exception = retry_state.outcome.exception()
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/backoff.py:65: error: Item "None" of "RetryAction | None" has
no attribute "sleep"  [union-attr]
        wait_time = retry_state.next_action.sleep
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_backoff.py:25: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def mock_all_prometheus() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_backoff.py:236: error: "RateLimitError" has no
attribute "headers"  [attr-defined]
                    e.headers = {"retry-after": "30"}
                    ^~~~~~~~~
src/codestory_docgrapher/parsers/docstring_parser.py:91: error: Name
"docstrings" already defined on line 84  [no-redef]
                docstrings: list[Any] = [][no-redef]
                ^
src/codestory_docgrapher/parsers/docstring_parser.py:91: error: Name "no" is
not defined  [name-defined]
                docstrings: list[Any] = [][no-redef]
                                           ^
src/codestory_docgrapher/parsers/docstring_parser.py:91: error: Name "redef" is
not defined  [name-defined]
                docstrings: list[Any] = [][no-redef]
                                              ^
src/codestory_docgrapher/parsers/docstring_parser.py:464: error: Name
"param_section" already defined on line 445  [no-redef]
                        param_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:464: error: Name "no" is
not defined  [name-defined]
                        param_section: list[Any] = [][no-redef]
                                                      ^
src/codestory_docgrapher/parsers/docstring_parser.py:464: error: Name "redef"
is not defined  [name-defined]
                        param_section: list[Any] = [][no-redef]
                                                         ^
src/codestory_docgrapher/parsers/docstring_parser.py:488: error: Name
"param_section" already defined on line 445  [no-redef]
                        param_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:488: error: Name "no" is
not defined  [name-defined]
                        param_section: list[Any] = [][no-redef]
                                                      ^
src/codestory_docgrapher/parsers/docstring_parser.py:488: error: Name "redef"
is not defined  [name-defined]
                        param_section: list[Any] = [][no-redef]
                                                         ^
src/codestory_docgrapher/parsers/docstring_parser.py:542: error: Name
"return_section" already defined on line 523  [no-redef]
                        return_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:542: error: Name "no" is
not defined  [name-defined]
                        return_section: list[Any] = [][no-redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:542: error: Name "redef"
is not defined  [name-defined]
                        return_section: list[Any] = [][no-redef]
                                                          ^
src/codestory_docgrapher/parsers/docstring_parser.py:566: error: Name
"return_section" already defined on line 523  [no-redef]
                        return_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:566: error: Name "no" is
not defined  [name-defined]
                        return_section: list[Any] = [][no-redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:566: error: Name "redef"
is not defined  [name-defined]
                        return_section: list[Any] = [][no-redef]
                                                          ^
src/codestory_docgrapher/parsers/docstring_parser.py:620: error: Name
"raises_section" already defined on line 601  [no-redef]
                        raises_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:620: error: Name "no" is
not defined  [name-defined]
                        raises_section: list[Any] = [][no-redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:620: error: Name "redef"
is not defined  [name-defined]
                        raises_section: list[Any] = [][no-redef]
                                                          ^
src/codestory_docgrapher/parsers/docstring_parser.py:644: error: Name
"raises_section" already defined on line 601  [no-redef]
                        raises_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:644: error: Name "no" is
not defined  [name-defined]
                        raises_section: list[Any] = [][no-redef]
                                                       ^
src/codestory_docgrapher/parsers/docstring_parser.py:644: error: Name "redef"
is not defined  [name-defined]
                        raises_section: list[Any] = [][no-redef]
                                                          ^
src/codestory_docgrapher/parsers/docstring_parser.py:698: error: Name
"example_section" already defined on line 679  [no-redef]
                        example_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:698: error: Name "no" is
not defined  [name-defined]
                        example_section: list[Any] = [][no-redef]
                                                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:698: error: Name "redef"
is not defined  [name-defined]
                        example_section: list[Any] = [][no-redef]
                                                           ^
src/codestory_docgrapher/parsers/docstring_parser.py:722: error: Name
"example_section" already defined on line 679  [no-redef]
                        example_section: list[Any] = [][no-redef]
                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:722: error: Name "no" is
not defined  [name-defined]
                        example_section: list[Any] = [][no-redef]
                                                        ^
src/codestory_docgrapher/parsers/docstring_parser.py:722: error: Name "redef"
is not defined  [name-defined]
                        example_section: list[Any] = [][no-redef]
                                                           ^
src/codestory_mcp/utils/config.py:107: error: Returning Any from function
declared to return "str"  [no-any-return]
                return client_id
                ^~~~~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument "port" for
"MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument "host" for
"MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument "workers"
for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"azure_tenant_id" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"azure_client_id" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"auth_enabled" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"code_story_service_url" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"api_token_issuer" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"api_audience" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"required_scopes" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"cors_origins" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"enable_grpc" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"prometheus_metrics_path" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"enable_opentelemetry" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"openapi_url" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument "docs_url"
for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument
"redoc_url" for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory_mcp/utils/config.py:120: error: Missing named argument "debug"
for "MCPSettings"  [call-arg]
        return MCPSettings()  # TODO: Pydantic BaseSettings with defaults
               ^~~~~~~~~~~~~
src/codestory/config/settings.py:499: error: Incompatible types in assignment
(expression has type "SecretStr | None", variable has type "SecretStr") 
[assignment]
                            SecretStr(secret.value) if secret.value is not...
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/config/settings.py:505: error: Item "None" of "SecretStr | None"
has no attribute "get_secret_value"  [union-attr]
                if not self.openai.api_key.get_secret_value():
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_settings.py:30: error: Missing named argument
"connection_timeout" for "Neo4jSettings"  [call-arg]
        neo4j = Neo4jSettings(
                ^
tests/unit/test_settings.py:30: error: Missing named argument
"max_connection_pool_size" for "Neo4jSettings"  [call-arg]
        neo4j = Neo4jSettings(
                ^
tests/unit/test_settings.py:30: error: Missing named argument
"connection_acquisition_timeout" for "Neo4jSettings"  [call-arg]
        neo4j = Neo4jSettings(
                ^
tests/unit/test_settings.py:33: error: Argument "password" to "Neo4jSettings"
has incompatible type "str"; expected "SecretStr"  [arg-type]
            password="password",
                     ^~~~~~~~~~
tests/unit/test_settings.py:43: error: Missing named argument "tenant_id" for
"OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:43: error: Missing named argument "subscription_id"
for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:43: error: Missing named argument "api_version" for
"OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:43: error: Missing named argument "max_retries" for
"OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:43: error: Missing named argument
"retry_backoff_factor" for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:43: error: Missing named argument "temperature" for
"OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:43: error: Missing named argument "max_tokens" for
"OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:43: error: Missing named argument "timeout" for
"OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/unit/test_settings.py:73: error: Missing named argument
"resource_max_tokens" for "IngestionSettings"  [call-arg]
        ingestion = IngestionSettings(
                    ^
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"port" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"host" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"workers" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"azure_tenant_id" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"azure_client_id" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"auth_enabled" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"code_story_service_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"api_token_issuer" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"api_audience" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"required_scopes" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"cors_origins" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"enable_grpc" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"prometheus_metrics_path" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"enable_opentelemetry" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"openapi_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"docs_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"redoc_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:14: error: Missing named argument
"debug" for "MCPSettings"  [call-arg]
        settings = MCPSettings()
                   ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"port" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"host" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"workers" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"azure_tenant_id" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"azure_client_id" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"auth_enabled" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"api_token_issuer" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"required_scopes" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"cors_origins" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"enable_grpc" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"prometheus_metrics_path" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"enable_opentelemetry" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"openapi_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"docs_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"redoc_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:36: error: Missing named argument
"debug" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"port" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"host" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"workers" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"azure_tenant_id" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"auth_enabled" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"api_token_issuer" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"api_audience" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"required_scopes" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"cors_origins" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"enable_grpc" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"prometheus_metrics_path" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"enable_opentelemetry" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"openapi_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"docs_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"redoc_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:42: error: Missing named argument
"debug" for "MCPSettings"  [call-arg]
        settings = MCPSettings(
                   ^
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"port" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"host" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"workers" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"azure_tenant_id" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"azure_client_id" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"auth_enabled" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"api_token_issuer" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"api_audience" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"required_scopes" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"cors_origins" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"enable_grpc" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"prometheus_metrics_path" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"enable_opentelemetry" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"openapi_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"docs_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"redoc_url" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:48: error: Missing named argument
"debug" for "MCPSettings"  [call-arg]
        settings = MCPSettings(code_story_service_url="http://localhost:80...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"port" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"host" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"workers" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"azure_tenant_id" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"azure_client_id" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"auth_enabled" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"code_story_service_url" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"api_token_issuer" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"api_audience" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"required_scopes" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"cors_origins" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"enable_grpc" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"prometheus_metrics_path" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"enable_opentelemetry" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"openapi_url" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"docs_url" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"redoc_url" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_config.py:86: error: Missing named argument
"debug" for "MCPSettings"  [call-arg]
            settings = MCPSettings()
                       ^~~~~~~~~~~~~
tests/integration/test_config.py:42: error: Missing named argument
"connection_timeout" for "Neo4jSettings"  [call-arg]
        neo4j = Neo4jSettings(
                ^
tests/integration/test_config.py:42: error: Missing named argument
"max_connection_pool_size" for "Neo4jSettings"  [call-arg]
        neo4j = Neo4jSettings(
                ^
tests/integration/test_config.py:42: error: Missing named argument
"connection_acquisition_timeout" for "Neo4jSettings"  [call-arg]
        neo4j = Neo4jSettings(
                ^
tests/integration/test_config.py:45: error: Argument "password" to
"Neo4jSettings" has incompatible type "str"; expected "SecretStr"  [arg-type]
            password="password",
                     ^~~~~~~~~~
tests/integration/test_config.py:57: error: Missing named argument "tenant_id"
for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:57: error: Missing named argument
"subscription_id" for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:57: error: Missing named argument
"api_version" for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:57: error: Missing named argument
"max_retries" for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:57: error: Missing named argument
"retry_backoff_factor" for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:57: error: Missing named argument
"temperature" for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:57: error: Missing named argument "max_tokens"
for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:57: error: Missing named argument "timeout"
for "OpenAISettings"  [call-arg]
        openai = OpenAISettings(
                 ^
tests/integration/test_config.py:58: error: Argument "api_key" to
"OpenAISettings" has incompatible type "str"; expected "SecretStr | None" 
[arg-type]
            api_key="sk-test-key-openai",  # Fake key for testing
                    ^~~~~~~~~~~~~~~~~~~~
tests/integration/test_config.py:67: error: Argument "api_key" to
"AzureOpenAISettings" has incompatible type "str"; expected "SecretStr | None" 
[arg-type]
            api_key="test-azure-key",  # Fake key for testing
                    ^~~~~~~~~~~~~~~~
tests/integration/test_config.py:77: error: Unexpected keyword argument
"environment" for "ServiceSettings"  [call-arg]
        service = ServiceSettings(
                  ^
tests/integration/test_config.py:88: error: Missing named argument
"resource_max_tokens" for "IngestionSettings"  [call-arg]
        ingestion = IngestionSettings(
                    ^
tests/integration/test_config.py:130: error: Argument "client_secret" to
"AzureSettings" has incompatible type "str"; expected "SecretStr | None" 
[arg-type]
            client_secret="test-client-secret",
                          ^~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:34: error:
Missing named argument "connection_timeout" for "Neo4jSettings"  [call-arg]
    TEST_NEO4J_SETTINGS = Neo4jSettings(
                          ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:34: error:
Missing named argument "max_connection_pool_size" for "Neo4jSettings" 
[call-arg]
    TEST_NEO4J_SETTINGS = Neo4jSettings(
                          ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:34: error:
Missing named argument "connection_acquisition_timeout" for "Neo4jSettings" 
[call-arg]
    TEST_NEO4J_SETTINGS = Neo4jSettings(
                          ^
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:37: error:
Argument "password" to "Neo4jSettings" has incompatible type "str"; expected
"SecretStr"  [arg-type]
        password=TEST_PASSWORD,
                 ^~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_filesystem_direct.py:44: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def sample_repo() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument "title"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument "summary"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument "version"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"api_prefix" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument "docs_url"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"openapi_url" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"redoc_url" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"cors_origins" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"cors_allow_credentials" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"cors_allow_methods" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"cors_allow_headers" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"auth_enabled" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"jwt_secret" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"jwt_algorithm" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"jwt_expiration" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"websocket_heartbeat" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"rate_limit_enabled" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"rate_limit_requests" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"rate_limit_window" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"metrics_enabled" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"metrics_route" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument "dev_mode"
for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"max_request_size" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory_service/settings.py:147: error: Missing named argument
"response_timeout" for "ServiceSettings"  [call-arg]
        return ServiceSettings()  # TODO: Pydantic BaseSettings with defau...
               ^~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:366: error: No overload variant of "AzureOpenAI"
matches argument type "dict[str, object]"  [call-overload]
                self._sync_client = AzureOpenAI(**azure_openai_kwargs)
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:366: note: Possible overload variants:
src/codestory/llm/client.py:366: note:     def AzureOpenAI(self, *, azure_endpoint: str, azure_deployment: str | None = ..., api_version: str | None = ..., api_key: str | None = ..., azure_ad_token: str | None = ..., azure_ad_token_provider: Callable[[], str] | None = ..., organization: str | None = ..., websocket_base_url: str | URL | None = ..., timeout: float | Timeout | NotGiven | None = ..., max_retries: int = ..., default_headers: Mapping[str, str] | None = ..., default_query: Mapping[str, object] | None = ..., http_client: Client | None = ..., _strict_response_validation: bool = ...) -> AzureOpenAI
src/codestory/llm/client.py:366: note:     def AzureOpenAI(self, *, azure_deployment: str | None = ..., api_version: str | None = ..., api_key: str | None = ..., azure_ad_token: str | None = ..., azure_ad_token_provider: Callable[[], str] | None = ..., organization: str | None = ..., websocket_base_url: str | URL | None = ..., timeout: float | Timeout | NotGiven | None = ..., max_retries: int = ..., default_headers: Mapping[str, str] | None = ..., default_query: Mapping[str, object] | None = ..., http_client: Client | None = ..., _strict_response_validation: bool = ...) -> AzureOpenAI
src/codestory/llm/client.py:366: note:     def AzureOpenAI(self, *, base_url: str, api_version: str | None = ..., api_key: str | None = ..., azure_ad_token: str | None = ..., azure_ad_token_provider: Callable[[], str] | None = ..., organization: str | None = ..., websocket_base_url: str | URL | None = ..., timeout: float | Timeout | NotGiven | None = ..., max_retries: int = ..., default_headers: Mapping[str, str] | None = ..., default_query: Mapping[str, object] | None = ..., http_client: Client | None = ..., _strict_response_validation: bool = ...) -> AzureOpenAI
src/codestory/llm/client.py:368: error: No overload variant of
"AsyncAzureOpenAI" matches argument type "dict[str, object]"  [call-overload]
                self._async_client = AsyncAzureOpenAI(**azure_openai_kwarg...
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:368: note: Possible overload variants:
src/codestory/llm/client.py:368: note:     def AsyncAzureOpenAI(self, *, azure_endpoint: str, azure_deployment: str | None = ..., api_version: str | None = ..., api_key: str | None = ..., azure_ad_token: str | None = ..., azure_ad_token_provider: Callable[[], str | Awaitable[str]] | None = ..., organization: str | None = ..., project: str | None = ..., websocket_base_url: str | URL | None = ..., timeout: float | Timeout | NotGiven | None = ..., max_retries: int = ..., default_headers: Mapping[str, str] | None = ..., default_query: Mapping[str, object] | None = ..., http_client: AsyncClient | None = ..., _strict_response_validation: bool = ...) -> AsyncAzureOpenAI
src/codestory/llm/client.py:368: note:     def AsyncAzureOpenAI(self, *, azure_deployment: str | None = ..., api_version: str | None = ..., api_key: str | None = ..., azure_ad_token: str | None = ..., azure_ad_token_provider: Callable[[], str | Awaitable[str]] | None = ..., organization: str | None = ..., project: str | None = ..., websocket_base_url: str | URL | None = ..., timeout: float | Timeout | NotGiven | None = ..., max_retries: int = ..., default_headers: Mapping[str, str] | None = ..., default_query: Mapping[str, object] | None = ..., http_client: AsyncClient | None = ..., _strict_response_validation: bool = ...) -> AsyncAzureOpenAI
src/codestory/llm/client.py:368: note:     def AsyncAzureOpenAI(self, *, base_url: str, api_version: str | None = ..., api_key: str | None = ..., azure_ad_token: str | None = ..., azure_ad_token_provider: Callable[[], str | Awaitable[str]] | None = ..., organization: str | None = ..., project: str | None = ..., websocket_base_url: str | URL | None = ..., timeout: float | Timeout | NotGiven | None = ..., max_retries: int = ..., default_headers: Mapping[str, str] | None = ..., default_query: Mapping[str, object] | None = ..., http_client: AsyncClient | None = ..., _strict_response_validation: bool = ...) -> AsyncAzureOpenAI
src/codestory/llm/client.py:380: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
        def _prepare_request_data(self, request) -> None:
        ^
src/codestory/llm/client.py:401: error: No return value expected 
[return-value]
            return model_name, request_data
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/llm/client.py:495: error: "_prepare_request_data" of
"OpenAIClient" does not return a value (it only ever returns None) 
[func-returns-value]
                model_name, request_data = self._prepare_request_data(requ...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/llm/client.py:559: error: "_prepare_request_data" of
"OpenAIClient" does not return a value (it only ever returns None) 
[func-returns-value]
                model_name, request_data = self._prepare_request_data(requ...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/llm/client.py:619: error: "_prepare_request_data" of
"OpenAIClient" does not return a value (it only ever returns None) 
[func-returns-value]
                model_name, request_data = self._prepare_request_data(requ...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/llm/client.py:681: error: "_prepare_request_data" of
"OpenAIClient" does not return a value (it only ever returns None) 
[func-returns-value]
                model_name, request_data = self._prepare_request_data(requ...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/llm/client.py:745: error: "_prepare_request_data" of
"OpenAIClient" does not return a value (it only ever returns None) 
[func-returns-value]
                model_name, request_data = self._prepare_request_data(requ...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/llm/client.py:805: error: "_prepare_request_data" of
"OpenAIClient" does not return a value (it only ever returns None) 
[func-returns-value]
                model_name, request_data = self._prepare_request_data(requ...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/graphdb/neo4j_connector.py:29: error: Incompatible types in
assignment (expression has type "None", variable has type
"_lru_cache_wrapper[Settings]")  [assignment]
        get_settings = None  # TODO: Fix None assignment
                       ^~~~
src/codestory/graphdb/neo4j_connector.py:88: error: "Neo4jSettings" has no
attribute "max_transaction_retry_time"  [attr-defined]
            max_transaction_retry_time=settings.neo4j.max_transaction_retr...
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/graphdb/neo4j_connector.py:258: error: Argument 1 to "driver" of
"GraphDatabase" has incompatible type "str | None"; expected "str"  [arg-type]
                    self.uri,
                    ^~~~~~~~
src/codestory/graphdb/neo4j_connector.py:259: error: Argument "auth" to
"driver" of "GraphDatabase" has incompatible type
"tuple[str | None, str | None]"; expected
"tuple[str, str] | Auth | None | AuthManager"  [arg-type]
                    auth=(self.username, self.password),
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:347: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                        return session.execute_write()
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:349: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                        return session.execute_read()
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:359: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                    return result
                    ^~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:416: error: Returning Any from
function declared to return "list[list[dict[str, Any]]]"  [no-any-return]
                        return session.execute_write()
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:418: error: Returning Any from
function declared to return "list[list[dict[str, Any]]]"  [no-any-return]
                        return session.execute_read()
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:433: error: Returning Any from
function declared to return "list[list[dict[str, Any]]]"  [no-any-return]
                    return results
                    ^~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:468: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _transaction_function_many(
        ^
src/codestory/graphdb/neo4j_connector.py:551: error: Incompatible return value
type (got "Any | None", expected "dict[str, Any]")  [return-value]
            return result[0]["n"] if result else None
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:568: error: Incompatible return value
type (got "Any | None", expected "dict[str, Any]")  [return-value]
            return result[0]["n"] if result else None
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:611: error: Incompatible return value
type (got "Any | None", expected "dict[str, Any]")  [return-value]
            return result[0]["r"] if result else None
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:731: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                    return session.execute_write.return_value
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:733: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                    return session.execute_read.return_value
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:761: error: Returning Any from
function declared to return "list[list[dict[str, Any]]]"  [no-any-return]
                    return session.execute_write.return_value
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/graphdb/neo4j_connector.py:763: error: Returning Any from
function declared to return "list[list[dict[str, Any]]]"  [no-any-return]
                    return session.execute_read.return_value
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/conftest.py:119: error: The return type of a generator function should be
"Generator" or one of its supertypes  [misc]
    def neo4j_connector(test_databases: Any) -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/conftest.py:151: error: The return type of a generator function should be
"Generator" or one of its supertypes  [misc]
    def redis_client(test_databases: Any) -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:26: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def patch_prometheus_metrics() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:37: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def mock_settings() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:58: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def client() -> None:
    ^~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:280: error: Need type annotation for
"future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:396: error: Item "None" of
"UsageInfo | None" has no attribute "prompt_tokens"  [union-attr]
                assert result.usage.prompt_tokens == 5
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:397: error: Item "None" of
"UsageInfo | None" has no attribute "completion_tokens"  [union-attr]
                assert result.usage.completion_tokens == 7
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:398: error: Item "None" of
"UsageInfo | None" has no attribute "total_tokens"  [union-attr]
                assert result.usage.total_tokens == 12
                       ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:449: error: Item "None" of
"UsageInfo | None" has no attribute "prompt_tokens"  [union-attr]
                assert result.usage.prompt_tokens == 15
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:450: error: Item "None" of
"UsageInfo | None" has no attribute "completion_tokens"  [union-attr]
                assert result.usage.completion_tokens == 12
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:451: error: Item "None" of
"UsageInfo | None" has no attribute "total_tokens"  [union-attr]
                assert result.usage.total_tokens == 27
                       ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:543: error: Need type annotation for
"future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:556: error: Item "None" of
"UsageInfo | None" has no attribute "prompt_tokens"  [union-attr]
                assert result.usage.prompt_tokens == 5
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:557: error: Item "None" of
"UsageInfo | None" has no attribute "completion_tokens"  [union-attr]
                assert result.usage.completion_tokens == 7
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_llm/test_client.py:558: error: Item "None" of
"UsageInfo | None" has no attribute "total_tokens"  [union-attr]
                assert result.usage.total_tokens == 12
                       ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_graphdb/test_connector.py:52: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def connector(mock_driver: Any) -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_graphdb/test_connector.py:67: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def async_connector(mock_async_driver: Any) -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_graphdb/test_connector.py:171: error: Need type annotation for
"params_list"  [var-annotated]
        params_list = [{}, {}]
                      ^~~~~~~~
tests/unit/test_config/test_settings_imports.py:61: error: Item "None" of
"SecretStr | None" has no attribute "get_secret_value"  [union-attr]
        assert settings.openai.api_key.get_secret_value() == "sk-test-key-...
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "title" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "summary" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "version" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "api_prefix" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "docs_url" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "openapi_url" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "redoc_url" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "cors_origins" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "cors_allow_credentials" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "cors_allow_methods" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "cors_allow_headers" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "auth_enabled" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "jwt_secret" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "jwt_algorithm" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "jwt_expiration" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "websocket_heartbeat" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "rate_limit_enabled" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "rate_limit_requests" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "rate_limit_window" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "metrics_enabled" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "metrics_route" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "dev_mode" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "max_request_size" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:14: error: Missing named
argument "response_timeout" for "ServiceSettings"  [call-arg]
        settings = ServiceSettings()
                   ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "title" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "summary" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "version" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "api_prefix" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "docs_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "openapi_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "redoc_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "cors_origins" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "cors_allow_credentials" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "cors_allow_methods" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "cors_allow_headers" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "auth_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "jwt_secret" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "jwt_algorithm" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "jwt_expiration" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "websocket_heartbeat" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "rate_limit_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "rate_limit_requests" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "rate_limit_window" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "metrics_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "metrics_route" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "dev_mode" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "max_request_size" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:38: error: Missing named
argument "response_timeout" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "title" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "summary" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "version" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "api_prefix" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "docs_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "openapi_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "redoc_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "cors_origins" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "cors_allow_credentials" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "cors_allow_methods" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "cors_allow_headers" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "auth_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "jwt_secret" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "jwt_algorithm" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "jwt_expiration" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "websocket_heartbeat" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "rate_limit_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "rate_limit_requests" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "rate_limit_window" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "metrics_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "metrics_route" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "dev_mode" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "max_request_size" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:56: error: Missing named
argument "response_timeout" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "title" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "summary" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "version" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "api_prefix" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "docs_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "openapi_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "redoc_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "cors_origins" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "cors_allow_credentials" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "cors_allow_methods" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "cors_allow_headers" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "auth_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "jwt_secret" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "jwt_algorithm" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "jwt_expiration" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "websocket_heartbeat" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "rate_limit_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "rate_limit_requests" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "rate_limit_window" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "metrics_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "metrics_route" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "dev_mode" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "max_request_size" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:68: error: Missing named
argument "response_timeout" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "title" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "summary" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "version" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "api_prefix" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "docs_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "openapi_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "redoc_url" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "cors_origins" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "cors_allow_credentials" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "cors_allow_methods" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "cors_allow_headers" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "auth_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "jwt_secret" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "jwt_algorithm" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "jwt_expiration" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "websocket_heartbeat" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "rate_limit_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "rate_limit_requests" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "rate_limit_window" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "metrics_enabled" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "metrics_route" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "dev_mode" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "max_request_size" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:76: error: Missing named
argument "response_timeout" for "ServiceSettings"  [call-arg]
            settings = ServiceSettings()
                       ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "title" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "summary" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "version" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "api_prefix" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "docs_url" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "openapi_url" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "redoc_url" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "cors_origins" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "cors_allow_credentials" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "cors_allow_methods" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "cors_allow_headers" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "auth_enabled" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "jwt_secret" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "jwt_algorithm" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "jwt_expiration" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "websocket_heartbeat" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "rate_limit_enabled" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "rate_limit_requests" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "rate_limit_window" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "metrics_enabled" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "metrics_route" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "dev_mode" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "max_request_size" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_settings.py:95: error: Missing named
argument "response_timeout" for "ServiceSettings"  [call-arg]
                    ServiceSettings()
                    ^~~~~~~~~~~~~~~~~
tests/integration/conftest.py:129: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def mock_settings() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/conftest.py:245: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def neo4j_connector() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/conftest.py:304: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def redis_client() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/conftest.py:337: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def celery_app(redis_client: Any) -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_llm/conftest.py:84: error: Incompatible types in
assignment (expression has type "str | None", variable has type "str") 
[assignment]
        endpoint = os.environ.get("OPENAI__ENDPOINT") or os.environ.get("A...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:16: error:
Need type annotation for "steps_status" (hint:
"steps_status: dict[<type>, <type>] = ...")  [var-annotated]
            self.steps_status = {}
            ^~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:17: error:
Need type annotation for "steps_results" (hint:
"steps_results: dict[<type>, <type>] = ...")  [var-annotated]
            self.steps_results = {}
            ^~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:18: error:
Need type annotation for "steps_errors" (hint:
"steps_errors: dict[<type>, <type>] = ...")  [var-annotated]
            self.steps_errors = {}
            ^~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:19: error:
Need type annotation for "dependency_graph" (hint:
"dependency_graph: dict[<type>, <type>] = ...")  [var-annotated]
            self.dependency_graph = {}
            ^~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:20: error:
Need type annotation for "_step_instances" (hint:
"_step_instances: dict[<type>, <type>] = ...")  [var-annotated]
            self._step_instances = {}
            ^~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:53: error:
Right operand of "and" is never evaluated  [unreachable]
                if self._thread and self._thread.is_alive():
                                    ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:63: error:
Incompatible types in assignment (expression has type "Thread", variable has
type "None")  [assignment]
                self._thread = threading.Thread(target=self._run_pipeline)
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:64: error:
"None" has no attribute "daemon"  [attr-defined]
                self._thread.daemon = True
                ^~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:65: error:
"None" has no attribute "start"  [attr-defined]
                self._thread.start()
                ^~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:258: error:
Right operand of "and" is never evaluated  [unreachable]
            if self._thread and self._thread.is_alive():
                                ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_manager.py:259: error:
Statement is unreachable  [unreachable]
                self._thread.join(timeout=5.0)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_filesystem_simple.py:18: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def neo4j_connector(neo4j_env: Any) -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_graphdb/test_neo4j_integration.py:164: error: Value of
type "Any | None" is not indexable  [index]
                assert constraint.get("labelsOrTypes")[0] == "File"
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_graphdb/test_neo4j_integration.py:165: error: Value of
type "Any | None" is not indexable  [index]
                assert constraint.get("properties")[0] == "path"
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_graphdb/test_neo4j_integration.py:167: error: Value of
type "Any | None" is not indexable  [index]
                assert constraint.get("labelsOrTypes")[0] == "Directory"
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_graphdb/test_neo4j_integration.py:168: error: Value of
type "Any | None" is not indexable  [index]
                assert constraint.get("properties")[0] == "path"
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_graphdb/test_neo4j_integration.py:174: error: Value of
type "Any | None" is not indexable  [index]
                assert index.get("labelsOrTypes")[0] == "File"
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_graphdb/test_neo4j_integration.py:175: error: Value of
type "Any | None" is not indexable  [index]
                assert index.get("properties")[0] == "extension"
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/openai_adapter.py:262: error: Argument
"role" to "ChatMessage" has incompatible type "str"; expected "ChatRole" 
[arg-type]
                    ChatMessage(role="system", content="You are a helpful ...
                                     ^~~~~~~~
src/codestory_service/infrastructure/openai_adapter.py:263: error: Argument
"role" to "ChatMessage" has incompatible type "str"; expected "ChatRole" 
[arg-type]
                    ChatMessage(role="user", content=test_message),
                                     ^~~~~~
src/codestory_service/infrastructure/openai_adapter.py:274: error: Incompatible
types in assignment (expression has type "int", target has type
"Sequence[object]")  [assignment]
    ...          chat_params["max_completion_tokens"] = 10  # Use a higher va...
                                                        ^~
src/codestory_service/infrastructure/openai_adapter.py:278: error: Incompatible
types in assignment (expression has type "int", target has type
"Sequence[object]")  [assignment]
                    chat_params["max_tokens"] = 10
                                                ^~
src/codestory_service/infrastructure/openai_adapter.py:279: error: Incompatible
types in assignment (expression has type "float", target has type
"Sequence[object]")  [assignment]
                    chat_params["temperature"] = 0.1  # Low temperature fo...
                                                 ^~~
src/codestory_service/infrastructure/openai_adapter.py:285: error: Argument 1
to "chat_async" of "OpenAIClient" has incompatible type
"**dict[str, Sequence[object]]"; expected "list[ChatMessage]"  [arg-type]
                response = await self.client.chat_async(**chat_params)
                                                          ^~~~~~~~~~~
src/codestory_service/infrastructure/openai_adapter.py:285: error: Argument 1
to "chat_async" of "OpenAIClient" has incompatible type
"**dict[str, Sequence[object]]"; expected "str | None"  [arg-type]
                response = await self.client.chat_async(**chat_params)
                                                          ^~~~~~~~~~~
src/codestory_service/infrastructure/openai_adapter.py:285: error: Argument 1
to "chat_async" of "OpenAIClient" has incompatible type
"**dict[str, Sequence[object]]"; expected "int | None"  [arg-type]
                response = await self.client.chat_async(**chat_params)
                                                          ^~~~~~~~~~~
src/codestory_service/infrastructure/openai_adapter.py:285: error: Argument 1
to "chat_async" of "OpenAIClient" has incompatible type
"**dict[str, Sequence[object]]"; expected "float | None"  [arg-type]
                response = await self.client.chat_async(**chat_params)
                                                          ^~~~~~~~~~~
src/codestory_service/infrastructure/neo4j_adapter.py:439: error: The return
type of "__init__" must be None  [misc]
        def __init__(self) -> Any:
        ^
src/codestory_service/infrastructure/neo4j_adapter.py:469: error: The return
type of "__init__" must be None  [misc]
        def __init__(self) -> Any:
        ^
src/codestory_service/infrastructure/neo4j_adapter.py:471: error: Incompatible
types in assignment (expression has type "DummyNeo4jConnector", variable has
type "Neo4jConnector")  [assignment]
            self.connector = DummyNeo4jConnector()
                             ^~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/msal_validator.py:84: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                    return claims
                    ^~~~~~~~~~~~~
src/codestory_service/infrastructure/msal_validator.py:97: error: Returning Any
from function declared to return "dict[str, Any]"  [no-any-return]
                    return claims
                    ^~~~~~~~~~~~~
src/codestory_service/application/config_service.py:104: error: Incompatible
types in assignment (expression has type "Redis", variable has type "None") 
[assignment]
                self.redis = redis.Redis(  # TODO: Fix type compatibility
                             ^
src/codestory_service/application/config_service.py:109: error: "None" has no
attribute "ping"  [attr-defined]
                await self.redis.ping()[attr-defined]
                      ^~~~~~~~~~~~~~~
src/codestory_service/application/config_service.py:109: error: Name "attr" is
not defined  [name-defined]
                await self.redis.ping()[attr-defined]
                                        ^
src/codestory_service/application/config_service.py:109: error: Name "defined"
is not defined  [name-defined]
                await self.redis.ping()[attr-defined]
                                             ^
src/codestory_service/application/config_service.py:124: error: Incompatible
types in assignment (expression has type "Coroutine[Any, Any, None]", variable
has type "None")  [assignment]
                    self._init_redis_task = self._init_redis()  # TODO: Fi...
                                            ^~~~~~~~~~~~~~~~~~
src/codestory_service/application/config_service.py:124: note: Maybe you forgot to use "await"?
src/codestory_service/application/config_service.py:125: error: Incompatible
types in "await" (actual type "None", expected type "Awaitable[Any]")  [misc]
                    await self._init_redis_task
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/config_service.py:127: error: Statement is
unreachable  [unreachable]
                    await self._init_redis_task
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/config_service.py:133: error: Statement is
unreachable  [unreachable]
            try:
            ^
src/codestory_service/application/config_service.py:300: error: "ConfigWriter"
has no attribute "update_setting"  [attr-defined]
                        self.writer.update_setting(section, key, item.valu...
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/config_service.py:303: error: "ConfigWriter"
has no attribute "update_setting"  [attr-defined]
                        self.writer.update_setting("service", key, item.va...
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/auth/entra_validator.py:102: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return claims
                ^~~~~~~~~~~~~
src/codestory_mcp/auth/entra_validator.py:129: error: Name "scopes" already
defined on line 125  [no-redef]
                scopes: list[Any] = []
                ^
src/codestory_filesystem/step.py:100: error: The return type of "__init__" must
be None  [misc]
        def __init__(self) -> Any:
        ^
src/codestory_filesystem/step.py:272: error: Dict entry 1 has incompatible type
"str": "str"; expected "str": "StepStatus | None"  [dict-item]
                                    "message": status_msg,
                                    ^~~~~~~~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:273: error: Dict entry 2 has incompatible type
"str": "float"; expected "str": "StepStatus | None"  [dict-item]
                                    "progress": 100.0,
                                    ^~~~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:283: error: Dict entry 1 has incompatible type
"str": "str"; expected "str": "StepStatus | None"  [dict-item]
                                    "error": f"Error retrieving result: {e...
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:293: error: Dict entry 1 has incompatible type
"str": "str"; expected "str": "StepStatus | None"  [dict-item]
                                "error": str(result.result),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_filesystem/step.py:457: error: Untyped decorator makes function
"process_filesystem" untyped  [misc]
    @shared_task(
     ^
src/codestory_filesystem/step.py:463: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def process_filesystem(
    ^
src/codestory_filesystem/step.py:599: error: Argument 1 to "Neo4jConnector" has
incompatible type "**dict[str, str]"; expected "bool"  [arg-type]
                neo4j = Neo4jConnector(**params)
                                         ^~~~~~
src/codestory_filesystem/step.py:1187: error: Value of type "object" is not
indexable  [index]
                f"  - Total: {overall_timing_stats['directory_operations']...
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1188: error: Value of type "object" is not
indexable  [index]
                f"  - Node creation: {overall_timing_stats['directory_oper...
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1189: error: Value of type "object" is not
indexable  [index]
                f"  - Linking: {overall_timing_stats['directory_operations...
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1190: error: Value of type "object" is not
indexable  [index]
                f"  - Avg per directory: {overall_timing_stats['directory_...
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1192: error: Value of type "object" is not
indexable  [index]
                f"  - Total: {overall_timing_stats['file_operations']['tot...
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1193: error: Value of type "object" is not
indexable  [index]
                f"  - Metadata: {overall_timing_stats['file_operations']['...
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1194: error: Value of type "object" is not
indexable  [index]
                f"  - Node creation: {overall_timing_stats['file_operation...
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1195: error: Value of type "object" is not
indexable  [index]
                f"  - Linking: {overall_timing_stats['file_operations']['l...
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1196: error: Value of type "object" is not
indexable  [index]
                f"  - Avg per file: {overall_timing_stats['file_operations...
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1198: error: Value of type "object" is not
indexable  [index]
                f"  - Node creation total: {overall_timing_stats['neo4j_op...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1199: error: Value of type "object" is not
indexable  [index]
                f"  - Relationship creation total: {overall_timing_stats['...
                                                   ^~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1200: error: Value of type "object" is not
indexable  [index]
                f"  - Avg operation time: {overall_timing_stats['neo4j_ope...
                                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1230: error: Value of type "object" is not
indexable  [index]
                        "avg_file_time": overall_timing_stats["file_operat...
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1231: error: Value of type "object" is not
indexable  [index]
                        "avg_dir_time": overall_timing_stats["directory_op...
                                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1232: error: Value of type "object" is not
indexable  [index]
                        "avg_neo4j_op_time": overall_timing_stats["neo4j_o...
                                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1247: error: Value of type "object" is not
indexable  [index]
                f"- Average Neo4j operation time: {overall_timing_stats['n...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1248: error: Value of type "object" is not
indexable  [index]
                f"- Average file processing time: {overall_timing_stats['f...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_filesystem/step.py:1249: error: Value of type "object" is not
indexable  [index]
    ...          f"- Average directory processing time: {overall_timing_stats...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_docgrapher/document_finder.py:133: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
            files = self.connector.run_query(query, fetch_all=True)
                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/document_finder.py:208: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
            files = self.connector.run_query(query, fetch_all=True)
                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:46: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
            files = self.connector.run_query(query, fetch_all=True)
                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:55: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
            dirs = self.connector.run_query(query, fetch_all=True)
                   ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:64: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
            classes = self.connector.run_query(query, fetch_all=True)
                      ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:76: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
            funcs = self.connector.run_query(query, fetch_all=True)
                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:93: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                return self.path_cache[path_reference]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:111: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                return matching_paths[0]
                ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:133: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                        return filtered_paths[0]
                        ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:138: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                        return shortest
                        ^~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:143: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                return shortest
                ^~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:153: error: Returning Any from
function declared to return "str | None"  [no-any-return]
                    return matching_paths[0]
                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:176: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
                result = self.connector.run_query(
                         ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:191: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
                result = self.connector.run_query(
                         ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:205: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
            result = self.connector.run_query(
                     ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:238: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
                result = self.connector.run_query(
                         ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:257: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
                result = self.connector.run_query(
                         ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/path_matcher.py:275: error: "Neo4jConnector" has
no attribute "run_query"  [attr-defined]
            result = self.connector.run_query(
                     ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:59: error: Argument 2 to
"_analyze_code_block" of "ContentAnalyzer" has incompatible type
"str | int | float"; expected "str"  [arg-type]
    ...        return self._analyze_code_block(content, entity.metadata.get("...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/codestory_docgrapher/utils/content_analyzer.py:342: error: Item "None" of
"OpenAIClient | None" has no attribute "chat"  [union-attr]
                response = self.llm_client.chat(messages=messages, max_tok...
                           ^~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:344: error: Item "None" of
"str | Any | None" has no attribute "strip"  [union-attr]
                return response.choices[0].message.content.strip()
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:377: error: Item "None" of
"OpenAIClient | None" has no attribute "chat"  [union-attr]
                response = self.llm_client.chat(messages=messages, max_tok...
                           ^~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:379: error: Item "None" of
"str | Any | None" has no attribute "strip"  [union-attr]
                return response.choices[0].message.content.strip()
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:412: error: Item "None" of
"OpenAIClient | None" has no attribute "chat"  [union-attr]
                response = self.llm_client.chat(messages=messages, max_tok...
                           ^~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/utils/content_analyzer.py:414: error: Item "None" of
"str | Any | None" has no attribute "strip"  [union-attr]
                return response.choices[0].message.content.strip()
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_blarify/step.py:60: error: Incompatible types in assignment
(expression has type "None", variable has type "DockerClient")  [assignment]
                self.docker_client = None  # TODO: Fix None assignment
                                     ^~~~
src/codestory_blarify/step.py:423: error: Untyped decorator makes function
"run_blarify" untyped  [misc]
    @shared_task(bind=True, name="codestory_blarify.step.run_blarify")
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_blarify/step.py:424: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def run_blarify(
    ^
src/codestory_blarify/step.py:495: error: Unpacking a string is disallowed 
[misc]
                    for host_path, container_path in os.environ.get(
                    ^
src/codestory_blarify/step.py:498: error: Cannot determine type of "host_path" 
[has-type]
                        if host_path and container_path and repository_pat...
                           ^~~~~~~~~
src/codestory_blarify/step.py:498: error: Cannot determine type of
"container_path"  [has-type]
                        if host_path and container_path and repository_pat...
                                         ^~~~~~~~~~~~~~
src/codestory_blarify/step.py:500: error: Cannot determine type of "host_path" 
[has-type]
                                host_path, container_path, 1
                                ^~~~~~~~~
src/codestory_blarify/step.py:500: error: Cannot determine type of
"container_path"  [has-type]
                                host_path, container_path, 1
                                           ^~~~~~~~~~~~~~
src/codestory_blarify/step.py:749: error: Returning Any from function declared
to return "dict[str, Any]"  [no-any-return]
            return result
            ^~~~~~~~~~~~~
src/codestory/mcp/main.py:37: error: "Settings" has no attribute "project_name"
 [attr-defined]
            "name": f"{settings.project_name}-mcp",
                      ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/tasks.py:14: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        psutil = None
                 ^~~~
src/codestory/ingestion_pipeline/tasks.py:27: error: Untyped decorator makes
function "run_step" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.run_step", bind=Tru...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/ingestion_pipeline/tasks.py:388: error: Untyped decorator makes
function "orchestrate_pipeline" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.orchestrate_pipelin...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/tasks.py:607: error: Untyped decorator makes
function "get_job_status" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.get_job_status", bi...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/ingestion_pipeline/tasks.py:647: error: Untyped decorator makes
function "stop_job" untyped  [misc]
    @app.task(name="codestory.ingestion_pipeline.tasks.stop_job", bind=Tru...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/config/cli.py:32: error: Function is missing a return type
annotation  [no-untyped-def]
    def get_setting(
    ^
src/codestory/config/cli.py:58: error: Function is missing a return type
annotation  [no-untyped-def]
    def set_setting(
    ^
src/codestory/config/cli.py:105: error: Function is missing a return type
annotation  [no-untyped-def]
    def list_settings(
    ^
src/codestory/config/cli.py:157: error: Function is missing a return type
annotation  [no-untyped-def]
    def export_config(
    ^
tests/unit/test_config_writer.py:21: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def temp_env_file() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_config_writer.py:38: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def temp_toml_file() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_auth.py:87: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def mock_jwks_client(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_auth.py:93: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def mock_jwt(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:220: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def sample_repo() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_filesystem_integration.py:249: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def neo4j_connector() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:42: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def sample_repo() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:105: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def neo4j_connector() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:594: error:
Statement is unreachable  [unreachable]
            return
            ^~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:698: error:
Value of type "dict[str, Any] | None" is not indexable  [index]
            assert final_status["status"] in [
                   ^~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:701: error:
Value of type "dict[str, Any] | None" is not indexable  [index]
    ...  ], f"Expected status STOPPED or COMPLETED, got {final_status['status...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_blarify_integration.py:704: error:
Value of type "dict[str, Any] | None" is not indexable  [index]
            if final_status["status"] == StepStatus.COMPLETED:
               ^~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:177: error: Argument 1
to "int" has incompatible type "int | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                            eta = datetime.fromtimestamp(int(request.eta))
                                                             ^~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:181: error: Argument 1
to "int" has incompatible type "int | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                    countdown = int(request.countdown)
                                    ^~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:233: error:
"type[StepStatus]" has no attribute "UNKNOWN"  [attr-defined]
    ...            status=StepStatus(step.get("status", StepStatus.UNKNOWN)),
                                                        ^~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:250: error:
"type[StepStatus]" has no attribute "UNKNOWN"  [attr-defined]
    ...          status=StepStatus(result.get("status", StepStatus.UNKNOWN)),
                                                        ^~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:254: error: Argument 1
to "fromtimestamp" of "datetime" has incompatible type "Any | None"; expected
"float"  [arg-type]
    ...               started_at=datetime.fromtimestamp(result.get("start_tim...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:255: error: Argument 1
to "fromtimestamp" of "datetime" has incompatible type "Any | None"; expected
"float"  [arg-type]
    ...             completed_at=datetime.fromtimestamp(result.get("end_time"...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:294: error: Unexpected
keyword argument "cpu_percent" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:294: error: Unexpected
keyword argument "memory_mb" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:314: error: Unexpected
keyword argument "cpu_percent" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:314: error: Unexpected
keyword argument "memory_mb" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:332: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:332: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:332: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:332: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:332: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:332: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:346: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:346: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:346: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:346: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:346: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:346: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:346: error: Missing
named argument "steps" for "IngestionJob"  [call-arg]
                    return IngestionJob(
                           ^
src/codestory_service/infrastructure/celery_adapter.py:359: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:359: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:359: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:359: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:359: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:359: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:359: error: Missing
named argument "steps" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:425: error: Missing
named argument "source" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:425: error: Missing
named argument "source_type" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:425: error: Missing
named argument "branch" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:425: error: Missing
named argument "started_at" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:425: error: Missing
named argument "completed_at" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:425: error: Missing
named argument "duration" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:425: error: Missing
named argument "steps" for "IngestionJob"  [call-arg]
                return IngestionJob(
                       ^
src/codestory_service/infrastructure/celery_adapter.py:475: error: Item
"list[JobStatus]" of "list[JobStatus] | None" has no attribute
"HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/infrastructure/celery_adapter.py:475: error: Item "None"
of "list[JobStatus] | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:187: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
                        query_type="read",
                                   ^~~~~~
src/codestory_service/application/graph_service.py:199: error: "OpenAIAdapter"
has no attribute "answer_question"  [attr-defined]
                answer = await self.openai.answer_question(request, contex...
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:202: error: Returning Any
from function declared to return "AskAnswer"  [no-any-return]
                return answer
                ^~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:314: error: Incompatible
types in assignment (expression has type "str", target has type "int") 
[assignment]
                params["focus_node_id"] = request.focus_node_id  # TODO: F...
                                          ^~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/graph_service.py:324: error: Incompatible
types in assignment (expression has type "list[str]", target has type "int") 
[assignment]
                params["node_types"] = node_types  # TODO: Fix type compat...
                                       ^~~~~~~~~~
src/codestory_service/application/graph_service.py:335: error: Incompatible
types in assignment (expression has type "str", target has type "int") 
[assignment]
                params["search_query"] = search_query  # TODO: Fix type co...
                                         ^~~~~~~~~~~~
src/codestory_service/application/graph_service.py:348: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
                query_type="read",
                           ^~~~~~
src/codestory_service/application/graph_service.py:1149: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
    ...y = CypherQuery(query="MATCH (n) DETACH DELETE n", query_type="write")
                                                                     ^~~~~~~
src/codestory_service/application/graph_service.py:1158: error: Argument
"query_type" to "CypherQuery" has incompatible type "str"; expected "QueryType" 
[arg-type]
    ...           query="CALL apoc.schema.assert({}, {})", query_type="write"
                                                                      ^~~~~~~
src/codestory_mcp/adapters/openai_service.py:55: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                        role="system",
                             ^~~~~~~~
src/codestory_mcp/adapters/openai_service.py:69: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                            role="user",
                                 ^~~~~~
src/codestory_mcp/adapters/openai_service.py:79: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                            role="user",
                                 ^~~~~~
src/codestory_mcp/adapters/openai_service.py:88: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                messages.append(ChatMessage(role="user", content=f"```\n{c...
                                                 ^~~~~~
src/codestory_mcp/adapters/openai_service.py:99: error: "OpenAIClient" has no
attribute "create_chat_completion"  [attr-defined]
                response = await self.client.create_chat_completion(reques...
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/adapters/openai_service.py:108: error: Returning Any from
function declared to return "str"  [no-any-return]
                return summary
                ^~~~~~~~~~~~~~
src/codestory_mcp/adapters/openai_service.py:162: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                        role="system",
                             ^~~~~~~~
src/codestory_mcp/adapters/openai_service.py:171: error: Argument "role" to
"ChatMessage" has incompatible type "str"; expected "ChatRole"  [arg-type]
                        role="user",
                             ^~~~~~
src/codestory_mcp/adapters/openai_service.py:190: error: "OpenAIClient" has no
attribute "create_chat_completion"  [attr-defined]
                response = await self.client.create_chat_completion(reques...
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/adapters/openai_service.py:199: error: Returning Any from
function declared to return "str"  [no-any-return]
                return explanation
                ^~~~~~~~~~~~~~~~~~
src/codestory_mcp/adapters/openai_service.py:235: error: "OpenAIClient" has no
attribute "create_embedding"  [attr-defined]
                await self.client.create_embedding(code)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/adapters/graph_service.py:171: error: Incompatible return
value type (got "MockNode", expected "Node")  [return-value]
                return node
                       ^~~~
src/codestory_mcp/adapters/graph_service.py:299: error: Incompatible types in
assignment (expression has type "dict[str, Any]", target has type "str") 
[assignment]
                    payload["parameters"] = parameters  # TODO: Fix type c...
                                            ^~~~~~~~~~
src/codestory_mcp/adapters/graph_service.py:319: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:195: error: Returning Any from
function declared to return "list[str]"  [no-any-return]
                return self.entity_cache[cache_key]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:207: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:220: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:237: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:251: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:292: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:307: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:322: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/entity_linker.py:337: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                records = self.connector.run_query(
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:137: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return health_data
                    ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:150: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return health_data
                    ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:372: error: Incompatible types in
assignment (expression has type "list[str]", target has type "str") 
[assignment]
                data["dependencies"] = list(dependencies)
                                       ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:483: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                        return data["items"]
                        ^~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:486: error: Returning Any from
function declared to return "list[dict[str, Any]]"  [no-any-return]
                        return data["jobs"]
                        ^~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:532: error: Incompatible types in
assignment (expression has type "dict[str, Any]", target has type "str") 
[assignment]
                data["parameters"] = parameters  # TODO: Fix type compatib...
                                     ^~~~~~~~~~
src/codestory/cli/client/service_client.py:572: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:593: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:614: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:631: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:645: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:659: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:686: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                return health_data
                ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:826: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return response.json()
                    ^~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/service_client.py:831: error: Returning Any from
function declared to return "dict[str, Any]"  [no-any-return]
                    return response.json()
                    ^~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_ingestion_pipeline/test_manager.py:26: error: The return type
of a generator function should be "Generator" or one of its supertypes  [misc]
    def mock_prometheus_metrics() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_ingestion_pipeline/test_manager.py:46: error: The return type
of a generator function should be "Generator" or one of its supertypes  [misc]
        def config_file(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_ingestion_pipeline/test_manager.py:105: error: Cannot assign to
a method  [method-assign]
                manager._get_step_class = lambda name: mock_step_class if ...
                ^~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_ingestion_pipeline/test_manager.py:105: error: Incompatible
types in assignment (expression has type "Callable[[str], Any | None]", variable
has type "Callable[[str], type[PipelineStep] | None]")  [assignment]
                manager._get_step_class = lambda name: mock_step_class if ...
                                          ^
tests/unit/test_ingestion_pipeline/test_manager.py:111: error: Cannot assign to
a method  [method-assign]
                    manager._get_step_class = original_method
                    ^~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_infrastructure.py:113: error: Argument
"usage" to "EmbeddingResponse" has incompatible type "dict[str, int]"; expected
"UsageInfo"  [arg-type]
                usage={"prompt_tokens": 8, "total_tokens": 8},
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_infrastructure.py:387: error:
"CeleryAdapter" has no attribute "_run_ingestion_pipeline"  [attr-defined]
            adapter._run_ingestion_pipeline = mock_app.tasks["run_ingestio...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "branch" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "steps" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "dependencies" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "config" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "options" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "created_by" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "description" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "tags" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "priority" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "eta" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:422: error: Missing
named argument "countdown" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "branch" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "dependencies" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "config" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "created_by" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "description" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "tags" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "priority" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "eta" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_infrastructure.py:435: error: Missing
named argument "countdown" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_mcp/test_adapters.py:108: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def mock_settings(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:119: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def mock_metrics(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:127: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def mock_client(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:186: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:222: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:243: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:280: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:307: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:360: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:405: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def mock_client(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:413: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def mock_metrics(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:449: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:485: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:512: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_adapters.py:566: error: Need type annotation
for "embed_future"  [var-annotated]
            embed_future = asyncio.Future()
                           ^~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:221: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def sample_repo() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:244: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def neo4j_connector() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_pipeline_integration.py:268: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def test_config() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_summarizer/step.py:268: error: Untyped decorator makes function
"run_summarizer" untyped  [misc]
    @shared_task(bind=True, name="codestory_summarizer.step.run_summarizer...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/use_real_adapters.py:110: error: Incompatible types in
assignment (expression has type
"Callable[[], Coroutine[Any, Any, OpenAIAdapter]]", variable has type
"Callable[[], OpenAIAdapter]")  [assignment]
        openai_adapter.get_openai_adapter = get_real_openai_adapter  # TOD...
                                            ^~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:65: error: Incompatible
types in assignment (expression has type "Redis", variable has type "None") 
[assignment]
                self.redis = redis.Redis(  # TODO: Fix type compatibility
                             ^
src/codestory_service/application/ingestion_service.py:70: error: "None" has no
attribute "ping"  [attr-defined]
                await self.redis.ping()[attr-defined]
                      ^~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:70: error: Name "attr"
is not defined  [name-defined]
                await self.redis.ping()[attr-defined]
                                        ^
src/codestory_service/application/ingestion_service.py:70: error: Name
"defined" is not defined  [name-defined]
                await self.redis.ping()[attr-defined]
                                             ^
src/codestory_service/application/ingestion_service.py:90: error: Statement is
unreachable  [unreachable]
            try:
            ^
src/codestory_service/application/ingestion_service.py:121: error: Statement is
unreachable  [unreachable]
            try:
            ^
src/codestory_service/application/ingestion_service.py:195: error: "None" has
no attribute "set"  [attr-defined]
                    await self.redis.set(
                          ^~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:247: error: Argument
"timestamp" to "JobProgressEvent" has incompatible type "int | None"; expected
"float"  [arg-type]
                        timestamp=ingestion_started.eta if ingestion_start...
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/application/ingestion_service.py:324: error: Argument
"timestamp" to "JobProgressEvent" has incompatible type "int | None"; expected
"float"  [arg-type]
                    timestamp=job.updated_at if job.updated_at else None,
                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:384: error: Item
"list[JobStatus]" of "list[JobStatus] | None" has no attribute
"HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:384: error: Item "None"
of "list[JobStatus] | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:434: error: Function is
missing a return type annotation  [no-untyped-def]
            def summary_stats(values: Any):
            ^
src/codestory_service/application/ingestion_service.py:462: error: "None" has
no attribute "scan_iter"  [attr-defined]
            async for key in self.redis.scan_iter(match=pattern):
                             ^~~~~~~~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:463: error: "None" has
no attribute "get"  [attr-defined]
                data = await self.redis.get(key)
                             ^~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:474: error: "None" has
no attribute "get"  [attr-defined]
                            dep_event = await self.redis.get(status_key)
                                              ^~~~~~~~~~~~~~
src/codestory_service/application/ingestion_service.py:487: error: "None" has
no attribute "delete"  [attr-defined]
                            await self.redis.delete(key)
                                  ^~~~~~~~~~~~~~~~~
src/codestory_service/api/health.py:122: error: Incompatible types in
assignment (expression has type "list[str]", variable has type
"dict[str, Any] | None")  [assignment]
                health_report.error_package = error_package  # TODO: Fix t...
                                              ^~~~~~~~~~~~~
src/codestory_service/api/health.py:182: error: Missing named argument
"error_package" for "HealthReport"  [call-arg]
            return HealthReport(
                   ^
src/codestory_service/api/health.py:210: error: Missing named argument
"error_package" for "HealthReport"  [call-arg]
            return HealthReport(
                   ^
src/codestory_service/api/health.py:386: error: Incompatible types in
assignment (expression has type "dict[str, object]", target has type "str") 
[assignment]
            response["auth_details"] = {  # TODO: Fix type compatibility
                                       ^
src/codestory_service/api/health.py:410: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
                    response["token_injection"] = {
                                                  ^
src/codestory_service/api/health.py:452: error: Incompatible types in
assignment (expression has type "dict[str, str | None]", target has type "str") 
[assignment]
    ...                   response["token_injection"] = {  # TODO: Fix type c...
                                                        ^
src/codestory_service/api/health.py:460: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
    ...                   response["token_injection"] = {  # TODO: Fix type c...
                                                        ^
src/codestory_service/api/health.py:470: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
    ...                   response["token_injection"] = {  # TODO: Fix type c...
                                                        ^
src/codestory_service/api/health.py:476: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
    ...                   response["token_injection"] = {  # TODO: Fix type c...
                                                        ^
src/codestory_service/api/health.py:482: error: Incompatible types in
assignment (expression has type "dict[str, str]", target has type "str") 
[assignment]
                response["token_injection"] = {
                                              ^
src/codestory_service/api/health.py:511: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        async def check_component_health(component_name, check_func, timeo...
        ^
src/codestory_service/api/health.py:515: error: Returning Any from function
declared to return "None"  [no-any-return]
                return result
                ^~~~~~~~~~~~~
src/codestory_service/api/health.py:518: error: No return value expected 
[return-value]
                return {
                ^
src/codestory_service/api/health.py:527: error: No return value expected 
[return-value]
                return {
                ^
src/codestory_service/api/health.py:615: error: Argument after ** must be a
mapping, not "None"  [arg-type]
            "neo4j": ComponentHealth(**neo4j_health),
                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/api/health.py:616: error: Argument after ** must be a
mapping, not "None"  [arg-type]
            "celery": ComponentHealth(**celery_health),
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/api/health.py:617: error: Argument after ** must be a
mapping, not "None"  [arg-type]
            "openai": ComponentHealth(**openai_health),
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/api/health.py:643: error: Missing named argument
"error_package" for "HealthReport"  [call-arg]
        return HealthReport(
               ^
src/codestory_service/api/graph.py:275: error: Argument "filter" to
"VisualizationRequest" has incompatible type
"dict[str, int | list[str] | str | None] | None"; expected "NodeFilter | None" 
[arg-type]
                filter={
                       ^
src/codestory_service/api/auth.py:92: error: Returning Any from function
declared to return "UserInfo"  [no-any-return]
            return UserInfo(id="anonymous", name="Anonymous User", roles=[...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/auth.py:92: error: Missing named argument "email" for
"UserInfo"  [call-arg]
            return UserInfo(id="anonymous", name="Anonymous User", roles=[...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/auth.py:92: error: Value of type "UserInfo" is not
indexable  [index]
            return UserInfo(id="anonymous", name="Anonymous User", roles=[...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory_service/api/auth.py:92: error: Name "call" is not defined 
[name-defined]
    ...s", name="Anonymous User", roles=[], is_authenticated=False)[call-arg]
                                                                    ^
src/codestory_service/api/auth.py:92: error: Name "arg" is not defined 
[name-defined]
    ...s", name="Anonymous User", roles=[], is_authenticated=False)[call-arg]
                                                                         ^
src/codestory_mcp/server.py:66: error: Argument 1 to "EntraValidator" has
incompatible type "str | None"; expected "str"  [arg-type]
            validator = EntraValidator(settings.azure_tenant_id, settings....
                                       ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/server.py:66: error: Argument 2 to "EntraValidator" has
incompatible type "str | None"; expected "str"  [arg-type]
    ...dator = EntraValidator(settings.azure_tenant_id, settings.api_audience...
                                                        ^~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/server.py:209: error: Missing return statement  [empty-body]
        async def execute_tool(
        ^
src/codestory_mcp/tools/summarize_node.py:83: error: Value of type
"frozenset[str]" is not indexable  [index]
                    node_type = node.labels[0] if node.labels else "Unknow...
                                ^~~~~~~~~~~~~~
src/codestory_mcp/tools/summarize_node.py:103: error: Value of type
"frozenset[str]" is not indexable  [index]
                        "type": node.labels[0] if node.labels else "Unknow...
                                ^~~~~~~~~~~~~~
src/codestory_mcp/tools/similar_code.py:80: error: Incompatible types in
assignment (expression has type "dict[str, Any]", target has type
"list[dict[str, Any]]")  [assignment]
                response["metadata"] = {
                                       ^
src/codestory_mcp/tools/search_graph.py:89: error: Argument 1 to
"to_mcp_result" of "NodeSerializer" has incompatible type
"list[tuple[Node, float]]"; expected "list[Node | tuple[Node, float]]" 
[arg-type]
                    results,
                    ^~~~~~~
src/codestory_mcp/tools/search_graph.py:89: note: "List" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance
src/codestory_mcp/tools/search_graph.py:89: note: Consider using "Sequence" instead, which is covariant
src/codestory_mcp/tools/search_graph.py:95: error: Incompatible types in
assignment (expression has type "dict[str, Any]", target has type
"list[dict[str, Any]]")  [assignment]
                response["metadata"] = {
                                       ^
src/codestory_mcp/tools/path_to.py:119: error: Item "Relationship" of
"Node | Relationship" has no attribute "labels"  [union-attr]
                                    "type": element.labels[0] if element.l...
                                            ^~~~~~~~~~~~~~
src/codestory_mcp/tools/path_to.py:119: error: Value of type
"frozenset[str] | Any" is not indexable  [index]
                                    "type": element.labels[0] if element.l...
                                            ^~~~~~~~~~~~~~~~~
src/codestory_mcp/tools/path_to.py:129: error: Item "Node" of
"Node | Relationship" has no attribute "type"  [union-attr]
                                    "type": element.type,
                                            ^~~~~~~~~~~~
src/codestory_mcp/tools/path_to.py:139: error: Incompatible types in assignment
(expression has type "str", target has type "list[dict[str, Any]]") 
[assignment]
                    response["explanation"] = explanation
                                              ^~~~~~~~~~~
src/codestory_mcp/tools/path_to.py:142: error: Incompatible types in assignment
(expression has type "dict[str, Any]", target has type "list[dict[str, Any]]") 
[assignment]
                response["metadata"] = {
                                       ^
src/codestory_docgrapher/knowledge_graph.py:112: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                existing = self.connector.run_query(
                           ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/knowledge_graph.py:134: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                result = self.connector.run_query(
                         ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/knowledge_graph.py:176: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                result = self.connector.run_query(
                         ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/knowledge_graph.py:214: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                    result = self.connector.run_query(
                             ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/knowledge_graph.py:244: error: "Neo4jConnector" has no
attribute "run_query"  [attr-defined]
                    result = self.connector.run_query(
                             ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/progress_client.py:171: error: Right operand of "and"
is never evaluated  [unreachable]
            if self._thread and self._thread.is_alive():
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/progress_client.py:172: error: Statement is
unreachable  [unreachable]
                return
                ^~~~~~
src/codestory/cli/client/progress_client.py:177: error: Incompatible types in
assignment (expression has type "Thread", variable has type "None") 
[assignment]
                self._thread = threading.Thread(target=self._subscribe_red...
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/progress_client.py:179: error: Incompatible types in
assignment (expression has type "Thread", variable has type "None") 
[assignment]
                self._thread = threading.Thread(target=self._poll_http)  #...
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/progress_client.py:181: error: "None" has no attribute
"daemon"  [attr-defined]
            self._thread.daemon = True
            ^~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/progress_client.py:182: error: "None" has no attribute
"start"  [attr-defined]
            self._thread.start()
            ^~~~~~~~~~~~~~~~~~
src/codestory/cli/client/progress_client.py:186: error: Right operand of "and"
is never evaluated  [unreachable]
            if self._thread and self._thread.is_alive():
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/client/progress_client.py:187: error: Statement is
unreachable  [unreachable]
                self._stop_event.set()
                ^~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_application.py:115: error: Incompatible
types in assignment (expression has type "AsyncMock", variable has type "None") 
[assignment]
            service.redis = mock.AsyncMock()
                            ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_application.py:237: error: List item 0
has incompatible type "dict[str, object]"; expected "ConfigPatchItem" 
[list-item]
                items=[{"key": "general.debug", "value": False}],
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_application.py:368: error: Incompatible
types in assignment (expression has type "AsyncMock", variable has type "None") 
[assignment]
            service.redis = mock.AsyncMock()
                            ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "branch" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "steps" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "dependencies" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "config" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "options" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "created_by" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "description" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "tags" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "priority" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "eta" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_application.py:379: error: Missing named
argument "countdown" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_mcp/test_tools.py:34: error: Only concrete class can
be given where "type[BaseTool]" is expected  [type-abstract]
            registered = register_tool(MockTool)
                                       ^~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:66: error: Only concrete class can
be given where "type[BaseTool]" is expected  [type-abstract]
            register_tool(MockTool1)
                          ^~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:67: error: Only concrete class can
be given where "type[BaseTool]" is expected  [type-abstract]
            register_tool(MockTool2)
                          ^~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:81: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def graph_service(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:89: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def metrics(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:147: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:175: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:192: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def graph_service(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:200: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def openai_service(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:210: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def metrics(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:249: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:277: error: Need type annotation
for "find_node_future"  [var-annotated]
            find_node_future = asyncio.Future()
                               ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:281: error: Need type annotation
for "summary_future"  [var-annotated]
            summary_future = asyncio.Future()
                             ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:305: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def graph_service(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:313: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def openai_service(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:321: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def metrics(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:416: error: Need type annotation
for "paths_future"  [var-annotated]
            paths_future = asyncio.Future()
                           ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:420: error: Need type annotation
for "explanation_future"  [var-annotated]
            explanation_future = asyncio.Future()
                                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:456: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def openai_service(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:464: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
        def metrics(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_tools.py:518: error: Need type annotation
for "future"  [var-annotated]
            future = asyncio.Future()
                     ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:15: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def mock_settings() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:32: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def mock_metrics() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:41: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def mock_entra_validator() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:50: error: The return type of a
generator function should be "Generator" or one of its supertypes  [misc]
    def mock_tool() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:110: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:137: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:158: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:205: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:257: error: Need type annotation
for "future"  [var-annotated]
        future = asyncio.Future()
                 ^~~~~~~~~~~~~~~~
tests/unit/test_codestory_mcp/test_server.py:293: error: "BaseRoute" has no
attribute "path"  [attr-defined]
            route_paths = [route.path for route in app.routes]
                           ^~~~~~~~~~
tests/integration/test_mcp.py:19: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def client() -> None:
    ^~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:251: error:
Argument "message" to "ChatResponseChoice" has incompatible type "ChatMessage";
expected "ChatResponseMessage"  [arg-type]
                            message=ChatMessage(role=ChatRole.ASSISTANT, c...
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:267: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def sample_repo() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:352: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def neo4j_connector() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_summarizer_integration.py:418: error:
Value of type "Any | None" is not indexable  [index]
            class_id = class_result["id"]
                       ^~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:186: error:
Cannot assign to a method  [method-assign]
            manager.status = mock_status
            ^~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:309: error:
Unsupported operand types for * ("object" and "float")  [operator]
                    active_progress += fs_status["progress"] * fs_weight
                                       ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:313: error:
Unsupported operand types for * ("object" and "float")  [operator]
                    active_progress += blarify_status["progress"] * blarif...
                                       ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:317: error:
Unsupported operand types for * ("object" and "float")  [operator]
                    active_progress += summarizer_status["progress"] * sum...
                                       ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:356: error:
Cannot assign to a method  [method-assign]
        pipeline_manager.status = calculate_pipeline_progress
        ^~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:520: error:
Unsupported operand types for * ("object" and "float")  [operator]
                    active_progress += fs_status["progress"] * fs_weight
                                       ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:524: error:
Unsupported operand types for * ("object" and "float")  [operator]
                    active_progress += blarify_status["progress"] * blarif...
                                       ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:528: error:
Unsupported operand types for * ("object" and "float")  [operator]
                    active_progress += summarizer_status["progress"] * sum...
                                       ^
tests/integration/test_ingestion_pipeline/test_progress_tracking.py:567: error:
Cannot assign to a method  [method-assign]
        pipeline_manager.status = calculate_pipeline_progress
        ^~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/api/ingest.py:123: error: Item "list[JobStatus]" of
"list[JobStatus] | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_service/api/ingest.py:123: error: Item "None" of
"list[JobStatus] | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_mcp/main.py:53: error: Argument "foreign_pre_chain" to
"ProcessorFormatter" has incompatible type "list[object]"; expected
"Sequence[Callable[[Any, str, MutableMapping[str, Any]], Mapping[str, Any] | str | bytes | bytearray | tuple[Any, ...]]] | None"
 [arg-type]
            foreign_pre_chain=pre_chain,
                              ^~~~~~~~~
src/codestory_docgrapher/step.py:35: error: The return type of "__init__" must
be None  [misc]
        def __init__(self) -> Any:
        ^
src/codestory_docgrapher/step.py:258: error: Untyped decorator makes function
"run_docgrapher" untyped  [misc]
    @shared_task(bind=True, name="codestory_docgrapher.step.run_docgrapher...
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory_docgrapher/step.py:259: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def run_docgrapher(
    ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"branch" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"steps" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"dependencies" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"config" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"options" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"created_by" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"description" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"tags" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"priority" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"eta" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:49: error: Missing named argument
"countdown" for "IngestionRequest"  [call-arg]
            request = IngestionRequest(
                      ^
tests/unit/test_codestory_service/test_api.py:267: error: List item 0 has
incompatible type "dict[str, object]"; expected "ConfigPatchItem"  [list-item]
                items=[{"key": "general.debug", "value": False}],
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_codestory_service/test_api.py:327: error: Missing named
argument "email" for "UserInfo"  [call-arg]
            mock_service.get_user_info.return_value = UserInfo(
                                                      ^
tests/unit/test_cli/test_service_client.py:278: error: Cannot assign to a
method  [method-assign]
            client.execute_query = MagicMock()
            ^~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_service_client.py:303: error: Cannot assign to a
method  [method-assign]
            client.execute_query = MagicMock()
            ^~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_service_client.py:316: error: Cannot assign to a
method  [method-assign]
            client.execute_query = MagicMock()
            ^~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_service_client.py:328: error: Cannot assign to a
method  [method-assign]
            client.execute_query = MagicMock()
            ^~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:505: error:
Argument "started_at" to "IngestionStarted" has incompatible type "None";
expected "datetime"  [arg-type]
                    started_at=None,
                               ^~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:533: error:
Argument 1 to "IngestionService" has incompatible type "MockCeleryAdapter";
expected "CeleryAdapter"  [arg-type]
        service = IngestionService(MockCeleryAdapter())
                                   ^~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "branch" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "config" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "options" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "created_by" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "description" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "tags" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "priority" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "eta" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:536: error:
Missing named argument "countdown" for "IngestionRequest"  [call-arg]
        req_a = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:537: error:
Argument "source_type" to "IngestionRequest" has incompatible type "str";
expected "IngestionSourceType"  [arg-type]
            source_type="local_path",
                        ^~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "branch" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "config" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "options" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "created_by" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "description" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "tags" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "priority" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "eta" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:546: error:
Missing named argument "countdown" for "IngestionRequest"  [call-arg]
        req_b = IngestionRequest(
                ^
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:547: error:
Argument "source_type" to "IngestionRequest" has incompatible type "str";
expected "IngestionSourceType"  [arg-type]
            source_type="local_path",
                        ^~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_step_dependencies.py:570: error:
Statement is unreachable  [unreachable]
            waiting_key = f"codestory:ingestion:waiting:{job_b_id}"
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:42: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def sample_repo() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:135: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def neo4j_connector() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_docgrapher_integration.py:326: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
    def mock_llm_client() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/base_pipeline_test.py:25: error: The
return type of a generator function should be "Generator" or one of its
supertypes  [misc]
        def setup_test_env(self, neo4j_connector: Any, redis_client: Any, ...
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/integration/test_service.py:18: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def test_client() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_config_api.py:24: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def neo4j_connector() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_ingestion_pipeline/test_full_pipeline_integration.py:29: error:
The return type of a generator function should be "Generator" or one of its
supertypes  [misc]
        def setup_pipeline_manager(self) -> None:
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/service.py:16: error: Name "click" already defined
(by an import)  [no-redef]
        import click
        ^
src/codestory/cli/commands/service.py:627: error: Incompatible types in
assignment (expression has type "CompletedProcess[str]", variable has type
"CompletedProcess[bytes]")  [assignment]
                    process = subprocess.run(  # TODO: Fix type compatibil...
                              ^
src/codestory/cli/commands/service.py:642: error: Argument 1 to "split" of
"bytes" has incompatible type "str"; expected "Buffer | None"  [arg-type]
    ...         c for c in process.stdout.strip().split("\n") if c and c in c...
                                                        ^~~~
src/codestory/cli/commands/service.py:835: error: Incompatible types in
assignment (expression has type "CompletedProcess[str]", variable has type
"CompletedProcess[bytes]")  [assignment]
                    process = subprocess.run(  # TODO: Fix type compatibil...
                              ^
src/codestory/cli/commands/service.py:853: error: Argument 1 to "split" of
"bytes" has incompatible type "str"; expected "Buffer | None"  [arg-type]
    ...                 error_lines = process.stderr.strip().split("\n")[-5:]
                                                                   ^~~~
src/codestory/cli/commands/service.py:856: error: If x = b'abc' then f"{x}" or
"{}".format(x) produces "b'abc'", not "abc". If this is desired behavior, use
f"{x!r}" or "{!r}".format(x). Otherwise, decode the bytes  [str-bytes-safe]
                                console.print(f"  {line}")
                                                  ^~~~~~
src/codestory/cli/commands/service.py:993: error: Incompatible types in
assignment (expression has type "CompletedProcess[str]", variable has type
"CompletedProcess[bytes]")  [assignment]
                    process = subprocess.run(  # TODO: Fix type compatibil...
                              ^
src/codestory/cli/commands/service.py:1010: error: Argument 1 to "split" of
"bytes" has incompatible type "str"; expected "Buffer | None"  [arg-type]
    ...                 error_lines = process.stderr.strip().split("\n")[-5:]
                                                                   ^~~~
src/codestory/cli/commands/service.py:1013: error: If x = b'abc' then f"{x}" or
"{}".format(x) produces "b'abc'", not "abc". If this is desired behavior, use
f"{x!r}" or "{!r}".format(x). Otherwise, decode the bytes  [str-bytes-safe]
                                console.print(f"  {line}")
                                                  ^~~~~~
src/codestory/cli/commands/query.py:378: error: Argument "border_style" to
"Panel" has incompatible type "str | None"; expected "str | Style"  [arg-type]
                        border_style="cyan" if color else None
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/query.py:386: error: Argument "border_style" to
"Panel" has incompatible type "str | None"; expected "str | Style"  [arg-type]
                    border_style="cyan" if color else None
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/query.py:421: error: Argument "style" to "Tree" has
incompatible type "str | None"; expected "str | Style"  [arg-type]
            tree = Tree("Query Results", style="bold cyan" if color else N...
                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/query.py:447: error: Argument "style" to "Tree" has
incompatible type "str | None"; expected "str | Style"  [arg-type]
            tree = Tree("Query Results", style="bold cyan" if color else N...
                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/query.py:531: error: Name "columns" already defined
on line 505  [no-redef]
                columns: set[Any] = set()
                ^
src/codestory/cli/commands/query.py:534: error: "list[Any]" has no attribute
"update"  [attr-defined]
                        columns.update(item.keys())
                        ^~~~~~~~~~~~~~
src/codestory/cli/commands/query.py:544: error: Name "row" already defined on
line 512  [no-redef]
                        row: list[Any] = []
                        ^
src/codestory/cli/commands/query.py:603: error: Incompatible return value type
(got "Syntax", expected "str")  [return-value]
                    return Syntax(obj["code"], lang, theme="monokai", line...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/cli/commands/query.py:605: error: Returning Any from function
declared to return "str"  [no-any-return]
                    return obj["code"]
                    ^~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:35: error: No return value expected 
[return-value]
            return result.stdout if capture_output else None
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:146: error: No return value expected 
[return-value]
                            return True
                            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:153: error: No return value expected 
[return-value]
                    return True
                    ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:217: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:221: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:254: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:258: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:286: error: No return value expected 
[return-value]
        return True
        ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:318: error: No return value expected 
[return-value]
                    return True
                    ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:330: error: No return value expected 
[return-value]
        return False
        ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:341: error: No return value expected 
[return-value]
            return False
            ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:358: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:361: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
        if not force_remount and is_repo_mounted(repo_path, console):
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:366: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:389: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
        verification = is_repo_mounted(repo_path, console)
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:413: error: No return value expected 
[return-value]
        return True
        ^~~~~~~~~~~
src/codestory/cli/commands/ingest.py:540: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
            is_mounted = is_repo_mounted(local_path)
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:601: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
                if not is_repo_mounted(local_path, console):
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:717: error: Statement is unreachable 
[unreachable]
                    console.print(f"[yellow]Warning: --eta value '{eta}' i...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/codestory/cli/commands/ingest.py:951: error: "is_repo_mounted" does not
return a value (it only ever returns None)  [func-returns-value]
        if not force_remount and is_repo_mounted(local_path, console):
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:958: error: "setup_repository_mount" does
not return a value (it only ever returns None)  [func-returns-value]
        if setup_repository_mount(local_path, console, force_remount):
           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:1061: error: No return value expected 
[return-value]
                return False
                ^~~~~~~~~~~~
src/codestory/cli/commands/ingest.py:1063: error: No return value expected 
[return-value]
            return True
            ^~~~~~~~~~~
tests/unit/test_cli/test_commands/test_repository_mounting.py:53: error:
"is_repo_mounted" does not return a value (it only ever returns None) 
[func-returns-value]
                result = ingest.is_repo_mounted("/test/repo", console=None...
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_commands/test_repository_mounting.py:73: error:
"is_repo_mounted" does not return a value (it only ever returns None) 
[func-returns-value]
                    result = ingest.is_repo_mounted("/test/repo", console=...
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_cli/test_commands/test_repository_mounting.py:102: error:
"setup_repository_mount" does not return a value (it only ever returns None) 
[func-returns-value]
                                        result = ingest.setup_repository_m...
                                                 ^~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_cli/test_commands/test_repository_mounting.py:133: error:
"setup_repository_mount" does not return a value (it only ever returns None) 
[func-returns-value]
                                        result = ingest.setup_repository_m...
                                                 ^~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_cli/test_commands/test_repository_mounting.py:155: error:
"create_override_file" does not return a value (it only ever returns None) 
[func-returns-value]
                    result = ingest.create_override_file(temp_dir, console...
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_cli/test_repository_mounting.py:35: error: The return
type of a generator function should be "Generator" or one of its supertypes 
[misc]
    def temp_repository() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_cli/test_repository_mounting.py:65: error: The return
type of a generator function should be "Generator" or one of its supertypes 
[misc]
    def stop_containers() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_cli/test_repository_mounting.py:330: error: "IO[str]"
has no attribute "getvalue"  [attr-defined]
                output = console.file.getvalue()
                         ^~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:8: error: Skipping analyzing "click_didyoumean":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from click_didyoumean import DYMGroup
    ^
src/codestory/cli/main.py:8: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
src/codestory/cli/main.py:13: error: Incompatible import of "rich_click_module"
(imported name has type Module, local name has type "object")  [assignment]
        import rich_click as rich_click_module
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:19: error: Module has no attribute "USE_RICH_MARKUP" 
[attr-defined]
        _click_for_rich.USE_RICH_MARKUP = False
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:20: error: Module has no attribute "SHOW_ARGUMENTS" 
[attr-defined]
        _click_for_rich.SHOW_ARGUMENTS = False
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:21: error: Module has no attribute
"GROUP_ARGUMENTS_OPTIONS"  [attr-defined]
        _click_for_rich.GROUP_ARGUMENTS_OPTIONS = False
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:22: error: Module has no attribute
"STYLE_ERRORS_SUGGESTION"  [attr-defined]
        _click_for_rich.STYLE_ERRORS_SUGGESTION = ""
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:23: error: Module has no attribute
"ERRORS_SUGGESTION"  [attr-defined]
        _click_for_rich.ERRORS_SUGGESTION = ""
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:34: error: Item Module of Module | None has no
attribute "USE_RICH_MARKUP"  [union-attr]
    rich_click_module.USE_RICH_MARKUP = True
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:34: error: Item "None" of Module | None has no
attribute "USE_RICH_MARKUP"  [union-attr]
    rich_click_module.USE_RICH_MARKUP = True
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:35: error: Item Module of Module | None has no
attribute "SHOW_ARGUMENTS"  [union-attr]
    rich_click_module.SHOW_ARGUMENTS = True
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:35: error: Item "None" of Module | None has no
attribute "SHOW_ARGUMENTS"  [union-attr]
    rich_click_module.SHOW_ARGUMENTS = True
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:36: error: Item Module of Module | None has no
attribute "GROUP_ARGUMENTS_OPTIONS"  [union-attr]
    rich_click_module.GROUP_ARGUMENTS_OPTIONS = True
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:36: error: Item "None" of Module | None has no
attribute "GROUP_ARGUMENTS_OPTIONS"  [union-attr]
    rich_click_module.GROUP_ARGUMENTS_OPTIONS = True
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:37: error: Item Module of Module | None has no
attribute "STYLE_ERRORS_SUGGESTION"  [union-attr]
    rich_click_module.STYLE_ERRORS_SUGGESTION = "yellow italic"
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:37: error: Item "None" of Module | None has no
attribute "STYLE_ERRORS_SUGGESTION"  [union-attr]
    rich_click_module.STYLE_ERRORS_SUGGESTION = "yellow italic"
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:38: error: Item Module of Module | None has no
attribute "ERRORS_SUGGESTION"  [union-attr]
    rich_click_module.ERRORS_SUGGESTION = (
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:38: error: Item "None" of Module | None has no
attribute "ERRORS_SUGGESTION"  [union-attr]
    rich_click_module.ERRORS_SUGGESTION = (
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:49: error: Function is missing a type annotation for
one or more arguments  [no-untyped-def]
        def __call__(self, *args, **kwargs) -> None:
        ^
src/codestory/cli/main.py:52: error: Returning Any from function declared to
return "None"  [no-any-return]
                return super().__call__(*args, **kwargs)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:192: error: Function is missing a type annotation for
one or more arguments  [no-untyped-def]
        def wrapped_main(*args, **kwargs) -> Any:
        ^
src/codestory/cli/main.py:247: error: No return value expected  [return-value]
        return wrapped_main
        ^~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:251: error: "_wrap_click_command" does not return a
value (it only ever returns None)  [func-returns-value]
    app.main = _wrap_click_command(app)
               ^~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:260: error: Function is missing a type annotation for
one or more arguments  [no-untyped-def]
        def custom_error_callback(self, file: Any=None) -> None:
        ^
src/codestory/cli/main.py:324: error: Cannot assign to a method 
[method-assign]
            click.exceptions.UsageError.show = custom_error_callback
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/codestory/cli/main.py:337: error: Cannot assign to a method 
[method-assign]
            click.exceptions.UsageError.show = original_error_callback
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_main.py:13: error: Argument 1 to "contextmanager" has
incompatible type "Callable[[], None]"; expected "Callable[[], Iterator[Never]]"
 [arg-type]
    @contextmanager
     ^
tests/unit/test_cli/test_main.py:14: error: The return type of a generator
function should be "Generator" or one of its supertypes  [misc]
    def custom_error_handler() -> None:
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_main.py:21: error: Cannot assign to a method 
[method-assign]
            click.Context.fail = MagicMock()
            ^~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_main.py:26: error: Cannot assign to a method 
[method-assign]
            click.Context.fail = original_error_callback
            ^~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_main.py:181: error: Statement is unreachable 
[unreachable]
                click.Context.fail.assert_called_once_with(mock_ctx, "Some...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_cli/test_main.py:184: error: Statement is unreachable 
[unreachable]
            assert click.Context.fail == original_fail
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_commands/test_ingest.py:258: error: "is_repo_mounted"
does not return a value (it only ever returns None)  [func-returns-value]
                result = ingest.is_repo_mounted("/fake/repo", mock_console...
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_commands/test_ingest.py:278: error: "is_repo_mounted"
does not return a value (it only ever returns None)  [func-returns-value]
                result = ingest.is_repo_mounted("/fake/repo", mock_console...
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/unit/test_cli/test_commands/test_ingest.py:310: error:
"setup_repository_mount" does not return a value (it only ever returns None) 
[func-returns-value]
                                        result = ingest.setup_repository_m...
                                                 ^~~~~~~~~~~~~~~~~~~~~~~~~...
tests/unit/test_cli/test_commands/test_ingest.py:333: error:
"setup_repository_mount" does not return a value (it only ever returns None) 
[func-returns-value]
                                        result = ingest.setup_repository_m...
                                                 ^~~~~~~~~~~~~~~~~~~~~~~~~...
tests/integration/test_cli/test_ingest_integration.py:210: error:
"is_repo_mounted" does not return a value (it only ever returns None) 
[func-returns-value]
                assert is_repo_mounted(temp_dir)
                       ^~~~~~~~~~~~~~~~~~~~~~~~~
tests/integration/test_cli/test_ingest_integration.py:243: error:
"is_repo_mounted" does not return a value (it only ever returns None) 
[func-returns-value]
                assert is_repo_mounted(temp_dir)
                       ^~~~~~~~~~~~~~~~~~~~~~~~~
Found 1014 errors in 102 files (checked 222 source files)
